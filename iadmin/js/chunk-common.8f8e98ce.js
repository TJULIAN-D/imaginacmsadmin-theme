(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[1640],{86284:(e,t,n)=>{"use strict";n.d(t,{DF:()=>l,GK:()=>p,Hb:()=>k,Ih:()=>h,Il:()=>A,JU:()=>I,KW:()=>N,Qt:()=>v,UF:()=>C,YD:()=>s,_G:()=>u,_y:()=>d,a:()=>M,ey:()=>o,g1:()=>m,k0:()=>D,kl:()=>b,kz:()=>f,lC:()=>c,mI:()=>g,s9:()=>T,uS:()=>i,wD:()=>x,wF:()=>w,wz:()=>y,yg:()=>S});var r=n(49456),a=n.n(r);const o=1,i=2,l=3,s=4,u=1,c=2,d=3,m=4,f=5,p=8,h={operator:"!=",value:8},g=[30,33,34],y=[26,34],b=2,v=1,w=4,I=3,D=6,k={boundOriginAirportId:!0,boundTailNumber:!0,boundScheduled:!0,boundScheduledDeparture:!0,boundDestinationAirport:!0},M=["stationId","acTypeId","operationTypeId","carrierId","gateId","statusId"],A=["stationId","acTypeId","operationTypeId","carrierId","statusId"],x=["inboundFlightNumber","inboundScheduledArrival"],T=["outboundFlightNumber","outboundScheduledDeparture"],N=[],S=[],C={workdayTransactions:null,carrierId:0,carrier:null,stationId:0,station:null,customerId:null,customer:null,acTypeId:null,acType:null,operationTypeId:0,operationType:null,statusId:5,workOrderStatus:null,inboundOriginAirportId:null,inboundOriginAirport:null,outboundDestinationAirportId:null,outboundDestinationAirport:null,contractId:null,contract:null,responsibleId:0,responsible:{email:"soporte@imaginacolombia.com",password:"***",permissions:{"iflight.airline.manage":!0,"iflight.airline.index":!0,"iflight.airline.create":!0,"iflight.airline.edit":!0,"iflight.airline.destroy":!0,"iflight.airline.restore":!0,"iflight.airport.manage":!0,"iflight.airport.index":!0,"iflight.airport.create":!0,"iflight.airport.edit":!0,"iflight.airport.destroy":!0,"iflight.airport.restore":!0,"iflight.flight.manage":!0,"iflight.flight.index":!0,"iflight.flight.create":!0,"iflight.flight.edit":!0,"iflight.flight.destroy":!0,"iflight.flight.restore":!0,"iflight.flights.manage":!0,"iflight.flights.index":!0,"iflight.flights.create":!0,"iflight.flights.edit":!0,"iflight.flights.destroy":!0,"iflight.flights.restore":!0,"iflight.flight-statuses.manage":!0,"iflight.flight-statuses.index":!0,"iflight.flight-statuses.create":!0,"iflight.flight-statuses.edit":!0,"iflight.flight-statuses.destroy":!0,"iflight.flight-statuses.restore":!0,"ramp.work-orders.manage":!0,"ramp.work-orders.index":!0,"ramp.work-orders.index-all":!0,"ramp.work-orders.edit":!0,"ramp.work-orders.edit-status":!0,"ramp.work-orders.edit-when-submitted":!0,"ramp.work-orders.post":!0,"ramp.work-orders.re-post":!0,"ramp.work-orders.see-workday-transactions":!0,"ramp.work-orders.see-contract-name":!0,"ramp.work-orders.submit":!0,"ramp.work-orders.bulk-post":!0,"ramp.work-orders.bulk-submit":!0,"ramp.work-orders.bulk-export-pdf":!0,"ramp.work-orders.bulk-export-csv":!0,"ramp.work-orders.create":!0,"ramp.work-orders.destroy":!0,"ramp.work-orders.manage-responsible":!0,"ramp.work-orders.index-flight-positions":!0,"ramp.work-order-schedules.manage":!0,"ramp.work-order-schedules.index":!0,"ramp.work-order-schedules.edit":!0,"ramp.work-order-schedules.create":!0,"ramp.work-order-schedules.destroy":!0,"ramp.work-order-statuses.manage":!0,"ramp.work-order-statuses.index":!0,"ramp.work-order-statuses.edit":!0,"ramp.work-order-statuses.create":!0,"ramp.work-order-statuses.destroy":!0,"ramp.work-order-delays.manage":!0,"ramp.work-order-delays.index":!0,"ramp.work-order-delays.edit":!0,"ramp.work-order-delays.create":!0,"ramp.work-order-delays.destroy":!0,"ramp.workday-transactions.manage":!0,"ramp.workday-transactions.index":!0,"ramp.workday-transactions.edit":!0,"ramp.workday-transactions.create":!0,"ramp.workday-transactions.destroy":!0,"ramp.schedule-statuses.manage":!0,"ramp.schedule-statuses.index":!0,"ramp.schedule-statuses.edit":!0,"ramp.schedule-statuses.create":!0,"ramp.schedule-statuses.destroy":!0,"ramp.work-orders-comments.manage":!0,"ramp.work-orders-comments.index":!0,"ramp.work-orders-comments.create":!0,"ramp.work-orders-comments.edit":!0,"ramp.work-orders-comments.destroy":!0,"ramp.work-orders-comments.restore":!0,"ramp.categories.manage":!0,"ramp.categories.index":!0,"ramp.categories.edit":!0,"ramp.categories.create":!0,"ramp.categories.destroy":!0,"setup.customers.manage":!0,"setup.customers.index":!0,"setup.customers.index-all":!0,"setup.customers.edit":!0,"setup.customers.create":!0,"setup.customers.destroy":!0,"ireport.report-types.manage":!0,"ireport.report-types.index":!0,"ireport.report-types.edit":!0,"ireport.report-types.create":!0,"ireport.report-types.destroy":!0,"ireport.reports.manage":!0,"ireport.reports.index":!0,"ireport.reports.edit":!0,"ireport.reports.create":!0,"ireport.reports.destroy":!0,"ireport.folders.manage":!0,"ireport.folders.index":!0,"ireport.folders.edit":!0,"ireport.folders.create":!0,"ireport.folders.destroy":!0,"icomments.comments.manage":!0,"icomments.comments.index":!0,"icomments.comments.create":!0,"icomments.comments.edit":!0,"icomments.comments.destroy":!0,"icomments.comments.restore":!0},allSettings:{},socialData:{},defaultInclude:"departments,roles",allPermissions:{},lastLogin:"2023-04-04T15:07:25.2214956",fullName:"Imagina Offline Colombia",firstName:"Imagina Offline",lastName:"Colombia",timezone:null,language:null,createdBy:null,updatedBy:null,deletedBy:null,externalGuid:null,roles:[],departments:[],folders:null,reports:null,id:0,createdAt:"2022-03-31T16:27:00.8359634",updatedAt:"2023-04-04T15:07:25.3157749",deletedAt:null,restoredAt:null,restoredBy:null,externalId:null,options:{buildingsAssigned:[],businessUnitType:"3",stationsAssigned:[],companyAssigned:null},isReportable:!1,forceDelete:!1,searchableFields:"id,email,first_name,last_name",fileFormats:null},flightStatusId:0,flightStatus:null,scheduleStatusId:null,scheduleStatus:null,workOrderItems:[],gateId:0,gate:null,companyId:0,company:null,adHoc:null,customCustomer:!1,inboundCustomFlightNumber:!1,needToBePosted:!1,customCustomerName:null,remark:null,delay:null,safetyMessage:null,customerSignature:null,customerName:null,customerTitle:null,representativeSignature:null,representativeName:null,representativeTitle:null,date:null,referenceId:null,inboundFlightNumber:null,inboundTailNumber:null,inboundScheduledArrival:null,inboundBlockIn:null,estimatedOnUtc:null,inboundCargoTotalUldsUnloaded:null,inboundCargoBulkUnloaded:null,outboundFlightNumber:null,outboundTailNumber:null,outboundScheduledDeparture:null,outboundBlockOut:null,estimatedOffUtc:null,calendarTitle:null,outboundCustomFlightNumber:null,outboundCargoTotalUldsLoaded:null,outboundCargoBulkLoaded:null,cargoTotalKilosLoaded:null,cargoTotalKilosUnloaded:null,preFlightNumber:null,faFlightId:null,faFlightStatus:null,comments:0,sta:"23:12:00",std:"12:31:00",flightPosition:null,isReportable:!0,transactions:null,flightStatusColor:null,id:null,createdAt:a()().format("YYYY-MM-DDTHH:mm:ss"),updatedAt:null,deletedAt:null,restoredAt:null,createdBy:null,updatedBy:null,deletedBy:null,restoredBy:null,externalId:null,options:null,forceDelete:!1,defaultInclude:"customer,workOrderItems,workOrderItems.workOrderItemAttributes,gate,flightStatus",searchableFields:"id,reference_id",fileFormats:null}},42648:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});const r={computed:{responsive(){return"mobile"==this.windowSize},windowSize(){return this.windowWith>="768"?"desktop":"mobile"},windowWith(){return window.innerWidth}}}},47348:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});n(23816);function r(e,t){const n=e[0].data||[],r=e[1].data||[],a=n.map((e=>({id:Number(e.id),label:e.customerName+" (Ad Hoc)",value:e.customerName+" (Ad Hoc)",customerId:Number(e.id),contractId:null,contractName:null})));return r.forEach(((e,n)=>{const r=t?`${e.customerName} (${e.contractName})`:e.customerName;a.push({id:Number(e.customerId),customerId:e.customerId,label:r,contractId:e.id,value:`${e.customerName}-${e.contractName}-${n}`,contractName:e.contractName})})),a}},30152:(e,t,n)=>{"use strict";n.d(t,{c:()=>f});n(23816);var r=n(86284),a=n(49456),o=n.n(a),i=n(20584),l=n(8932),s=n(75836),u=n(34e3),c=n(47507),d=n.n(c);const m=(0,s.cB)({titleOffline:"",statusId:r._G,needToBePosted:!1,flightNumberField:null,contractId:0,workOrderItems:[],loading:!1,flightBoundFormStatus:{...r.Hb},dateBoundBlock:{outboundBlockOut:null,inboundBlockIn:null,outboundScheduledDeparture:null,inboundScheduledArrival:null},responsible:{},visibleMapModal:!1,flightMap:null,loadingModalMap:!1,flightList:[],flightId:0,isblank:!1,isPassenger:!1,workOrder:{},isFueling:!0,typeWorkOrder:null});function f(){function e(e){m.isPassenger=e}function t(){return m.isFueling}function n(e){m.isFueling=e}function a(){return m.typeWorkOrder}function s(e){m.typeWorkOrder=e}function c(){return m.workOrder}function f(e){m.workOrder=e}function p(){return m.isPassenger}function h(){return m.titleOffline}function g(e){m.titleOffline=e}function y(e){m.statusId=e}function b(){return m.statusId}function v(e){m.needToBePosted=e}function w(e){return m.isblank}function I(e){m.isblank=e}function D(){const e=Number(m.statusId);return!!m.isblank||(!(e!==r._G||!m.needToBePosted)||(e===r._y&&!me()||e===r.lC))}function k(e){m.flightNumberField=e}function M(){return m.flightNumberField}function A(e){m.contractId=e}function x(){return m.contractId}function T(e){m.workOrderItems=e}function N(){return m.workOrderItems}function S(){return m.loading}function C(){m.loading=!1}function z(){m.loading=!0}function O(e){m.flightBoundFormStatus.boundOriginAirportId=this.isData(e.destinationAirport.id),m.flightBoundFormStatus.boundTailNumber=this.isData(e.registration),m.flightBoundFormStatus.outboundTailNumber=this.isData(e.registration||e.outRegistration),m.flightBoundFormStatus.boundDestinationAirport=this.isData(e.originAirport.id),m.flightBoundFormStatus.boundScheduled=this.isData(e.estimatedOn),m.flightBoundFormStatus.boundScheduledDeparture=this.isData(e.estimatedOff),m.isPassenger&&(m.flightBoundFormStatus.inboundGateArrival=this.isData(e.gateDestination),m.flightBoundFormStatus.outboundGateDeparture=this.isData(e.gateOrigin))}function $(e){return!(!e||""===e)}function Q(){m.flightBoundFormStatus={...r.Hb}}function L(){const e={boundOriginAirportId:!1,boundTailNumber:!1,boundScheduled:!1,boundScheduledDeparture:!1};m.isPassenger&&(e.inboundGateArrival=!1,e.outboundGateDeparture=!1),m.flightBoundFormStatus=e}function E(){return m.flightBoundFormStatus}function F(e,t=null,n){const r="MM/DD/YYYY HH:mm",a=o()(n,r).format("YYYY/MM/DD"),i=o()(),l=i.format("YYYY/MM/DD"),s=i.format("H"),u=i.format("mm");return isNaN(e)?e<=l:t?l!==a||Number(t)<=u:l!==a||e<=s}function W(e){m.dateBoundBlock.inboundBlockIn=e}function Y(){return m.dateBoundBlock.inboundBlockIn}function j(e){m.dateBoundBlock.outboundBlockOut=e}function q(){return m.dateBoundBlock.outboundBlockOut}function R(e){m.dateBoundBlock.outboundScheduledDeparture=e}function P(){return m.dateBoundBlock.outboundScheduledDeparture}function U(e){m.dateBoundBlock.inboundScheduledArrival=e}function V(){return m.dateBoundBlock.inboundScheduledArrival}function _(e,t=null){const n=Y()?o()(Y()):o()(),r=n.format("YYYY/MM/DD"),a=n.format("H"),i=n.format("mm");return isNaN(e)?Y()?e<=r:e<=o()().format("YYYY/MM/DD"):t?Number(t)<=i:e<=a}function B(e,t=null){const n=q()?o()(q()):o()(),r=n.format("H"),a=n.format("mm");return isNaN(e)?q()?e<=n.format("YYYY/MM/DD")&&e>=o()(Y()).format("YYYY/MM/DD"):e<=o()().format("YYYY/MM/DD")&&e>=o()(Y()).format("YYYY/MM/DD"):t?Number(t)<=a:e<=r}function K(e,t){if(e){const n="MM/DD/YYYY HH:mm",r=o()(e,n),a=o()(t,n),i=a.diff(r,"minutes")/60;return Math.round(100*i)/100}return 0}function H(e){if(!e)return null;const[t,n,r]=e.substr(0,10).split("-");return`${n}/${r}/${t}`}function G(e){const t=[];return e.forEach(((e,n)=>{const r=d().tz(e.destinationAirport.timezone).format("z"),a=d().tz(e.originAirport.timezone).format("z"),o=e.scheduledOn?H(e.scheduledOn.split("T")[0]):"",i=e.estimatedOn?d()(e.estimatedOn).tz(e.destinationAirport.timezone).format("MM-DD-YYYY h:mm:ss a"):"",l=e.estimatedOff?d()(e.estimatedOff).tz(e.originAirport.timezone).format("MM-DD-YYYY h:mm:ss a"):"",s=e.destinationAirport?e.destinationAirport.id:"",u={index:n,date:o,destinationAirportId:s,registration:e.registration,inbound:`${i} - ${r||""}`,outbound:`${l} - ${a||""}`,aircraftType:e.aircraftType,faFlightId:e.faFlightId,cancelled:e.cancelled};m.isPassenger&&(u.gateDestination=e.gateDestination||"",u.gateOrigin=e.gateOrigin||""),t.push(u)})),t}function Z(e){m.responsible=e}function J(){return m.responsible}function X(e,t){return Math.floor(Math.random()*(e-t+1)+t)}function ee(){m.visibleMapModal=!1}function te(){m.visibleMapModal=!0}function ne(){return m.visibleMapModal}function re(e){m.visibleMapModal=e}function ae(e){m.flightMap=e}function oe(){return m.flightMap}function ie(){return m.loadingModalMap}function le(e){m.loadingModalMap=e}function se(e){m.flightList=e}function ue(){return m.flightList}function ce(){return m.flightId}function de(e){m.flightId=e}function me(){return l.is.hasAccess("ramp.work-orders.edit-when-submitted")}function fe(e){try{const t=[];for(let n in e)e[n].id&&e[n].attributeId?t.push({name:e[n].name,value:e[n].value,attribute_id:e[n].attributeId,id:e[n].id}):e[n].id&&!e[n].attributeId?t.push({name:e[n].name,value:e[n].value,attribute_id:e[n].id}):e[n].attributeId&&e[n].value&&t.push({name:e[n].name,value:e[n].value,attribute_id:e[n].attributeId});return t}catch(t){console.log(t)}}function pe(e=[]){try{const t=[];return e.forEach((e=>{e.id&&e.productsId?t.push({id:e.id,product_id:e.productsId,work_order_item_attributes:fe(e.formField)}):e.id&&!e.productsId?t.push({product_id:e.id,work_order_item_attributes:fe(e.formField)}):e.id&&he(e.formField)&&t.push({product_id:e.productsId,work_order_item_attributes:fe(e.formField)})})),t}catch(t){console.log(t)}}function he(e){try{const t=[];for(let n in e)return e[n].value&&""!=e[n].value;return t}catch(t){console.log(t)}}async function ge(){try{const e=p(),t=e?r.mI:r.wz,n=m.flightId,a={refresh:!0,params:{filter:{companyId:t}}};n&&(a.params.filter.id=n);const o=await i.c.index("apiRoutes.qramp.flightPosition",a),l=n?[o.data]:o.data;return se(l),o}catch(e){console.log(e)}}async function ye(e,t){try{const n="apiRoutes.qramp.workOrderChangeStatus",r="apiRoutes.qramp.workOrders",a={id:t,statusId:e};u.c.isAppOffline&&(a.titleOffline=l._s.tr("ifly.cms.form.updateWorkOrder")),await l.a4.updateRecord(r,a,a?.id),await i.c.update(n,t,a)}catch(n){console.log("Error changeStatus Schedule",n)}}function be(e){if(!e&&!e?.includes("T"))return e;const t=e.split(" "),[n,r]=t,a=new Date(n).toLocaleDateString("fr-CA");return`${a}T${r}`}return{getTitleOffline:h,setTitleOffline:g,disabledReadonly:D,setStatusId:y,getStatusId:b,setNeedToBePosted:v,setFlightNumberField:k,getFlightNumberField:M,setContractId:A,getContractId:x,setWorkOrderItems:T,getWorkOrderItems:N,getLoading:S,hideLoading:C,showLoading:z,validateStatusSelectedFlight:O,getFlightBoundFormStatus:E,resetFlightBoundFormStatus:Q,showFielFlightBoundFormStatus:L,isData:$,validateFutureDateTime:F,setDateInboundBlockIn:W,getDateInboundBlockIn:Y,setDateOutboundBlockOut:j,getDateOutboundBlockOut:q,setDateOutboundScheduledDeparture:R,setDateinboundScheduledArrival:U,getDateOutboundScheduledDeparture:P,getDateinboundScheduledArrival:V,validateDateOutboundBlockOut:B,validateDateInboundBlockIn:_,getDifferenceInHours:K,dateFormatter:H,getTableListOfFlights:G,setResponsible:Z,getResponsible:J,numberInRange:X,hideVisibleMapModal:ee,showVisibleMapModal:te,getVisibleMapModal:ne,setVisibleMapModal:re,setFlightMap:ae,getFlightMap:oe,getLoadingModalMap:ie,setLoadingModalMap:le,setFlightList:se,getFlightList:ue,getFlightId:ce,setFlightId:de,editPermissionseSubmitted:me,setAttr:fe,productDataTransformation:pe,isDelete:he,getFlights:ge,setIsblank:I,getIsblank:w,setIsPassenger:e,getIsPassenger:p,changeStatus:ye,parseDateOfflineWO:be,getWorkOrder:c,setWorkOrder:f,getIsFueling:t,setIsFueling:n,getTypeWorkOrder:a,setTypeWorkOrder:s}}},84424:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>l,OS:()=>s,gh:()=>a,iS:()=>u,is:()=>o,kX:()=>r,sH:()=>i});const r=1,a=2,o=3,i=4,l=5,s="asc",u="desc"},24248:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var r=n(75836),a=n(20584),o=n(61552),i=n(20267),l=n(43408),s=n(91592),u=n(52736);const c=(0,r.cB)({columns:[],filters:[],sort:[],loading:!1});function d(){async function e(e=null){try{const t={notToSnakeCase:["filters"]},n="apiRoutes.qreports.reports",r=(0,o.c)().getDescriptionForm(),c=(0,i.c)().payloadColumns(),d=(0,l.c)().payloadFilter(),m=(0,s.c)().payloadSort(),f=u.c.payload(),p={...r,...c,...d,...m,...f};if(e)return void await a.c.update(n,e,p,t);await a.c.create(n,p,t)}catch(t){console.log(t)}}async function t(e){try{c.loading=!0;const t=await a.c.show("apiRoutes.qreports.reports",e,{refresh:!0});await d(t.data.columns||[]),await f(t.data.filters||{}),await h(t.data.sort||{}),await(0,o.c)().setForm(t.data),u.c.form=t.data.schedule||{},setTimeout((()=>{c.loading=!1}),1e3)}catch(t){c.loading=!1,console.log(t)}}function n(e){c.loading=e}function r(){return c.loading}function d(e){c.columns=e}function m(){return c.columns}function f(e){c.filters=e}function p(){return c.filters}function h(e){c.sort=e}function g(){return c.sort}function y(){(0,o.c)().reset(),(0,i.c)().reset(),(0,s.c)().setForm({}),u.c.reset(),(0,l.c)().setForm({}),d([]),f({})}return{saveReport:e,showReport:t,getColumns:m,setColumns:d,setFilters:f,getFilters:p,getSort:g,setSort:h,reset:y,getLoading:r,setLoading:n}}},61552:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});n(23816);var r=n(75836),a=n(20584);const o={email:null,status:!1},i={entity:null,reportTypeId:null,folderId:null,title:null,description:null,roles:[]},l=(0,r.cB)({form:{...i},reportTypeList:[]});function s(){function e(){return l.form}function t(e){l.form={entity:e.entity||null,reportTypeId:e.reportTypeId||null,folderId:e.folderId||null,title:e.title||null,description:e.description||null}}function n(){return l.reportTypeList.map((e=>({label:e.name,value:e.id,...e})))}function r(e){l.reportTypeList=e}function s(){l.form.emailNotification.push({...o})}function u(e){l.form.emailNotification.splice(e,1)}function c(){l.form={...i}}async function d(){try{const e=await a.c.index("apiRoutes.qreports.reportTypes");r(e.data)}catch(e){console.log(e)}}return{getDescriptionForm:e,addEmailNotification:s,deleteEmailNotification:u,reset:c,getReportTypeList:n,setReportTypeList:r,getListOfReportTypes:d,setForm:t}}},20267:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});n(23816);var r=n(75836),a=n(24248);n(7460);const o=(0,r.cB)({columnList:[],filterList:[],selectedAll:{columnList:0,filterList:0}});function i(){function e(){return o.selectedAll.columnList}function t(e){o.selectedAll.columnList=e}function n(){return o.selectedAll.filterList}function r(e){o.selectedAll.filterList=e}function i(){return o.columnList}async function l(e){try{const t=await(0,a.c)().getColumns(),n=e.map((e=>({...e,check:t.some((t=>t===e.id))?1:0}))),r=s(n.filter((e=>1===e.check)));o.columnList=[...r,...n.filter((e=>0===e.check))]}catch(t){console.log(t)}}function s(e){try{const t=(0,a.c)().getColumns(),n=[];return t.forEach((t=>{const r=e.find((e=>e.id===t));r&&n.push({...r})})),n}catch(t){console.log(t)}}function u(){return o.filterList}function c(e){o.filterList=[];const t=(0,a.c)().getFilters();o.filterList=Object.keys(e).map((n=>({id:n,title:e[n].props.label,...e[n],value:t[n]||null,check:t.hasOwnProperty(n)?1:0})))}function d(e){const t={};return o[e].forEach((e=>{t[e.id]={type:"checkbox",value:0,props:{label:e.title}}})),t}function m(){return o.filterList.filter((e=>Boolean(e.check)))}function f(){return o.columnList.filter((e=>Boolean(e.check)))}function p(){l([]),c([]),o.selectedAll={columnList:0,filterList:0}}function h(){const e=f().map((e=>e.id));return{columns:e}}function g(e){o[e].forEach((t=>{t.check=o.selectedAll[e]}))}function y(e){o.selectedAll[e]=Number(o[e].every((e=>1==e.check)))}return{getColumnList:i,getFilterList:u,factoryOfDynamicCheck:d,getSelectedFilters:m,getSelectedColumns:f,setColumnList:l,setFilterList:c,reset:p,payloadColumns:h,selecdAll:g,getColumnCheck:e,setColumnCheck:t,getFilterListCheck:n,setFilterListCheck:r,checkIfAllChecksSelected:y}}},43408:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(75836),a=n(20267),o=n(49456),i=n.n(o),l=n(8932);const s=(0,r.cB)({form:{}});function u(){function e(e){try{const e=(0,a.c)().getSelectedFilters();return c(e)}catch(t){console.log("Factory::FieldsDetaild",t)}}function t(){return[{label:l._s.tr("isite.cms.label.customRange"),value:"customRange"},{label:l._s.tr("isite.cms.label.today"),value:"today"},{label:l._s.tr("isite.cms.label.yesterday"),value:"yesterday"},{label:l._s.tr("isite.cms.label.tomorrow"),value:"tomorrow"},{label:l._s.tr("isite.cms.label.LastNumDays",{numDays:7}),value:"lastSevenDays"},{label:l._s.tr("isite.cms.label.LastNumDays",{numDays:30}),value:"lastThirtyDays"},{label:l._s.tr("isite.cms.label.LastNumDays",{numDays:60}),value:"lastSixtyDays"},{label:l._s.tr("isite.cms.label.currentWeek"),value:"currentWeek"},{label:l._s.tr("isite.cms.label.lastWeek"),value:"lastWeek"},{label:l._s.tr("isite.cms.label.nextWeek"),value:"nextWeek"},{label:l._s.tr("isite.cms.label.currentMonth"),value:"currentMonth"},{label:l._s.tr("isite.cms.label.lastMonth"),value:"lastMonth"},{label:l._s.tr("isite.cms.label.nextMonth"),value:"nextMonth"},{label:l._s.tr("isite.cms.label.numMonthsAgo",{numMonths:2}),value:"twoMonthsAgo"},{label:l._s.tr("isite.cms.label.currentYear"),value:"currentYear"},{label:l._s.tr("isite.cms.label.lastYear"),value:"lastYear"},{label:l._s.tr("isite.cms.label.numYearsAgo",{numYears:2}),value:"twoYearsAgo"},{label:l._s.tr("isite.cms.label.lastNumYears",{numYears:2}),value:"lastTwoYears"}]}function n(){return s.form}function r(){Object.entries(s.form).forEach((([e,t])=>{const n=(0,a.c)().getSelectedFilters().some((t=>t.id===e));n||delete s.form[e]}))}function o(e){let t=null,n=null;switch(e){case"today":t=i()().format("YYYY-MM-DD 00:00:00"),n=i()().format("YYYY-MM-DD 23:59:59");break;case"yesterday":t=i()().subtract(1,"d").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(1,"d").format("YYYY-MM-DD 23:59:59");break;case"tomorrow":t=i()().add(1,"d").format("YYYY-MM-DD 00:00:00"),n=i()().add(1,"d").format("YYYY-MM-DD 23:59:59");break;case"lastSevenDays":t=i()().subtract(6,"d").format("YYYY-MM-DD 00:00:00"),n=i()().format("YYYY-MM-DD 23:59:59");break;case"currentWeek":t=i()().startOf("isoWeek").format("YYYY-MM-DD 00:00:00"),n=i()().endOf("isoWeek").format("YYYY-MM-DD 23:59:59");break;case"lastWeek":t=i()().subtract(1,"weeks").startOf("isoWeek").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(1,"weeks").endOf("isoWeek").format("YYYY-MM-DD 23:59:59");break;case"nextWeek":t=i()().add(1,"weeks").startOf("isoWeek").format("YYYY-MM-DD 00:00:00"),n=i()().add(1,"weeks").endOf("isoWeek").format("YYYY-MM-DD 23:59:59");break;case"lastThirtyDays":t=i()().subtract(29,"d").format("YYYY-MM-DD 00:00:00"),n=i()().format("YYYY-MM-DD 23:59:59");break;case"lastSixtyDays":t=i()().subtract(59,"d").format("YYYY-MM-DD 00:00:00"),n=i()().format("YYYY-MM-DD 23:59:59");break;case"currentMonth":t=i()().startOf("month").format("YYYY-MM-DD 00:00:00"),n=i()().endOf("month").format("YYYY-MM-DD 23:59:59");break;case"lastMonth":t=i()().subtract(1,"months").startOf("month").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(1,"months").endOf("month").format("YYYY-MM-DD 23:59:59");break;case"nextMonth":t=i()().add(1,"months").startOf("month").format("YYYY-MM-DD 00:00:00"),n=i()().add(1,"months").endOf("month").format("YYYY-MM-DD 23:59:59");break;case"twoMonthsAgo":t=i()().subtract(2,"months").startOf("month").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(2,"months").endOf("month").format("YYYY-MM-DD 23:59:59");break;case"twoYearsAgo":t=i()().subtract(2,"year").startOf("year").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(2,"year").endOf("year").format("YYYY-MM-DD 23:59:59");break;case"lastYear":t=i()().subtract(1,"year").startOf("year").format("YYYY-MM-DD 00:00:00"),n=i()().subtract(1,"year").endOf("year").format("YYYY-MM-DD 23:59:59");break;case"lastTwoYears":t=i()().subtract(1,"year").startOf("year").format("YYYY-MM-DD 00:00:00"),n=i()().endOf("year").format("YYYY-MM-DD 23:59:59");break;case"currentYear":t=i()().startOf("year").format("YYYY-MM-DD 00:00:00"),n=i()().endOf("year").format("YYYY-MM-DD 23:59:59");break;case"15daysAroundToday":t=i()().subtract(7,"days").format("YYYY-MM-DD 00:00:00"),n=i()().add(7,"days").format("YYYY-MM-DD 23:59:59");break;case"5daysAroundToday":t=i()().subtract(2,"days").format("YYYY-MM-DD 00:00:00"),n=i()().add(2,"days").format("YYYY-MM-DD 23:59:59");break;case"customRange":t&&(t=i()(t).format("YYYY-MM-DD 00:00:00")),n&&(n=i()(n).format("YYYY-MM-DD 23:59:59"));break}return{fromDate:t,toDate:n}}function u(){const e=s.form;if(e.date){const t=(0,a.c)().getSelectedFilters(),n=t.find((e=>"date"===e.id));e.date={field:n.name,type:e.date,from:o(e.date).fromDate,to:o(e.date).toDate}}return{filters:e}}function c(e,n=!1){const r={};return e.forEach((e=>{const a="date"===e.id?e.value&&e.value.type?e.value.type:null:e.value||null;s.form[e.id]=a||null;let o={};const i=e.type||"date"!==e.id?e.type:"select",l=e.type||"date"!==e.id?{}:{options:t()};if(e.type&&"select"===e.type&&e.loadOptions&&(o={loadOptions:{...e.loadOptions}}),n&&"date"===e.id)r[e.id]={props:{label:e.props.label},name:e.name,field:e.field,type:a||null,value:a||null};else{const t="date"===e.id?e.value&&e.value.type?e.value.type:null:s.form[e.id]||e.value||null;r[e.id]={value:t,type:i,props:{...e.props,...l,readonly:"boolean"===typeof e.props.readonly&&e.props.readonly},...o}}})),r}function d(e){s.form=e}return{factoryOfDynamicSelect:e,removeObjectIdentifiers:r,getForm:n,payloadFilter:u,buildfilters:c,setForm:d}}},52329:(e,t,n)=>{"use strict";n.d(t,{CO:()=>r,kP:()=>o,m_:()=>a});const r="asc",a="desc",o="notset"},52736:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});n(23816);var r=n(75836),a=n(92444),o=n(16728);const i="csv",l={status:0,timeInterval:null,timeZone:null,on:null,at:null,startingOn:null,endingOn:null,emails:[{email:null,status:1}],format:i},s=(0,r.cB)({form:{status:0,timeInterval:null,timeZone:o.c.defaults.params.setting.timezone,on:null,at:null,startingOn:null,endingOn:null,emails:[{email:null,status:1}],format:i}}),u=(0,a.S6)((()=>({get form(){return s.form},set form(e){s.form.status=e.status||0,s.form.timeInterval=e.timeInterval||null,s.form.timeZone=e.timeZone||o.c.defaults.params.setting.timezone,s.form.on=e.on||null,s.form.at=e.at||null,s.form.startingOn=e.startingOn||null,s.form.endingOn=e.endingOn||null,s.form.emails=e.emails||[{email:null,status:1}],s.form.format=e.format||i},addEmailNotification(){s.form.emails.push({email:null,status:1})},deleteEmailNotification(e){s.form.emails.splice(e,1)},payload(){return 1==s.timeInterval&&(s.form.on=null),0==s.form.status&&(s.form.timeZone=null),{schedule:s.form}},reset(){s.form={...l}}}))).value,c=u},91592:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(75836),a=n(7460),o=n.n(a),i=n(24248),l=n(52329);const s=(0,r.cB)({form:{},sortList:[]});function u(){function e(){const e={},n=(0,i.c)().getSort();return s.sortList.forEach((r=>{let a="fa-light fa-do-not-enter";s.form[r.id]===l.CO&&(a="fas fa-sort-amount-up"),s.form[r.id]===l.m_&&(a="fas fa-sort-amount-down");const i=t().find((e=>e.id===e.id));i&&(e[r.id]={value:n[o().snakeCase(r.id)]||l.kP,type:"select",props:{label:r.title,icon:a,options:[{label:"Ascending",value:l.CO},{label:"Descending",value:l.m_},{label:"Not Set",value:l.kP}]}})})),e}function t(){return s.sortList}function n(e){s.sortList=e}function r(){return s.form}function a(e){s.form=e}function u(){Object.entries(s.form).forEach((([e,t])=>{const n=s.sortList.some((t=>t.field===e));n||delete s.form[e]}))}function c(){d();const e=o().mapKeys(s.form,((e,t)=>o().camelCase(t)))||{};return{sort:e}}function d(){Object.entries(s.form).forEach((([e,t])=>{s.form[e]===l.kP&&delete s.form[e]}))}function m(){this.form={},s.sortList=[]}return{factoryOfDynamicSelect:e,removeObjectIdentifiers:u,getForm:r,payloadSort:c,setSortList:n,getSortList:t,reset:m,setForm:a}}},89632:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(75836),a=n(20584);const o={contractName:null,customer:{customerName:null},contractStatus:{statusName:null},costCenter:{name:null},workdayId:null,worktag:null},i=(0,r.cB)({visibleContract:!1,modalProps:{},basicDataContract:{...o},modalLoadingContract:!1,contractLineList:[],contractId:null});function l(){function e(){i.visibleContract=!1}function t(){i.visibleContract=!0}function n(){return i.visibleContract}function r(e){i.visibleContract=e}function l(e){i.modalProps=e}function s(){return i.modalProps}function u(e){p(),a.c.show("apiRoutes.qsetupagione.contracts",e,{refresh:!0,params:{include:"contractLines,contractType,contractStatus,costCenter"}}).then((e=>{c(e.data),f()})).catch((e=>{f(),console.log(e)}))}function c(e){i.basicDataContract=e,i.basicDataContract.customer=e.customer?e.customer:o.customer,i.basicDataContract.contractStatus=e.contractStatus?e.contractStatus:o.contractStatus,i.basicDataContract.costCenter=e.costCenter?e.costCenter:o.costCenter,g(e.contractLines||[])}function d(){return i.basicDataContract}function m(){return i.modalLoadingContract}function f(){i.modalLoadingContract=!1}function p(){i.modalLoadingContract=!0}function h(){i.basicDataContract={...o}}function g(e){i.contractLineList=e}function y(){return i.contractLineList}function b(){return i.contractId}function v(e){i.contractId=e}return{hideVisibleContract:e,showVisibleContract:t,getVisibleContract:n,setVisibleContract:r,getModalProps:s,setModalProps:l,getBasicDataContract:d,showBasicDataContract:u,hideModalLoadingContract:f,showModalLoadingContract:p,getModalLoadingContract:m,setBasicDataContract:c,resetBasicDataContract:h,setContractLineList:g,getContractLineList:y,getContractId:b,setContractId:v}}},38688:(e,t,n)=>{"use strict";n.d(t,{c:()=>m});n(23816);var r=n(80472);class a{getMenu(e,t){const n=[];if(e&&t)return e.map((e=>{let r=t.find((({id:t})=>t==e.pageId));n.push({id:e.id,parentId:e.parentId,title:e.title,icon:e.icon,name:r?r.options.name:null,permission:r?r.options.permission:null,activated:!!parseInt(e.status)&&(!r||r.status)})})),r.c.builTree(n)}}const o=new a,i=o;var l=n(27730),s=n(73376);class u{constructor(){this.sidebar={},this.modules=l.c.modules,this.pages=s.c,this.addDefaultItems(),"iadmin"==l.c.mode&&this.loadModulesSidebar({name:"adminSidebar"}),"ipanel"==l.c.mode&&this.loadModulesSidebar({name:"panelSidebar"}),this.orderSidebar()}addDefaultItems(){this.pages.mainapp&&(this.sidebar["app"]=this.pages.mainapp.home||{})}loadModulesSidebar(e={}){this.modules.forEach((t=>{let r=!1;try{r=n(33848)(`./${t}/_config/${e.name}`).default}catch(a){}r&&r.length&&r.forEach(((e,n)=>{this.sidebar[`${t}${n?n+1:""}`]=e}))}));let t=!1;try{t=n(26160)(`./${e.name}`).default}catch(r){}t&&t.length&&t.forEach(((e,t)=>{this.sidebar[`${name}${t?t+1:""}`]=e}))}orderSidebar(){let e={},t={};Object.keys(this.sidebar).forEach((n=>{let r=this.sidebar[n];"app.home"==r.name||r.children?e[n]=r:t[n]=r})),this.sidebar={...e,...t}}}const c=new u,d=(c.sidebar,Object.values(c.sidebar)),m={created(){this.menu=i.getMenu(this.$clone(this.$store.getters["qsiteApp/getMenu"]),this.$clone(this.$store.state.qsiteApp.pages))},data(){return{menu:[],menuTranslatable:!1,menuLocal:d}},computed:{menuSelect(){return this.menuTranslatable=!0,this.menuTranslatable?this.menuLocal:this.menu}}}},99076:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});const r=[{label:"slate-50",value:"slate-50"},{label:"slate-100",value:"slate-100"},{label:"slate-200",value:"slate-200"},{label:"slate-300",value:"slate-300"},{label:"slate-400",value:"slate-400"},{label:"slate-500",value:"slate-500"},{label:"slate-600",value:"slate-600"},{label:"slate-700",value:"slate-700"},{label:"slate-800",value:"slate-800"},{label:"slate-900",value:"slate-900"},{label:"teal-100",value:"teal-100"},{label:"teal-200",value:"teal-200"},{label:"teal-300",value:"teal-300"},{label:"teal-400",value:"teal-400"},{label:"teal-500",value:"teal-500"},{label:"teal-600",value:"teal-600"},{label:"teal-700",value:"teal-700"},{label:"teal-800",value:"teal-800"},{label:"teal-900",value:"teal-900"},{label:"lime-50",value:"lime-50"},{label:"lime-100",value:"lime-100"},{label:"lime-200",value:"lime-200"},{label:"lime-300",value:"lime-300"},{label:"lime-400",value:"lime-400"},{label:"lime-500",value:"lime-500"},{label:"lime-600",value:"lime-600"},{label:"lime-700",value:"lime-700"},{label:"lime-800",value:"lime-800"},{label:"lime-900",value:"lime-900"},{label:"cyan-50",value:"cyan-50"},{label:"cyan-100",value:"cyan-100"},{label:"cyan-200",value:"cyan-200"},{label:"cyan-300",value:"cyan-300"},{label:"cyan-400",value:"cyan-400"},{label:"cyan-500",value:"cyan-500"},{label:"cyan-600",value:"cyan-600"},{label:"cyan-700",value:"cyan-700"},{label:"cyan-800",value:"cyan-800"},{label:"cyan-900",value:"cyan-900"},{label:"orange-50",value:"orange-50"},{label:"orange-100",value:"orange-100"},{label:"orange-200",value:"orange-200"},{label:"orange-300",value:"orange-300"},{label:"orange-400",value:"orange-400"},{label:"orange-500",value:"orange-500"},{label:"orange-600",value:"orange-600"},{label:"orange-700",value:"orange-700"},{label:"orange-800",value:"orange-800"},{label:"orange-900",value:"orange-900"},{label:"gray-50",value:"gray-50"},{label:"gray-100",value:"gray-100"},{label:"gray-200",value:"gray-200"},{label:"gray-300",value:"gray-300"},{label:"gray-400",value:"gray-400"},{label:"gray-500",value:"gray-500"},{label:"gray-600",value:"gray-600"},{label:"gray-700",value:"gray-700"},{label:"gray-800",value:"gray-800"},{label:"gray-900",value:"gray-900"},{label:"red-50",value:"red-50"},{label:"red-100",value:"red-100"},{label:"red-200",value:"red-200"},{label:"red-300",value:"red-300"},{label:"red-400",value:"red-400"},{label:"red-500",value:"red-500"},{label:"red-600",value:"red-600"},{label:"red-700",value:"red-700"},{label:"red-800",value:"red-800"},{label:"red-900",value:"red-900"},{label:"yellow-50",value:"yellow-50"},{label:"yellow-100",value:"yellow-100"},{label:"yellow-200",value:"yellow-200"},{label:"yellow-300",value:"yellow-300"},{label:"yellow-400",value:"yellow-400"},{label:"yellow-500",value:"yellow-500"},{label:"yellow-600",value:"yellow-600"},{label:"yellow-700",value:"yellow-700"},{label:"yellow-800",value:"yellow-800"},{label:"yellow-900",value:"yellow-900"},{label:"green-50",value:"green-50"},{label:"green-100",value:"green-100"},{label:"green-200",value:"green-200"},{label:"green-300",value:"green-300"},{label:"green-400",value:"green-400"},{label:"green-500",value:"green-500"},{label:"green-600",value:"green-600"},{label:"green-700",value:"green-700"},{label:"green-800",value:"green-800"},{label:"green-900",value:"green-900"},{label:"blue-50",value:"blue-50"},{label:"blue-100",value:"blue-100"},{label:"blue-200",value:"blue-200"},{label:"blue-300",value:"blue-300"},{label:"blue-400",value:"blue-400"},{label:"blue-500",value:"blue-500"},{label:"blue-600",value:"blue-600"},{label:"blue-700",value:"blue-700"},{label:"blue-800",value:"blue-800"},{label:"blue-900",value:"blue-900"},{label:"indigo-50",value:"indigo-50"},{label:"indigo-100",value:"indigo-100"},{label:"indigo-200",value:"indigo-200"},{label:"indigo-300",value:"indigo-300"},{label:"indigo-400",value:"indigo-400"},{label:"indigo-500",value:"indigo-500"},{label:"indigo-600",value:"indigo-600"},{label:"indigo-700",value:"indigo-700"},{label:"indigo-800",value:"indigo-800"},{label:"indigo-900",value:"indigo-900"},{label:"purple-50",value:"purple-50"},{label:"purple-100",value:"purple-100"},{label:"purple-200",value:"purple-200"},{label:"purple-300",value:"purple-300"},{label:"purple-400",value:"purple-400"},{label:"purple-500",value:"purple-500"},{label:"purple-600",value:"purple-600"},{label:"purple-700",value:"purple-700"},{label:"purple-800",value:"purple-800"},{label:"purple-900",value:"purple-900"},{label:"pink-50",value:"pink-50"},{label:"pink-100",value:"pink-100"},{label:"pink-200",value:"pink-200"},{label:"pink-300",value:"pink-300"},{label:"pink-400",value:"pink-400"},{label:"pink-500",value:"pink-500"},{label:"pink-600",value:"pink-600"},{label:"pink-700",value:"pink-700"},{label:"pink-800",value:"pink-800"},{label:"pink-900",value:"pink-900"}]},8124:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(43704);function a(){var e=this.$route.meta&&this.$route.meta.title?this.$route.meta.title:"";this.$route.meta&&this.$route.meta.headerTitle&&(e=this.$route.meta.headerTitle);var t=this.$getSetting("core::site-name"),r=this.$getSetting("core::site-description"),a=this.$store.getters["qsiteApp/getSettingMediaByName"]("isite::favicon"),o=a.id?a.path:n(6324);return{title:"".concat(this.$tr(e)," | ").concat(t),meta:{description:{name:"description",content:r||t}},link:{icon:{rel:"icon",href:o}}}}const o=(0,r.c)(a)},62792:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(20584),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)};const o={getNotifications:function(e){return new Promise((function(t,n){r.c.index("apiRoutes.qnotification.notifications",e).then((function(e){t(e)})).catch((function(e){console.log(e),t(e)}))}))},getSources:function(){return new Promise((function(e,t){var n={refresh:!0,params:{filter:{allTranslations:!0,configNameByModule:"config.notificationSource"}}};r.c.index("apiRoutes.qsite.configs",n).then((function(t){for(var n=[],r=0,o=Object.entries(t.data);r<o.length;r++){var i=o[r],l=i[0],s=i[1];null!=s&&(n=a(a({},n),t.data[l]))}e(n)})).catch((function(t){console.log(t),e(t)}))}))},markAllAsRead:function(){return new Promise((function(e,t){r.c.put("apiRoutes.qnotification.markAllAsRead",{}).then((function(t){e(t)})).catch((function(t){console.log(t),e(t)}))}))},markAsRead:function(e){return new Promise((function(t,n){r.c.update("apiRoutes.qnotification.markRead",e,{}).then((function(e){t(!0)})).catch((function(e){console.log(e),t(e)}))}))}}},12836:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(75836),a=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},o=[{code:"",hours:""}],i=(0,r.cB)({form:{inboundCargoTotalUldsUnloaded:"",inboundCargoBulkUnloaded:"",outboundCargoTotalUldsLoaded:"",outboundCargoBulkLoaded:"",cargoTotalKilosLoaded:"",cargoTotalKilosUnloaded:""},delayList:a([],o,!0),delay:!1,ourDelay:null,delayComment:null});function l(){function e(){return i.form}function t(e){i.form.inboundCargoTotalUldsUnloaded=e["inboundCargoTotalUldsUnloaded"]?e["inboundCargoTotalUldsUnloaded"].toString():"",i.form.inboundCargoBulkUnloaded=e["inboundCargoBulkUnloaded"]?e["inboundCargoBulkUnloaded"].toString():"",i.form.outboundCargoTotalUldsLoaded=e["outboundCargoTotalUldsLoaded"]?e["outboundCargoTotalUldsLoaded"].toString():"",i.form.outboundCargoBulkLoaded=e["outboundCargoBulkLoaded"]?e["outboundCargoBulkLoaded"].toString():"",i.form.cargoTotalKilosLoaded=e["cargoTotalKilosLoaded"]?e["cargoTotalKilosLoaded"].toString():"",i.form.cargoTotalKilosUnloaded=e["cargoTotalKilosUnloaded"]?e["cargoTotalKilosUnloaded"].toString():""}function n(){return i.delayList}function r(e){var t=[{code:"",hours:""}],n=e["delay"]||[];if(0!==n.length){var r=n.length>0;l(r),i.delayList=r?n:a([],t,!0)}else i.delayList=a([],t,!0)}function o(){return i.delay}function l(e){i.delay=e}function s(){return i.ourDelay}function u(e){i.ourDelay=e}function c(){return i.delayComment}function d(e){i.delayComment=e}function m(){var e=i.delay?i.delayList.filter((function(e){return e.code&&e.hours})):[];return{delay:e,cargo:i.form,ourDelay:i.ourDelay,delayComment:i.delayComment}}function f(){i.form={inboundCargoTotalUldsUnloaded:"",inboundCargoBulkUnloaded:"",outboundCargoTotalUldsLoaded:"",outboundCargoBulkLoaded:"",cargoTotalKilosLoaded:"",cargoTotalKilosUnloaded:""};var e=[{code:"",hours:""}];i.delayList=a([],e,!0),i.delay=!1,i.ourDelay=null,i.delayComment=null}return{getForm:e,setForm:t,getDelayList:n,setDelayList:r,getDelay:o,setDelay:l,reset:f,payload:m,getOurDelay:s,setOurDelay:u,getDelayComment:c,setDelayComment:d}}},76719:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(75836),a=(0,r.cB)({form:{remark:"",safetyMessage:""}});function o(){function e(){return a.form}function t(e){a.form.remark=e["remark"]?e["remark"].toString():"",a.form.safetyMessage=e["safetyMessage"]?e["safetyMessage"].toString():""}function n(){a.form={remark:"",safetyMessage:""}}return{getForm:e,setForm:t,reset:n}}},45448:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y,getCards:()=>g,getColumns:()=>h});var r=n(34e3),a=n(49456),o=n.n(a),i=n(19628),l=n(66740),s=n(72204),u=n(90172),c=n(20240),d=n(30152),m=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},p=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function h(){return m(this,void 0,Promise,(function(){var e,t,n,a,i,l,c,d;return f(this,(function(m){try{return e=u.c[0].value,t=r.c.scheduleType===e,n=1,a=7,i=t?a:n,l=t?"week":"day",c="YYYY/MM/DD",d=o()(s.c.selectedDate,c).startOf(l),[2,p([],Array(i),!0).map((function(e,t){return{date:o()(d).add(t,"days"),cards:[],page:1,loading:!1,total:0,isDrag:!1,completed:0,uncompleted:0}}))]}catch(f){return console.log(f),[2,[]]}return[2]}))}))}function g(e){return void 0===e&&(e=!1),m(this,void 0,Promise,(function(){var t,n=this;return f(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Promise.all(r.c.columns.map((function(t){return m(n,void 0,void 0,(function(){var n,r,a,o,u,c,m;return f(this,(function(f){switch(f.label){case 0:t.loading=!0,n=t.date.startOf("day"),r=t.date.endOf("day"),a=s.c.filterTime,o={field:(0,d.c)().getIsPassenger()?"schedule_date_local":"schedule_date",type:"customRange",from:n.set({hour:a[0],minute:0,second:0}).format("YYYY-MM-DD HH:mm:ss"),to:r.set({hour:a[1],minute:59,second:59}).format("YYYY-MM-DD HH:mm:ss")},f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all([(0,i.c)(e,t.page,o),(0,l.c)(e,o)])];case 2:return u=f.sent(),c=u[0],m=u[1],t.cards=c.data,t.completed=m.data.completed,t.uncompleted=m.data.uncompleted,t.cards.forEach((function(e){e.editable=!1,e.loading=!1})),t.loading=!1,t.total=c.meta.page.total,[3,4];case 3:return f.sent(),t.loading=!1,[3,4];case 4:return[2]}}))}))})))];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),r.c.columns.forEach((function(e){return m(n,void 0,void 0,(function(){return f(this,(function(t){return e.loading=!1,[2]}))}))})),console.log(t),[3,3];case 3:return[2]}}))}))}function y(e){return void 0===e&&(e=!1),m(this,void 0,Promise,(function(){var t,n;return f(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),c.c.showInline=!1,r.c.loading=!0,t=r.c,[4,h()];case 1:return t.columns=a.sent(),s.c.stationId?[4,g(e)]:[2];case 2:return a.sent(),r.c.loading=!1,[3,4];case 3:return n=a.sent(),console.log(n),r.c.loading=!1,[3,4];case 4:return[2]}}))}))}},30244:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(49456),a=n.n(r),o=n(8932),i=n(72204),l=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function u(e){return l(this,void 0,Promise,(function(){var t,n,r,l;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t="apiRoutes.qramp.workOrders",[4,o.a4.getAllList(t)];case 1:return n=s.sent().data,r=null===n||void 0===n?void 0:n.filter((function(t){var n=t.scheduleDate||t.inboundScheduledArrival||t.outboundScheduledDeparture,r=a()(null===e||void 0===e?void 0:e.from).format("YYYY-MM-DD"),o=a()(n).format("YYYY-MM-DD"),l=Number(t.stationId),s=Number(i.c.payload.stationId);return r===o&&l===s})),[2,r];case 2:return l=s.sent(),console.log(l),[2,[]];case 3:return[2]}}))}))}},19628:(e,t,n)=>{"use strict";n.d(t,{c:()=>w});var r=n(72204),a=n(30152),o=n(86284),i=n(79212),l=n(7460),s=n.n(l),u=n(63696),c=n(30244),d=n(34e3),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},f=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function h(e,t){return f(this,void 0,Promise,(function(){var n,r,a,o;return p(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(0,c.c)(e)];case 1:return n=l.sent(),d.c.statusIdList=n.map((function(e){return e.statusId})),[4,(0,u.c)({data:n},null,t)];case 2:return r=l.sent(),a=s().orderBy(r.data,["scheduleDate"],["asc"]),[2,{data:a,meta:m({},i.c.meta)}];case 3:return o=l.sent(),console.log(o),[2,m({},i.c)];case 4:return[2]}}))}))}var g=n(20584),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},b=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function w(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=1),b(this,void 0,Promise,(function(){var l,s,u,c;return v(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),l=(0,a.c)().getIsPassenger(),s=l?o.GK:o.Ih,u={refresh:e,params:{take:15,page:t,filter:y(y({businessUnitId:s},r.c.payload),{withoutDefaultInclude:!0,date:n,order:{field:l?"schedule_date_local":"schedule_date",way:"asc"},type:[o.Qt]})}},d.c.isAppOffline?[4,h(n,t)]:[2,g.c.index("apiRoutes.qramp.workOrders",u)];case 1:return[2,m.sent()];case 2:return c=m.sent(),console.log(c),[2,y({},i.c)];case 3:return[2]}}))}))}},66740:(e,t,n)=>{"use strict";n.d(t,{c:()=>v});var r=n(72204),a=n(30152),o=n(79212),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};const l={data:{completed:0,uncompleted:0},meta:{page:i({},o.W)}};var s=n(86284),u=n(34e3),c=n(30244),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},m=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function p(e){return m(this,void 0,Promise,(function(){var t,n,r,a,o,i,m,p;return f(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),t=[],u.c.statusIdList?[3,2]:[4,(0,c.c)(e)];case 1:n=f.sent(),n.map((function(e){return t.push(e.statusId)})),f.label=2;case 2:return r=u.c.statusIdList?u.c.statusIdList:t,a=null===r||void 0===r?void 0:r.filter((function(e){var t=[s._G,s.kz];return t.includes(e)})),o=(null===r||void 0===r?void 0:r.length)||0,i=(null===a||void 0===a?void 0:a.length)||0,m=o-i,u.c.statusIdList=null,[2,d(d({},l),{data:{completed:m,uncompleted:i}})];case 3:return p=f.sent(),console.error(p),[2,d({},l)];case 4:return[2]}}))}))}var h=n(20584),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},y=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},b=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function v(e,t){return void 0===e&&(e=!1),y(this,void 0,Promise,(function(){var n,o,i;return b(this,(function(c){try{return n=(0,a.c)().getIsPassenger(),o=n?s.GK:s.Ih,i={refresh:e,params:{filter:g(g({businessUnitId:o},r.c.payload),{date:t,withoutDefaultInclude:!0,order:{field:(0,a.c)().getIsPassenger()?"schedule_date_local":"schedule_date",way:"asc"}})}},u.c.isAppOffline?[2,p(t)]:[2,h.c.index("apiRoutes.qramp.workOrdersStatistics",i)]}catch(d){return console.log(d),[2,g({},l)]}return[2]}))}))}},79212:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,c:()=>o});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a={total:0,HasNextPage:!1,HasPreviousPage:!1,currentPage:0,perPage:0};const o={data:[],meta:{page:r({},a)}}},14868:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=[{label:"All Day",value:"0-23"},{label:"00:00 am - 03:00 am",value:"0-2"},{label:"03:00 am - 07:00 am",value:"3-6"},{label:"07:00 am - 10:00 am",value:"7-9"},{label:"10:00 am - 01:00 pm",value:"10-12"},{label:"01:00pm - 04:00 pm",value:"13-15"},{label:"04:00 pm - 07:00 pm",value:"16-18"},{label:"07:00 pm - 10:00 pm",value:"19-21"},{label:"10:00 pm - 12:00 am",value:"22-23"}];const a=r},90172:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(8932);const a=[{id:2,label:r._s.tr("isite.cms.label.week"),value:"week-agenda",icon:"fa-light fa-calendar-lines"},{id:3,label:r._s.tr("isite.cms.label.day"),value:"day-agenda",icon:"fa-light fa-calendar-check"}]},72204:(e,t,n)=>{"use strict";n.d(t,{c:()=>g});var r=n(75836),a=n(92444),o=n(14868),i=n(90172),l=n(34e3),s=n(36852),u=n(8932);function c(){return(0,a.S6)((function(){return{time:{value:null,type:"select",props:{label:"Filter by time",format24h:!0,options:o.c,alphabeticalSort:!1,readonly:l.c.isAppOffline}},customerId:{value:null,type:"select",quickFilter:!0,loadOptions:{apiRoute:"apiRoutes.qramp.setupCustomers",select:{label:"customerName",id:"id"},requestParams:{filter:{companyId:l.c.filterCompany}}},props:{label:"Customer",clearable:!0}},carrierId:{value:null,type:"select",loadOptions:{apiRoute:"apiRoutes.qsetupagione.airlines",select:{label:"airlineName",id:"id"},requestParams:{}},props:{label:"Carrier",clearable:!0,readonly:l.c.isAppOffline}},stationId:{value:null,type:"select",props:{label:"Station",options:(0,s["default"])().getStationList().map((function(e){return{label:e.fullName,value:e.id}}))}},statusId:{value:null,type:"select",loadOptions:{apiRoute:"apiRoutes.qramp.workOrderStatuses",select:{label:"statusName",id:"id"},requestParams:{filter:{companyId:l.c.filterCompany}}},props:{label:"Status",clearable:!0,readonly:l.c.isAppOffline}},adHoc:{value:null,type:"select",props:{label:"Ad Hoc",clearable:!0,readonly:l.c.isAppOffline,options:[{label:u._s.tr("isite.cms.label.yes"),value:!0},{label:u._s.tr("isite.cms.label.no"),value:!1}]}},flightStatusId:{value:null,type:"select",loadOptions:{apiRoute:"apiRoutes.qfly.flightStatuses",select:{label:"name",id:"id"},requestParams:{filter:{companyId:l.c.filterCompany}}},props:{label:"Flight Status",clearable:!0,readonly:l.c.isAppOffline}},areaId:{value:null,type:"select",loadOptions:{apiRoute:"apiRoutes.qsetupagione.areas",select:{label:"name",id:"id"},requestParams:{filter:{companyId:l.c.filterCompany}}},props:{label:"Areas",clearable:!0,readonly:l.c.isAppOffline}},customerId:{value:null,type:"select",quickFilter:!0,loadOptions:{apiRoute:"apiRoutes.qramp.setupCustomers",select:{label:"customerName",id:"id"},requestParams:{filter:{companyId:l.c.filterCompany}}},props:{label:"Customer",clearable:!0}},type:{value:null},dateStart:{value:null},dateEnd:{value:null}}}))}var d=n(49456),m=n.n(d),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},p=(0,r.cB)({showModal:!1,titleModal:"",filters:c(),form:{time:"0-23"},loading:!1,updateModal:!1,scheduleType:i.c[1].value,selectedDate:m()().format("YYYY/MM/DD"),startDateTime:"",endDateTime:"",fullDay:o.c[0].value,stationId:null,showModalStation:!1,titleFilter:""}),h=(0,a.S6)((function(){return{get showModal(){return p.showModal},set showModal(e){p.showModal=e},get titleModal(){return p.titleModal},set titleModal(e){p.titleModal=e},get loading(){return p.loading},set loading(e){p.loading=e},get filters(){return p.filters},set filters(e){p.filters=f({},e)},get titleFilter(){return p.titleFilter},set titleFilter(e){p.titleFilter=e},get form(){return p.form},set form(e){p.form=f({},e)},get scheduleType(){return p.scheduleType},set scheduleType(e){p.scheduleType=e},get selectedDate(){return p.selectedDate},set selectedDate(e){p.selectedDate=e},get startDateTime(){return p.startDateTime},set startDateTime(e){p.startDateTime=e},get endDateTime(){return p.endDateTime},set endDateTime(e){p.endDateTime=e},get stationId(){return p.stationId},set stationId(e){p.stationId=e},get showModalStation(){return p.showModalStation},set showModalStation(e){p.showModalStation=e},get filterTime(){if(null!==p.form.time){var e="0-23";l.c.isAppOffline&&(p.form.time=e);var t=p.form.time.split("-")||[0,0];return t}return p.fullDay.split("-")},get payload(){var e=f({},p.form);return delete e.time,delete e.scheduleType,Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),e},reset:function(){p.showModal=!1}}})).value;const g=h},34e3:(e,t,n)=>{"use strict";n.d(t,{c:()=>m});var r=n(75836),a=n(92444),o=n(49456),i=n.n(o),l=n(86284),s=n(30152),u=(0,r.cB)({selectedDate:i()().format("YYYY/MM/DD"),scheduleType:"week-agenda",isDraggingCard:!1,columns:[],statusIdList:[],loading:!1,dragDate:"",isBlank:!1,isAppOffline:!1}),c=(0,a.S6)((function(){return(0,s.c)().getIsPassenger()})),d=(0,a.S6)((function(){return{get scheduleType(){return u.scheduleType},set scheduleType(e){u.scheduleType=e},get isDraggingCard(){return u.isDraggingCard},set isDraggingCard(e){u.isDraggingCard=e},get columns(){return u.columns},set columns(e){u.columns=e},get statusIdList(){return u.statusIdList},set statusIdList(e){u.statusIdList=e},get loading(){return u.loading},set loading(e){u.loading=e},get dragDate(){return u.dragDate},set dragDate(e){u.dragDate=e},get isBlank(){return u.isBlank},set isBlank(e){u.isBlank=e},get isAppOffline(){return u.isAppOffline},set isAppOffline(e){u.isAppOffline=e},get filterCompany(){return c.value?l.mI:l.wz}}})).value;const m=d},20240:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r=n(49456),a=n.n(r),o=n(75836),i=n(92444),l=(0,o.cB)({showModal:!1,showInline:!1,titleModal:"",loading:!1,form:{},seletedDateColumn:null,isEdit:!1,stationId:null,showModalComments:!1});function s(e){var t={};return e.id&&(t.id=e.id),t.sta=e.inboundScheduledArrival?a()(e.inboundScheduledArrival).format("HH:mm"):null,t.outboundScheduledDeparture=e.outboundScheduledDeparture?a()(e.outboundScheduledDeparture).format("MM/DD/YYYY HH:mm"):null,t.inboundFlightNumber=e.inboundFlightNumber,t.preFlightNumber=e.inboundFlightNumber,t.stationId=e.stationId,t.gateId=e.gateId,t.operationTypeId=e.operationTypeId,t.std=e.std,t.flightStatusId=e.flightStatusId,t.acTypeId=e.acTypeId,t.inboundScheduledArrival=e.inboundScheduledArrival,t.statusId=e.statusId,t}var u=(0,i.S6)((function(){return{get showModal(){return l.showModal},set showModal(e){l.showModal=e},get showInline(){return l.showInline},set showInline(e){l.showInline=e},get showModalComments(){return l.showModalComments},set showModalComments(e){l.showModalComments=e},get titleModal(){return l.titleModal},set titleModal(e){l.titleModal=e},get loading(){return l.loading},set loading(e){l.loading=e},get stationId(){return l.stationId},set stationId(e){l.stationId=e},get form(){return l.form},set form(e){l.form=s(e)},get seletedDateColumn(){return l.seletedDateColumn},set seletedDateColumn(e){l.seletedDateColumn=e},get isEdit(){return l.isEdit},set isEdit(e){l.isEdit=e},reset:function(){l.form={},l.showModal=!1}}})).value;const c=u},60368:(e,t,n)=>{"use strict";function r(e,t){for(var n=0,a=e;n<a.length;n++){var o=a[n],i=o.dynamicField||[],l=i.find((function(e){return e.id===t}));if(l)return l.title;if(o.lists&&o.lists.length>0){var s=r(o.lists,t);if(s)return s}}return null}n.d(t,{c:()=>r})},6472:(e,t,n)=>{"use strict";n.d(t,{c:()=>q});var r=n(92444),a=n(74044);const o=e=>((0,r.ED)("data-v-3b48bfc1"),e=e(),(0,r.ii)(),e),i={id:"cargoContainer",class:"tw-mb-20"},l={class:"tw-grid tw-gap-10 tw-grid-cols-1 lg:tw-grid-cols-2 tw-p-4 md:tw-p-10"},s={class:""},u=o((()=>(0,r.QD)("div",{class:"text-primary tw-rounded-t-md tw-text-base boundColor tw-p-2 text-center text-weight-bold"},[(0,r.QD)("div",null,"Inbound")],-1))),c={class:"q-pa-md"},d={id:"labelInput",class:"row items-center justify-end no-wrap"},m={key:0,class:"text-primary text-right md:tw-text-base span q-mr-sm col-5"},f={key:0},p={key:0,class:"label-container"},h={class:""},g=o((()=>(0,r.QD)("div",{class:"text-primary tw-rounded-t-md tw-text-base boundColor tw-p-2 text-center text-weight-bold"},[(0,r.QD)("div",null,"Outbound")],-1))),y={class:"q-pa-md"},b={id:"labelInput",class:"row items-center justify-end no-wrap"},v={key:0,class:"text-primary text-right md:tw-text-base span q-mr-sm col-5"},w={key:0},I={key:0,class:"label-container"};function D(e,t,n,o,D,k){const M=(0,r.E1)("dynamic-field"),A=(0,r.E1)("delayComponent");return(0,r.Wz)(),(0,r.An)("div",i,[(0,r.QD)("div",l,[(0,r.QD)("div",s,[(0,r.QD)("div",{class:(0,a.WN)(""+(n.readonly?"":"card-bound"))},[u,(0,r.QD)("div",c,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(k.formFields.inbound,((e,t)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:t},[(0,r.QD)("label",d,[e.props.vIf?((0,r.Wz)(),(0,r.An)("p",m,[(0,r.QD)("span",null,(0,a.WA)(e.label),1),n.readonly?((0,r.Wz)(),(0,r.An)("span",f,":")):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.K2)(M,{class:"col-7",field:e,modelValue:k.form[e.name||t],"onUpdate:modelValue":n=>k.form[e.name||t]=n},null,8,["field","modelValue","onUpdate:modelValue"])]),n.readonly?((0,r.Wz)(),(0,r.An)("hr",p)):(0,r.g1)("",!0)],64)))),128))])],2)]),(0,r.QD)("div",h,[(0,r.QD)("div",{class:(0,a.WN)(""+(n.readonly?"":"card-bound"))},[g,(0,r.QD)("div",y,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(k.formFields.outbound,((e,t)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:t},[(0,r.QD)("label",b,[e.props.vIf?((0,r.Wz)(),(0,r.An)("p",v,[(0,r.mY)((0,a.WA)(e.label)+" ",1),n.readonly?((0,r.Wz)(),(0,r.An)("span",w,":")):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.K2)(M,{class:"col-7",field:e,modelValue:k.form[e.name||t],"onUpdate:modelValue":n=>k.form[e.name||t]=n},null,8,["field","modelValue","onUpdate:modelValue"])]),n.readonly?((0,r.Wz)(),(0,r.An)("hr",I)):(0,r.g1)("",!0)],64)))),128))])],2)])]),(0,r.K2)(A)])}var k=n(42648),M=n(30152),A=n(12836),x=n(86284),T=n(62520);const N={components:{delayComponent:T.c},props:{readonly:!0},mixins:[k.c],data(){return{codeList:[]}},computed:{isPassenger(){return(0,M.c)().getIsPassenger()},filterBusinessUnit(){return this.isPassenger?x.GK:x.Ih},filterCompany(){return this.isPassenger?x.mI:x.wz},disabledReadonly(){return(0,M.c)().disabledReadonly()},form(){return(0,A.c)().getForm()},showKilosFiels(){const e=this.$getSetting("setup::contractsWithKilosFiels");return e.some((e=>e===(0,M.c)().getContractId()))},formFields(){return{inbound:{inboundCargoTotalUldsUnloaded:{value:"",type:"inputStandard",props:{vIf:!0,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.TotalUldsUnloaded")}`},inboundCargoBulkUnloaded:{value:"",type:"inputStandard",props:{vIf:!0,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.BulkUnloaded")}`},cargoTotalKilosUnloaded:{value:"",type:"inputStandard",props:{vIf:this.showKilosFiels,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.cargoTotalKilosUnloaded")}`}},outbound:{outboundCargoTotalUldsLoaded:{value:"",type:"inputStandard",props:{vIf:!0,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.TotalUldsLoaded")}`},outboundCargoBulkLoaded:{value:"",type:"inputStandard",props:{vIf:!0,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.BulkLoaded")}`},cargoTotalKilosLoaded:{value:"",type:"inputStandard",props:{vIf:this.showKilosFiels,mask:"###################",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly},label:`${this.$tr("ifly.cms.form.cargoTotalKilosLoaded")}`}}}}}};var S=n(68716);const C=(0,S.c)(N,[["render",D],["__scopeId","data-v-3b48bfc1"]]),z=C;var O=n(75836),$=n(2832),Q=n(7460),L=n.n(Q),E=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},F=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Y=[{id:4,title:"Cargo",component:z}],j=(0,O.cB)({serviceList:[],loading:!1,favouriteList:[],showFavourite:!1,errorList:[]});function q(){function e(){return E(this,void 0,Promise,(function(){var e,n,r;return F(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),(0,M.c)().getIsPassenger(),[4,(0,$.aE)()];case 1:return e=a.sent().filter((function(e){return 4!==e.id})),n=W(W([],e,!0),Y,!0).filter((function(e){return(0,M.c)().getIsPassenger()?4!==e.id:e})),t(n),[3,3];case 2:return r=a.sent(),console.log(r),[3,3];case 3:return[2]}}))}))}function t(e){j.serviceList=e}function n(){return j.serviceList}function a(){return j.favouriteList}function o(e){j.favouriteList=j.favouriteList.filter((function(t){return t.id!==e.id}))}function i(e){j.favouriteList.push(e)}function l(e){j.favouriteList=e}function s(){return j.showFavourite}function u(e){j.showFavourite=e}function c(e){j.errorList=e}function d(){return j.errorList}function m(e){j.loading=e}function f(){return j.loading}function p(){t([])}function h(e){return void 0===e&&(e=!1),E(this,void 0,Promise,(function(){var t;return F(this,(function(n){switch(n.label){case 0:return t=j.serviceList.filter((function(e){return 4!==e.id})),[4,y(t,e)];case 1:return[2,n.sent()]}}))}))}function g(e){var t=[];return e.forEach((function(e){var n=L().cloneDeep(e);n.dynamicField&&t.push(n),n.lists&&n.lists.forEach((function(e){var n=g([e]);t.push.apply(t,n)}))})),t}function y(e,t){return void 0===t&&(t=!1),E(this,void 0,Promise,(function(){var n,r,a=this;return F(this,(function(o){try{return n=[],r=g(e),r.forEach((function(e){return E(a,void 0,void 0,(function(){var r;return F(this,(function(a){switch(a.label){case 0:return[4,(0,$.gL)(e.dynamicField||[],t)];case 1:return r=a.sent(),[4,n.push.apply(n,r)];case 2:return a.sent(),[2]}}))}))})),[2,n]}catch(i){console.log(i)}return[2]}))}))}function b(e){return void 0===e&&(e=!1),E(this,void 0,Promise,(function(){var t;return F(this,(function(r){switch(r.label){case 0:return t=n(),[4,y(t,e)];case 1:return[2,r.sent()]}}))}))}function v(){return E(this,void 0,Promise,(function(){var t=this;return F(this,(function(n){return(0,r.o$)((function(){return E(t,void 0,void 0,(function(){return F(this,(function(t){switch(t.label){case 0:return m(!0),[4,e()];case 1:return t.sent(),m(!1),[2]}}))}))})),[2]}))}))}function w(){return E(this,void 0,Promise,(function(){var e;return F(this,(function(t){switch(t.label){case 0:return[4,h(!0)];case 1:return e=t.sent(),e=e.filter((function(e){return(2==e.product_type||3==e.product_type)&&e.work_order_item_attributes.some((function(e){return null===e.value||void 0===e.value}))})),c(e),[2,e]}}))}))}return{getServiceData:e,setServiceList:t,getServiceList:n,setLoading:m,getLoading:f,resetStore:p,init:v,getServiceListSelected:h,orderServicesWithTheStructureToSave:y,getServiceItems:b,getFavouriteList:a,setFavouriteList:l,removeFromFavouriteList:o,pustFavouriteList:i,getShowFavourite:s,setShowFavourite:u,filterServicesListByQuantity:w,setErrorList:c,getErrorList:d}}},2832:(e,t,n)=>{"use strict";n.d(t,{aE:()=>h,gL:()=>v});var r=n(20584),a=n(30152),o=n(86284),i=n(80472),l=n(8932),s=n(7460),u=n.n(s),c=n(6472),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},m=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},p=function(){return m(void 0,void 0,Promise,(function(){var e,t,n,i,s;return f(this,(function(u){switch(u.label){case 0:if(!l.is.hasAccess("ramp.categories.index"))return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),e=(0,a.c)().getIsPassenger(),t=e?o.mI:o.wz,n={params:{include:"products,products.attributes,products,products.attributes.values",filter:{companyId:t}}},[4,r.c.index("apiRoutes.qramp.categories",n)];case 2:return i=u.sent(),[2,i.data];case 3:return s=u.sent(),console.log(s),[2,[]];case 4:return[3,6];case 5:return[2,[]];case 6:return[2]}}))}))};function h(){return m(this,void 0,Promise,(function(){var e,t,n,r,o;return f(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,p()];case 1:return e=l.sent(),t=e.length>0?i.c.tree(e):[],n=function(e){var t={dynamicField:g(e.products)};t=0===t.dynamicField.length?{}:t;var r=[];return e.children&&e.children.length>0&&(r=e.children.map((function(e){return n(e)}))),d(d({id:e.id,title:e.name},t),{lists:r})},r=t.filter((function(e){var t=e.types||[];return t.includes(String((0,a.c)().getTypeWorkOrder()))})).map(n),[2,r];case 2:return o=l.sent(),console.log(o),[2,[]];case 3:return[2]}}))}))}var g=function(e){try{var t=[],n={icon:"fa-solid fa-gear"},r=w(e);return null===r||void 0===r||r.forEach((function(e){var r=(0,c.c)().getFavouriteList().find((function(t){return t.id==e.id})),a=e.externalId?"".concat(e.name," (").concat(e.externalId,")"):e.name;n.id=e.id,n.categoryId=e.categoryId,n.title=a,n.helpText=e.helpText,n.formField=y(e),n.favourite=!!r,n.productType=e.type,t.push(d({},n))})),t}catch(a){console.log(a)}};function y(e){var t;try{for(var n=e.type||null,r=e.attributes||[],a=(null===(t=e.options)||void 0===t?void 0:t.attributes)||[],o={},i=a.length>0?u().sortBy(r,(function(e){return a.indexOf(String(e.id))})):r,l=0;l<i.length;l++){var s=i[l],c=b(s.type,s.name,s.values,n,l),m="".concat(s.type).concat(s.name?s.name:""),f="quantityFloat"===s.type?"quantity":s.type,p=s.value?"checkbox"===s.type?Number(s.value):s.value:"checkbox"===s.type?0:null;o[m]={name:s.name,value:p,type:f,id:s.id,props:d({},c)}}return o}catch(h){console.log(h)}}function b(e,t,n,r,o){var i=(0,a.c)().disabledReadonly();return"quantity"==e||"quantityFloat"==e?{label:t,readonly:i,type:"number",step:"0.1",mask:"###################"}:"select"==e?{readonly:i,label:t,options:n.map((function(e){return e.label=e.name,e})),type:e}:"fullDate"==e?{readonly:i,label:t,hint:"Format: MM/DD/YYYY HH:mm",mask:"MM/DD/YYYY HH:mm","place-holder":"MM/DD/YYYY HH:mm",format24h:!0}:{type:e,readonly:i,label:t}}function v(e,t){void 0===t&&(t=!0);try{var n=e.filter((function(e){for(var t in e.formField)if(e.formField[t].value)return!0;return!1}));return k(n,t)||[]}catch(r){console.log(r)}}function w(e){var t=(0,a.c)().getWorkOrderItems();return(null===t||void 0===t?void 0:t.length)>0?null===e||void 0===e?void 0:e.map((function(e){return t.map((function(t){var n;return(null===t||void 0===t?void 0:t.productId)==(null===e||void 0===e?void 0:e.id)&&(null===(n=null===e||void 0===e?void 0:e.attributes)||void 0===n||n.map((function(e){return t.workOrderItemAttributes.map((function(t){if(t.attributeId==e.id)return e.value=t.value,t})),e}))),t})),e})):e}function I(e){try{var t=[];for(var n in e){var r=D(e,n);t.push(d({},r))}return t}catch(a){console.log(a)}}function D(e,t){var n="quantity"===e[t].type?e[t].value&&0!=e[t].value?Math.abs(e[t].value):null:e[t].value,r={name:e[t].name,value:n,type:e[t].type};return e[t].id&&e[t].attributeId&&(r=d({id:e[t].id,attribute_id:e[t].attributeId},r)),e[t].id&&!e[t].attributeId?r=d(d({},r),{attribute_id:e[t].id}):e[t].attributeId&&e[t].value&&(r=d(d({},r),{attribute_id:e[t].attributeId})),r}function k(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1);try{var n=[];return e.forEach((function(e){if(e.id||M(e.formField)){var r=t?{product_type:e.productType,name:e.title}:{};n.push(d(d({product_id:e.id},r),{work_order_item_attributes:I(e.formField)}))}})),n}catch(r){console.log(r)}}function M(e){try{var t=[];for(var n in e)return e[n].value&&""!=e[n].value;return t}catch(r){console.log(r)}}},36852:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(20584),a=n(75836),o=n(30152),i=n(86284),l=n(2832),s=n(47348),u=n(8932),c=n(6472),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},m=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},p=(0,a.cB)({operationTypeList:[],stationList:[],customerList:[],contractList:[],flightStatusesList:[],workOrderStatusesList:[],gatesList:[],customerWithContractList:[],airlinesList:[],actypesList:[],airportsList:[],workOrderDelays:[],responsibleList:[],workOrderList:{data:[],meta:{page:{total:0,hasNextPage:!1,hasPreviousPage:!1,currentPage:1,perPage:1}}}}),h=86400,g=30*h;function y(){var e=u.is.hasAccess;function t(){return p.customerWithContractList}function n(e){return p.customerWithContractList=e}function a(){return p.workOrderList}function h(e){p.workOrderList=e}function y(e){p.operationTypeList=e}function b(){return p.operationTypeList}function v(e){p.stationList=e}function w(){return p.stationList}function I(e){p.airlinesList=e}function D(){return p.airlinesList}function k(e){p.actypesList=e}function M(){return p.actypesList}function A(e){p.airportsList=e}function x(){return p.airportsList}function T(){return p.workOrderDelays}function N(e){p.workOrderDelays=e}function S(e){p.responsibleList=e}function C(){return p.responsibleList}function z(e){p.customerList=e}function O(){return p.customerList}function $(e){p.contractList=e}function Q(){return p.contractList}function L(e){p.flightStatusesList=e}function E(){return p.flightStatusesList}function F(e){p.workOrderStatusesList=e}function W(){return p.workOrderStatusesList}function Y(e){p.gatesList=e}function j(){return p.gatesList}function q(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c;return f(this,(function(m){switch(m.label){case 0:if(!e("ramp.operation-types.index"))return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,cacheTime:g,params:{filter:{companyId:a}}},[4,r.c.index("apiRoutes.qramp.operationTypes",l)];case 2:return s=m.sent(),u=s.data.map((function(e){return d(d({label:e.operationName},e),{value:e.id})})),y(u),[2,u];case 3:return c=m.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function R(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c,m;return f(this,(function(f){switch(f.label){case 0:if(!e("setup.stations.index"))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l=n?{companyId:a}:{companyId:a,allTranslations:!0},s={refresh:t,cacheTime:g,params:{filter:d({},l)}},[4,r.c.index("apiRoutes.qsetupagione.setupStations",s)];case 2:return u=f.sent(),c=u.data,v(c),[2,c];case 3:return m=f.sent(),console.log(m),[3,4];case 4:return[2]}}))}))}function P(t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("iflight.airline.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,params:{filter:{status:1,companyId:a,allTranslations:!0}}},[4,r.c.index("apiRoutes.qfly.airlines",l)];case 2:return s=d.sent(),u=s.data,I(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function U(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("setup.customers.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,{},l={refresh:t,cacheTime:g,params:{filter:{companyId:a}}},[4,r.c.index("apiRoutes.qramp.setupCustomers",l)];case 2:return s=d.sent(),u=s.data,z(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function V(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("iflight.flight-statuses.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,params:{filter:{companyId:a}}},[4,r.c.index("apiRoutes.qfly.flightStatuses",l)];case 2:return s=d.sent(),u=s.data,L(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function _(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c,m;return f(this,(function(f){switch(f.label){case 0:if(!e("ramp.work-order-statuses.index"))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l=n?{companyId:a}:{companyId:a,allTranslations:!0},s={refresh:t,cacheTime:g,params:{filter:d({},l)}},[4,r.c.index("apiRoutes.qramp.workOrderStatuses",s)];case 2:return u=f.sent(),c=u.data,F(c),[2,c];case 3:return m=f.sent(),console.log(m),[3,4];case 4:return[2]}}))}))}function B(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("setup.gates.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,cacheTime:g,params:{filter:{companyId:a}}},[4,r.c.index("apiRoutes.qsetupagione.gates",l)];case 2:return s=d.sent(),u=s.data,Y(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function K(t){return void 0===t&&(t=!1),m(this,void 0,Promise,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("ramp.work-orders.index")&&!e("ramp.passenger-work-orders.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.GK:i.Ih,l={refresh:t,cacheTime:g,params:{include:"responsible,workOrderItems,workOrderItems.workOrderItemAttributes",filter:{businessUnitId:a,date:{field:"created_at",type:"5daysAroundToday",from:null,to:null},order:{field:"id",way:"desc"},withoutDefaultInclude:!0},page:1}},[4,r.c.index("apiRoutes.qramp.workOrders",l,!0)];case 2:return s=d.sent(),u=s,h(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function H(t){var a=this;return void 0===t&&(t=!1),new Promise((function(l){return m(a,void 0,void 0,(function(){var a,u,c,m,p,h,g,y;return f(this,(function(f){switch(f.label){case 0:return e("setup.contracts.index")&&e("setup.customers.index")?(a=e("ramp.work-orders.see-contract-name")||!1,u=(0,o.c)().getIsPassenger(),c=u?i.mI:i.wz,m=u?{businessUnitId:i.GK}:{businessUnitId:i.Ih},p={refresh:t,params:{filter:{withoutContracts:!0,customerStatusId:1,companyId:c}}},h={params:{filter:d({contractStatusId:1},m)}},[4,Promise.all([r.c.index("apiRoutes.qramp.setupCustomers",p),r.c.index("apiRoutes.qramp.setupContracts",h)])]):[3,2];case 1:return g=f.sent(),y=(0,s.c)(g,a),n(y),[2,l(y)];case 2:l(),f.label=3;case 3:return[2]}}))}))}))}function G(t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("iflight.aircrafttype.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,params:{filter:{status:1,companyId:a,allTranslations:!0}}},[4,r.c.index("apiRoutes.qfly.aircraftTypes",l)];case 2:return s=d.sent(),u=s.data,k(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function Z(t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,a,l,s,u,c,d,m;return f(this,(function(f){switch(f.label){case 0:if(!e("setup.work-order-delays.index"))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),n="apiRoutes.qramp.workOrderDelays",a=(0,o.c)().getIsPassenger(),l=a?i.mI:i.wz,s={refresh:t,params:{filter:{companyId:l}}},[4,r.c.index(n,s)];case 2:return u=f.sent(),c=u.data||[],d=c.map((function(e){return{id:e.id,label:e.name,value:e.name}})),N(d),[3,4];case 3:return m=f.sent(),console.log(m),[3,4];case 4:return[2]}}))}))}function J(t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,a,l,s,u,c,d;return f(this,(function(m){switch(m.label){case 0:if(!e("ramp.work-orders.index")&&!e("ramp.passenger-work-orders.index"))return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),n="apiRoutes.quser.users",a=(0,o.c)().getIsPassenger(),l=a?i.mI:i.wz,s={refresh:t,params:{filter:{companyId:l}}},[4,r.c.index(n,s)];case 2:return u=m.sent(),c=u.data||[],S(c),[3,4];case 3:return d=m.sent(),console.log(d),[3,4];case 4:return[2]}}))}))}function X(t){return void 0===t&&(t=!1),m(this,void 0,void 0,(function(){var n,a,l,s,u,c;return f(this,(function(d){switch(d.label){case 0:if(!e("iflight.airport.index"))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),n=(0,o.c)().getIsPassenger(),a=n?i.mI:i.wz,l={refresh:t,params:{filter:{status:1,companyId:a,allTranslations:!0}}},[4,r.c.index("apiRoutes.qfly.airports",l)];case 2:return s=d.sent(),u=s.data,A(u),[2,u];case 3:return c=d.sent(),console.log(c),[3,4];case 4:return[2]}}))}))}function ee(e){return void 0===e&&(e=!1),m(this,void 0,void 0,(function(){var t,n,a;return f(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.c.index("apiRoutes.qsite.favourites",{refresh:e})];case 1:return t=o.sent(),n=t.data.map((function(e){return{favouriteId:e.id,id:e.favouritableId,favouritableType:e.favouritableType}})),(0,c.c)().setFavouriteList(n),[2,n];case 2:return a=o.sent(),console.log(a),[3,3];case 3:return[2]}}))}))}function te(e){return void 0===e&&(e=!1),m(this,void 0,Promise,(function(){return f(this,(function(t){return Promise.all([R(e),q(e),H(e),U(e),V(e),_(e),B(e),P(e),G(e),Z(e),J(e),X(e),(0,l.aE)()]),[2]}))}))}return{setOperationTypeList:y,getOperationTypeList:b,getOperationType:q,setStationList:v,getStationList:w,getStation:R,setCustomerList:z,getCustomerList:O,getCustomer:U,getAllList:te,setContractList:$,getContractList:Q,getFlightStatusesList:E,setFlightStatusesList:L,getWorkOrderStatusesList:W,setWorkOrderStatusesList:F,getWorkOrderStatuses:_,getGatesList:j,setGatesList:Y,getGates:B,getDataWorkOrderList:a,setDataWorkOrderList:h,getWorkOrders:K,getCustomerWithContract:H,getCustomerWithContractLists:t,setCustomerWithContractLists:n,setAirlinesList:I,getAirlinesList:D,setACTypesList:k,getACTypesList:M,setAirportsList:A,getAirportsList:x,setWorkOrderDelays:N,getWorkOrderDelays:T,setResponsible:S,getResponsible:C,getACTypes:G,getFavourites:ee}}},78176:(e,t,n)=>{"use strict";n.d(t,{c:()=>y});var r=n(92444),a=n(74044);const o={class:"box"};function i(e,t,n,i,l,s){const u=(0,r.E1)("q-item-label"),c=(0,r.E1)("file-list"),d=(0,r.E1)("q-item-section"),m=(0,r.E1)("q-item"),f=(0,r.E1)("q-list"),p=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(p,{modelValue:l.modal.show,"onUpdate:modelValue":t[0]||(t[0]=e=>l.modal.show=e),loading:l.modal.loading,title:l.modal.title,"custom-position":""},{default:(0,r.Ql)((()=>[(0,r.QD)("div",o,[(0,r.K2)(f,{separator:"",dense:""},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(l.modal.data,((e,t)=>((0,r.Wz)(),(0,r.Az)(m,{key:t,style:{padding:"8px 0"}},{default:(0,r.Ql)((()=>[(0,r.K2)(d,null,{default:(0,r.Ql)((()=>["media"!=e.fieldType?((0,r.Wz)(),(0,r.Az)(u,{key:0},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(e.label),1)])),_:2},1024)):(0,r.g1)("",!0),"media"==e.fieldType?((0,r.Wz)(),(0,r.Az)(u,{key:1},{default:(0,r.Ql)((()=>[(0,r.K2)(c,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"grid-col-class":"col-12","hide-header":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):((0,r.Wz)(),(0,r.Az)(u,{key:2,caption:"",innerHTML:e.value},null,8,["innerHTML"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])),_:1},8,["modelValue","loading","title"])}n(23816);var l=n(98724);const s={components:{fileList:l.c},data(){return{modal:{loading:!1,show:!1,title:null,data:[]}}},computed:{},methods:{async showBidData(e){this.modal={title:`${this.$tr("iauctions.cms.bid")} Id: ${e.id}`,show:!0,data:[{label:this.$tr("iauctions.cms.auction"),value:e.auction.title},{label:this.$tr("isite.cms.label.provider"),value:e.provider?`${e.provider.firstName} ${e.provider.lastName}`:"-"},{label:this.$tr("isite.cms.form.status"),value:e.statusName},{label:this.$tr("isite.cms.label.amount"),value:this.$trn(e.amount)},{label:this.$tr("isite.cms.label.winner"),value:parseInt(e.winner)?this.$tr("isite.cms.label.yes"):this.$tr("isite.cms.label.no")},{label:this.$tr("iauctions.cms.description"),value:e.description},{label:this.$tr("isite.cms.form.createdAt"),value:this.$trd(e.createdAt,{type:"long"})},{label:this.$tr("isite.cms.form.updatedAt"),value:this.$trd(e.updatedAt,{type:"long"})}]};let t=!!(e.auction&&e.auction.category&&e.auction.category.bidFormId)&&e.auction.category.bidFormId;if(t){this.modal.loading=!0;let n={};e.fields.forEach((e=>n[e.name]=e.value));let r=this.$clone(e.files||[]),a={refresh:!0,params:{include:"fields"}};this.$crud.show("apiRoutes.qform.forms",t,a).then((e=>{this.$clone(e.data.fields).forEach((e=>{let t=e.dynamicField?.type||"input",a=n[this.$helper.convertStringToSnakeCase(e.name)],o="media"!=t?null:r.find((t=>t.zone==(e.dynamicField.props.zone||"mainimage")));this.modal.data.push({...e,label:e.label.replace("*",""),value:"media"!=t?null==a?"-":a:o?[{id:this.$uid(),...o,filename:e.label}]:[],fieldType:t})})),this.modal.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.modal.loading=!1}))}))}}}};var u=n(68716),c=n(99588),d=n(84884),m=n(11032),f=n(2992),p=n(95252),h=n.n(p);const g=(0,u.c)(s,[["render",i]]),y=g;h()(s,"components",{QList:c.c,QItem:d.c,QItemSection:m.c,QItemLabel:f.c})},51008:(e,t,n)=>{"use strict";n.d(t,{c:()=>k});var r=n(92444),a=n(74044);const o={key:0,class:"row relative-position"},i={class:"col-12 q-mb-md"},l={key:0,class:"col-7 q-gutter-y-md"},s={key:1,class:"col-5 q-gutter-y-md"},u={class:"input-title"},c={class:"col-12 text-right"};function d(e,t,n,d,m,f){const p=(0,r.E1)("locales"),h=(0,r.E1)("q-input"),g=(0,r.E1)("q-editor"),y=(0,r.E1)("q-select"),b=(0,r.E1)("mediaForm"),v=(0,r.E1)("q-btn"),w=(0,r.E1)("q-form"),I=(0,r.E1)("inner-loading");return m.success?((0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[(0,r.K2)(p,{modelValue:m.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>m.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,r.K2)(w,{onSubmit:t[12]||(t[12]=e=>m.itemId?f.updateItem():f.createItem()),ref:"formContent",class:"row q-col-gutter-x-md full-width",autocomplete:"off",onValidationError:t[13]||(t[13]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[m.locale.success?((0,r.Wz)(),(0,r.An)("div",l,[(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.title")} (${m.locale.language}) `,type:"text",modelValue:m.locale.formTemplate.title,"onUpdate:modelValue":t[1]||(t[1]=e=>m.locale.formTemplate.title=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.caption")} (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.caption,"onUpdate:modelValue":t[2]||(t[2]=e=>m.locale.formTemplate.caption=e)},null,8,["label","modelValue"]),(0,r.K2)(h,{label:"URI ("+m.locale.language+")",outlined:"",dense:"",type:"text",modelValue:m.locale.formTemplate.uri,"onUpdate:modelValue":t[3]||(t[3]=e=>m.locale.formTemplate.uri=e)},null,8,["label","modelValue"]),(0,r.K2)(h,{label:"URL ("+m.locale.language+")",type:"text",modelValue:m.locale.formTemplate.url,"onUpdate:modelValue":t[4]||(t[4]=e=>m.locale.formTemplate.url=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.image")} URL (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.externalImageUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>m.locale.formTemplate.externalImageUrl=e)},null,8,["label","modelValue"]),(0,r.K2)(g,{label:`${e.$tr("isite.cms.form.description")} (${m.locale.language}) `,modelValue:m.locale.formTemplate.customHtml,"onUpdate:modelValue":t[6]||(t[6]=e=>m.locale.formTemplate.customHtml=e),style:{width:"100%"}},null,8,["label","modelValue"])])):(0,r.g1)("",!0),m.locale.success?((0,r.Wz)(),(0,r.An)("div",s,[f.canManageRecordMaster?((0,r.Wz)(),(0,r.Az)(y,{key:0,modelValue:m.locale.formTemplate.options.masterRecord,"onUpdate:modelValue":t[7]||(t[7]=e=>m.locale.formTemplate.options.masterRecord=e),label:e.$tr("isite.cms.form.masterRecord"),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:this.$tr("isite.cms.label.yes"),value:1},{label:this.$tr("isite.cms.label.no"),value:0}]},null,8,["modelValue","label","options"])):(0,r.g1)("",!0),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.status")} (${m.locale.language})`,modelValue:m.locale.formTemplate.active,"onUpdate:modelValue":t[8]||(t[8]=e=>m.locale.formTemplate.active=e),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:e.$tr("isite.cms.label.enabled"),value:!0},{label:e.$tr("isite.cms.label.disabled"),value:!1}]},null,8,["label","modelValue","options"]),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.option")}`,modelValue:m.locale.formTemplate.target,"onUpdate:modelValue":t[9]||(t[9]=e=>m.locale.formTemplate.target=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"_self",label:"Same tab"},{value:"_blank",label:"New tab"}]},null,8,["label","modelValue"]),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.type")}`,modelValue:m.locale.formTemplate.type,"onUpdate:modelValue":t[10]||(t[10]=e=>m.locale.formTemplate.type=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"auto",label:"Auto"},{value:"360",label:"360"},{value:"video",label:"Video"},{value:"image",label:"Image"}]},null,8,["label","modelValue"]),(0,r.QD)("div",u,(0,a.WA)(`${e.$tr("isite.cms.form.image")}`),1),((0,r.Wz)(),(0,r.Az)(b,{entity:"Modules\\Slider\\Entities\\Slide","entity-id":m.itemId?m.itemId:"",modelValue:m.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[11]||(t[11]=e=>m.locale.formTemplate.mediasSingle=e),zone:"slideimage",key:m.mediaKey},null,8,["entity-id","modelValue"]))])):(0,r.g1)("",!0),(0,r.QD)("div",c,[m.itemId?((0,r.Wz)(),(0,r.Az)(v,{key:0,color:"green",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit",rounded:""},null,8,["loading","label"])):((0,r.Wz)(),(0,r.Az)(v,{key:1,color:"green",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"]))])])),_:1},512),(0,r.K2)(I,{visible:m.loading},null,8,["visible"])])):(0,r.g1)("",!0)}n(23816);var m=n(4608);const f={components:{mediaForm:m.c},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((()=>{this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,mediaKey:this.$uid()}},computed:{dataLocale(){return{fields:{positionId:this.$route.params.positionId,target:null,type:"auto",mediasSingle:{},externalImageUrl:"",options:{masterRecord:0}},fieldsTranslatable:{title:"",caption:"",active:!0,url:"",uri:"",customHtml:""}}},canManageRecordMaster(){let e=!0;return this.$route.params.positionId.id&&!this.$hasAccess("isite.master.records.edit")&&(e=!1),this.$route.params.positionId.id||this.$hasAccess("isite.master.records.create")||(e=!1),e}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const n=this.$clone(this.itemId);if(n){let r="apiRoutes.qbanner.banners",a={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(r,n,a).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qbanner.banners";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$router.push({name:"qbanner.admin.sliders.show",params:{id:this.$route.params.positionId}}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated"),pos:"bottom"})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qbanner.banners";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var p=n(68716),h=n(14288),g=n(20540),y=n(85664),b=n(36008),v=n(99140),w=n(95252),I=n.n(w);const D=(0,p.c)(f,[["render",d]]),k=D;I()(f,"components",{QForm:h.c,QInput:g.c,QEditor:y.c,QSelect:b.c,QBtn:v.c})},19058:(e,t,n)=>{"use strict";n.d(t,{c:()=>$});var r=n(92444),a=n(74044);const o={id:"advanceChatComponent"},i={id:"advanceChatComponentContent",class:"relative-position"},l={class:"row"},s={style:{width:"300px"}},u={class:"row q-pa-sm justify-between"},c=(0,r.QD)("label",{class:"text-h5 cursor-pointer"},"+",-1),d={key:0,class:"row justify-center q-my-md"},m=["src"],f={class:"row justify-center q-my-md"},p={class:"col"},h=["room-id","rooms","messages","height","current-user-id","load-first-room","username-options","menu-actions","messages-loaded","message-actions","show-add-room","show-reaction-emojis","scroll-distance","single-room","accepted-files"];function g(e,t,n,g,y,b){const v=(0,r.E1)("dynamic-field"),w=(0,r.E1)("q-btn"),I=(0,r.E1)("q-spinner-dots"),D=(0,r.E1)("q-avatar"),k=(0,r.E1)("q-item-section"),M=(0,r.E1)("q-item-label"),A=(0,r.E1)("q-icon"),x=(0,r.E1)("q-badge"),T=(0,r.E1)("q-item"),N=(0,r.E1)("q-infinite-scroll"),S=(0,r.E1)("dynamic-form"),C=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[(0,r.QD)("div",l,[(0,r.QD)("div",s,[(0,r.QD)("div",u,[(0,r.K2)(v,{modelValue:y.roomsPagination.search,"onUpdate:modelValue":[t[0]||(t[0]=e=>y.roomsPagination.search=e),b.handleSearch],field:b.dynamicfields.search},null,8,["modelValue","field","onUpdate:modelValue"]),(0,r.K2)(w,{color:"primary",round:"",unelevated:"",onClick:t[1]||(t[1]=e=>y.modalNewRoom.show=!0)},{default:(0,r.Ql)((()=>[c])),_:1})]),(0,r.QD)("div",{ref:"listRoomsContent",style:(0,a.MN)(`max-height: calc(${n.height} - 58px); overflow-y: scroll`)},[!b.rooms.length&&y.loading.rooms?((0,r.Wz)(),(0,r.An)("div",d,[(0,r.K2)(I,{color:"primary",size:"40px"})])):(0,r.g1)("",!0),(0,r.K2)(N,{onLoad:t[2]||(t[2]=(e,t)=>b.getRooms({index:e,done:t})),offset:50,"scroll-target":e.$refs.listRoomsContent,ref:"infiniteScroll",debounce:"300"},{loading:(0,r.Ql)((()=>[(0,r.QD)("div",f,[(0,r.K2)(I,{color:"primary",size:"40px"})])])),default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(b.rooms,((e,t)=>((0,r.Wz)(),(0,r.Az)(T,{key:t,class:"q-pl-sm",clickable:"",onClick:t=>y.openRoomId=e.roomId,focused:y.openRoomId==e.roomId},{default:(0,r.Ql)((()=>[(0,r.K2)(k,{top:"",avatar:"",class:"q-pr-sm",style:{"min-width":"48px","max-width":"48px"}},{default:(0,r.Ql)((()=>[(0,r.K2)(D,null,{default:(0,r.Ql)((()=>[(0,r.QD)("img",{src:e.avatar},null,8,m)])),_:2},1024)])),_:2},1024),(0,r.K2)(k,null,{default:(0,r.Ql)((()=>[(0,r.K2)(M,{class:"text-body2 text-blue-grey text-weight-bold",lines:"1"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(e.roomName),1)])),_:2},1024),e.phone?((0,r.Wz)(),(0,r.Az)(M,{key:0,caption:"",class:"text-blue-grey"},{default:(0,r.Ql)((()=>[(0,r.K2)(A,{name:"fa-light fa-phone",class:"q-mr-xs"}),(0,r.mY)(" "+(0,a.WA)(e.phone),1)])),_:2},1024)):(0,r.g1)("",!0),(0,r.K2)(M,{caption:"",lines:"1"},{default:(0,r.Ql)((()=>[(0,r.K2)(A,{name:"fa-light fa-message",class:"q-mr-xs"}),(0,r.mY)(" "+(0,a.WA)(e.lastMessage.content),1)])),_:2},1024)])),_:2},1024),(0,r.K2)(k,{side:"",top:""},{default:(0,r.Ql)((()=>[(0,r.K2)(M,{caption:""},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(e.lastMessage.timestamp),1)])),_:2},1024),e.unreadCount?((0,r.Wz)(),(0,r.Az)(x,{key:0,color:"primary",class:"q-mt-sm","text-color":"white",label:e.unreadCount},null,8,["label"])):(0,r.g1)("",!0)])),_:2},1024)])),_:2},1032,["onClick","focused"])))),128))])),_:1},8,["scroll-target"])],4)]),(0,r.QD)("div",p,[(0,r.QD)("vue-advanced-chat",{"room-id":y.openRoomId,rooms:b.rooms,messages:b.messages,height:b.chatProps["height"],"current-user-id":b.chatProps["current-user-id"],"rooms-loaded":!0,"load-first-room":b.chatProps["load-first-room"],"username-options":b.chatProps["username-options"],"menu-actions":b.chatProps["menu-actions"],"messages-loaded":b.chatProps["messages-loaded"],"message-actions":b.chatProps["message-actions"],"show-add-room":b.chatProps["show-add-room"],"show-reaction-emojis":b.chatProps["show-reaction-emojis"],"scroll-distance":b.chatProps["scroll-distance"],"single-room":b.chatProps["single-room"],"accepted-files":b.chatProps["accepted-files"],onSendMessage:t[3]||(t[3]=e=>b.sendMessage(e.detail[0])),onAddRoom:t[4]||(t[4]=e=>y.modalNewRoom.show=!0),onMenuActionHandler:t[5]||(t[5]=(...e)=>b.menuActionHandler&&b.menuActionHandler(...e)),onOpenFile:t[6]||(t[6]=({message:t})=>e.$helper.openExternalURL(t.files[0].url,!0)),onFetchMessages:t[7]||(t[7]=e=>b.getMessages(e.detail[0])),onFetchMoreRooms:t[8]||(t[8]=e=>b.getRooms(e.detail[0])),onOpenFailedMessage:t[9]||(t[9]=(...e)=>b.showError&&b.showError(...e))},null,40,h)])]),(0,r.K2)(C,{modelValue:y.modalNewRoom.show,"onUpdate:modelValue":t[12]||(t[12]=e=>y.modalNewRoom.show=e),loading:y.modalNewRoom.loading,title:`${e.$tr("isite.cms.label.new")} ${e.$tr("isite.cms.label.chat")}`},{default:(0,r.Ql)((()=>[(0,r.QD)("div",null,[(0,r.K2)(v,{modelValue:y.newRoom.type,"onUpdate:modelValue":t[10]||(t[10]=e=>y.newRoom.type=e),field:b.fieldsToNewRooms.type},null,8,["modelValue","field"]),b.fieldsToNewRooms.blocks[y.newRoom.type]?((0,r.Wz)(),(0,r.Az)(S,{key:0,modelValue:y.newRoom.form,"onUpdate:modelValue":t[11]||(t[11]=e=>y.newRoom.form=e),blocks:b.fieldsToNewRooms.blocks[y.newRoom.type],"default-col-class":"col-12",onSubmit:b.createRoom},null,8,["modelValue","blocks","onSubmit"])):(0,r.g1)("",!0)])])),_:1},8,["modelValue","loading","title"])])])}n(23816);var y=n(21128),b=n(8932);const v={beforeUnmount(){b.kN.off("inotification.chat.message")},props:{accept:{default:".pdf, .xlsx, .docx, .pptx, .mp4, .mp3, .jpg, image/*"},roomId:{default:!1},roomsId:{default:!1},allowCreateChat:{default:!1},allowProviders:{type:Boolean,defualt:!1},height:{default:"600px"},advancedProps:{default:!1},loadRooms:{default:!0}},emits:["room-opened"],watch:{roomId(){this.getRooms()},roomsId(){this.getRooms()},openRoomId(e){this.$emit("room-opened",e)}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{conversations:[],conversationMessages:[],openRoomId:null,chatPagination:{page:0,perPage:50,lastPage:-1},loading:{rooms:!1,messages:!1},search:{userId:null,userList:[]},modalNewRoom:{show:!1,loading:!1},newRoom:{type:"user",form:{userId:null,providerType:null,providerId:null,firstName:null,lastName:null}},providers:{whatsapp:{image:`${this.$store.state.qsiteApp.baseUrl}/modules/isite/img/logos/whatsapp.jpg`}},roomsPagination:{search:null,page:0,perPage:20,total:0}}},computed:{acceptFiles(){if("images"==this.accept)return".jpg, image/*";if("documents"==this.accept)return".pdf, .xlsx, .docx, .pptx";if("media"==this.accept)return".mp4, .mp3, .jpg, image/*";let e=this.$store.state.qsiteApp.configs.Media;return this.$clone(e?e["allowed-types"]:this.accept)},chatProps(){let e={"current-user-id":this.$store.state.quserAuth.userId,"loading-rooms":this.loading.rooms,"rooms-loaded":!0,"show-reaction-emojis":!1,"messages-loaded":this.chatPagination.page==this.chatPagination.lastPage,"load-first-room":!1,"single-room":!0,"show-add-room":this.allowCreateChat,"message-actions":JSON.stringify([{name:"replyMessage",title:"Reply"}]),"accepted-files":this.acceptFiles,height:this.height,"menu-actions":[],"username-options":JSON.stringify({minUsers:1,currentUser:!1}),"scroll-distance":10,...this.advancedProps||{}};return e},rooms(){let e=[],t=this.$clone(this.conversations);return t.sort(((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt))),t.forEach((t=>{var n=t?.userConversation?.mainImage;Object.keys(this.providers).includes(t.entityType)&&n.includes("default.")&&(n=this.providers[t.providerType].image);let r={roomId:t.id.toString(),roomName:this.conversationExternalData(t).title,avatar:n,unreadCount:t.unreadMessagesCount||!1,messageActions:!1,phone:"whatsapp"==t.entityType?t.entityId:null,lastMessage:!!t.lastMessage&&{content:t.lastMessage.body||"",senderId:t.lastMessage.userId,timestamp:this.$date.getHumanCalendar(t.updatedAt)},users:t.users.map((e=>({_id:e.id,username:e.fullName,avatar:e?.mainImage,status:{lastChanged:!!Object.keys(this.providers).includes(t.entityType)&&`(${t.entityType})`}})))};e.push(r)})),this.$clone(e)},messages(){let e=[],t=this.$clone(this.conversationMessages).reverse(),n=t.length?this.conversations.find((e=>e.id==t[0].conversationId)):null,r=n?this.conversationExternalData(n).externalUsers.map((e=>e.id)):[],a=r.includes(this.$store.state.quserAuth.userId)?"external":"internal";return t.forEach((t=>{if(!e.find((e=>e._id==t.id))){let o=r.includes(t.user.id)?"external":"internal",i=!!n&&o==a;if(t.replyTo&&(t.replyMessage={_id:t.replyTo.id,content:t.replyTo.body||"",sender_id:t.replyTo.userId,file:!!t.replyTo.attachment&&{name:t.replyTo.attachment.filename,size:t.replyTo.attachment.filesize,type:t.replyTo.attachment.mimetype,extension:`.${t.replyTo.attachment.extension}`,url:t.replyTo.attachment.path,audio:"mp3"==t.replyTo.attachment.extension}}),t.attachment&&(t.file={id:t.attached,name:t.attachment.filename,size:t.attachment.filesize,type:t.attachment.mimetype,extension:`.${t.attachment.extension}`,url:t.attachment.path,audio:"mp3"==t.attachment.extension}),t.status>=5){let n={_id:t.id+"_",content:t.statusName||"",date:this.$trd(t.createdAt),senderId:i?this.$store.state.quserAuth.userId:t.user.id,system:!0,frontId:t.frontId||!1};e.push(n)}let l="";t.status&&(l=t.status<5?t.statusName:"No enviado");let s={_id:t.id,content:t.body||"",senderId:i?this.$store.state.quserAuth.userId:t.user.id,username:t.user.fullName,avatar:t.user?.mainImage,date:this.$trd(t.createdAt),failure:t.status>=5,timestamp:`${l} ${this.$trd(t.createdAt,{type:"time"})}`,files:t.file?Array.isArray(t.file)?t.file:[t.file]:[],replyMessage:t.replyMessage||!1,seen:3===t.status,errorMessage:t.status>=5?t.statusName:"",frontId:t.frontId||!1};e.push(s)}})),this.$clone(e)},fieldsToNewRooms(){return{type:{value:"user",type:"select",props:{label:this.$tr("isite.cms.form.type"),vIf:this.allowProviders,options:[{label:this.$tr("isite.cms.label.user"),value:"user"},{label:this.$tr("isite.cms.label.provider"),value:"provider"}]}},blocks:{user:[{fields:{userId:{value:null,type:"select",required:!0,props:{label:this.$tr("isite.cms.label.user")+"*"},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"fullName",id:"id"},filterByQuery:!0}}}}],provider:[{fields:{providerType:{value:null,type:"select",required:!0,props:{label:this.$tr("isite.cms.label.provider")+"*"},loadOptions:{delayed:()=>new Promise((e=>{this.$crud.index("apiRoutes.qnotification.providers",{refresh:!0}).then((t=>{e(t.data.filter((e=>{if(e.data&&parseInt(e.data.status||"0")&&parseInt(e.data.fields?.canCreateConversation||"0"))return e})).map((e=>({label:e.name,value:e.systemName}))))})).catch((t=>{this.$apiResponse.handleError(t,(()=>{e([])}))}))}))}},providerId:{value:null,type:"input",required:!0,props:{label:this.$tr("isite.cms.label.contact")+"*"}},firstName:{value:null,type:"input",props:{label:this.$tr("isite.cms.form.firstName")}},lastName:{value:null,type:"input",props:{label:this.$tr("isite.cms.form.lastName")}}}}]}}},dynamicfields(){return{search:{type:"search",props:{icon:null,clearable:!1}}}}},methods:{init(){(0,y.s)(),this.listenEvents(),this.getRooms()},listenEvents(){b.kN.on("inotification.chat.message",(e=>{e.data&&this.pushMessage(e.data)}))},getRooms(e={}){return new Promise(((t,n)=>{if(this.loadRooms){e={index:1,done:null,search:null,roomId:this.roomsId,...e},this.loading.rooms=!0,this.rooms.map((e=>e.roomId)).includes(this.openRoomId)||(this.openRoomId=null);let n={refresh:!0,params:{include:"users,lastMessage,conversationUsers",filter:{ids:this.$clone(this.roomsId)}}};e.roomId?this.$crud.show("apiRoutes.qchat.conversations",e.roomId,n).then((e=>{this.orderConversationData([e.data]),this.openRoomId=this.conversations[0].id,this.loading.rooms=!1,t(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading.rooms=!1,t(e)}))})):1==e.index||this.conversations.length<this.roomsPagination.total?(n.params={...n.params,page:e.search?1:e.index,take:this.roomsPagination.perPage,filter:{...n.params.filter,search:this.roomsPagination.search}},this.$crud.index("apiRoutes.qchat.conversations",n).then((n=>{this.orderConversationData(n.data,1!=n.meta.page.currentPage),this.roomsPagination.total=n.meta.page.total,this.roomsPagination.page=n.meta.page.currentPage,this.loading.rooms=!1,this.openRoomFromUrl(),t(n.data),e.done&&e.done()})).catch((n=>{this.$apiResponse.handleError(n,(()=>{this.loading.rooms=!1,t(n),e.done&&e.done()}))}))):this.$refs.infiniteScroll.stop()}}))},orderConversationData(e,t=!0){e.forEach((e=>{e.userConversation={...e.conversationUsers.find((e=>e.userId!=this.$store.state.quserAuth.userId)),...e.users.find((e=>e.id!=this.$store.state.quserAuth.userId))},e.authUserConversation={...e.conversationUsers.find((e=>e.userId==this.$store.state.quserAuth.userId)),...e.users.find((e=>e.id==this.$store.state.quserAuth.userId))},e.unreadMessagesCount=parseInt(e.authUserConversation.unreadMessagesCount)})),t&&(e=this.$array.mergeUniqueBy([...this.conversations,...e],"id")),this.conversations=e},getMessages({options:e}){return new Promise(((t,n)=>{this.loading.messages=!0,e&&e.reset&&(this.conversationMessages=[],this.chatPagination.page=0,this.chatPagination.lastPage=-1);let r=this.openRoomId,a=this.conversations.findIndex((e=>e.id==r));this.conversations[a].unreadMessagesCount=!1;let o={refresh:!0,params:{page:this.chatPagination.page+1,take:this.chatPagination.perPage,filter:{conversationId:r},include:"user,replyTo"}};this.$crud.index("apiRoutes.qchat.messages",o).then((n=>{e&&e.reset&&(this.conversationMessages=[]),this.conversationMessages=this.$clone([...this.conversationMessages,...n.data]),this.chatPagination.lastPage=n.meta.page.lastPage,this.chatPagination.page=n.meta.page.currentPage,this.loading.messages=!1,t(n.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading.messages=!1,t(e)}))}))}))},sendMessage({content:e,roomId:t,files:n,replyMessage:r}){return new Promise((async(a,o)=>{if(n)n.forEach(((r,a)=>{let o={body:a==n.length-1?e:"",frontId:this.$uid(),file:{name:r.name,size:r.size,type:r.extension||r.type,extension:`.${r.extension||r.type}`,url:r.url||r.localUrl,audio:!!r.audio,duration:r.duration||0}};this.pushMessage(o),this.uploadMessage({...o,roomId:t,file:{...o.file,blob:r.blob}})}));else{let n={body:e,frontId:this.$uid(),...r?{replyMessage:r}:{}};this.pushMessage(n),this.uploadMessage({...n,roomId:t})}}))},uploadMessage(e){return new Promise((async(t,n)=>{let r={frontId:e.frontId,conversationId:e.roomId,body:e.body||"",userId:this.$store.state.quserAuth.userId,replyToId:e.replyMessage?e.replyMessage._id:null};if(e.attached&&(r.mediasSingle={attachment:e.attached},r.attached=e.attached),e.file){let{file:t}=e,n=await this.$helper.getBase64(t.blob),a=await this.$helper.urlToFile(n,t.audio?t.name:`${t.name}.${t.extension}`,t.type),o=new FormData;o.append("parent_id",0),o.append("file",a),o.append("disk","privatemedia");let i=await this.$crud.post("apiRoutes.qmedia.files",o);i&&i.data&&(r.mediasSingle={attachment:i.data.id},r.attached=i.data.id)}this.$crud.create("apiRoutes.qchat.messages",r).then((e=>{let n=this.conversationMessages.findIndex((t=>t.frontId==e.data.frontId));-1!=n&&(this.conversationMessages[n].id=e.data.id,this.conversationMessages[n].attachment=e.data.attachment||!1),t(e)})).catch((e=>n(e)))}))},pushMessage(e){let t=e.conversation?e.conversation.id:this.openRoomId,n=!!t&&this.conversations.findIndex((e=>e.id==t)),r=n>=0&&this.conversations[n],a={id:this.$uid(),user:e.userId&&r?r.users.find((t=>t.id==e.userId)):this.$store.state.quserAuth.userData,createdAt:this.$moment().format("YYYY-MM-DD HH:mm:ss"),updatedAt:this.$moment().format("YYYY-MM-DD HH:mm:ss"),...e};!r&&e.conversation&&this.orderConversationData([...this.conversations,{...e.conversation,lastMessage:a}]),r&&(this.conversations[n].updatedAt=this.$moment().format("YYYY-MM-DD HH:mm:ss"),this.conversations[n].lastMessage=a,e.conversation&&e.conversation.id!=this.openRoomId&&(this.conversations[n].unreadMessagesCount+=1)),e.conversation&&e.conversation.id!=this.openRoomId||this.conversationMessages.unshift(a),this.playSound(e)},playSound(e){e.conversation&&e.conversation.id!=this.openRoomId?this.$helper.playSound({url:`${this.$store.state.qsiteApp.baseUrl}/modules/ichat/audio/sound_chat_notification.mp3`}):e.userId&&e.userId!=this.$store.state.quserAuth.userId&&this.$helper.playSound({url:`${this.$store.state.qsiteApp.baseUrl}/modules/ichat/audio/sound_message_notification.mp3`,volume:.2})},createRoom(){return new Promise(((e,t)=>{let n=null,r=null;if("user"==this.newRoom.type&&this.newRoom.form.userId){const a=this.newRoom.form.userId;if(a==this.chatProps["current-user-id"])return this.modalNewRoom.loading=!1,this.$alert.error(this.$tr("isite.cms.message.errorRequest")),t(!1);let o=this.conversations.find((e=>!!e.users.find((e=>e.id==a))&&e));if(o)return this.modalNewRoom={show:!1,loading:!1},this.openRoomId=o.id,e(o);n="apiRoutes.qchat.conversations",r={users:[a,this.chatProps["current-user-id"]]}}else n="apiRoutes.qchat.providerConversations",r={provider:this.newRoom.form.providerType,conversationId:this.newRoom.form.providerId,firstName:this.newRoom.form.firstName,lastName:this.newRoom.form.lastName};n&&r&&(this.modalNewRoom.loading=!0,this.$crud.create(n,r).then((async t=>{await this.getRooms(!0),this.openRoomId=t.data.id||t.data.conversation?.id,this.newRoom.form={userId:null,providerType:null,providerId:null,firstName:null,lastName:null},this.modalNewRoom={show:!1,loading:!1},e(t.data)})).catch((e=>{this.modalNewRoom={show:!1,loading:!1},t(e)})))}))},menuActionHandler({roomId:e,action:t}){t.action&&t.action({roomId:e,action:t})},async handleSearch(e){this.$refs.listRoomsContent.scrollTop=0,this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.conversations=[],await this.getRooms({search:e}),this.$refs.infiniteScroll.setIndex(1)},conversationExternalData(e){let t=this.$getSetting("ichat::externalRoles")??[],n=this.$getSetting("core::site-name"),r=this.$store.state.quserAuth.userId,a=e.users.filter((e=>{let n=e.roles.map((e=>e.id));return this.$array.hasCommonElement(n,t)||!n.length}));return{title:a.map((e=>e.id)).includes(r)?n:(a.length?a:e.users).map((e=>e.fullName)).join(", "),externalUsers:a}},showError({roomId:e,message:t}){this.$alert.warning({mode:"modal",title:this.$trp("ichat.cms.message.couldNotSend"),message:`<div>${this.$tr("isite.cms.label.error")}: ${t.errorMessage}</div>`,actions:[{label:this.$tr("isite.cms.label.close"),color:"grey-5"},{label:this.$tr("ichat.cms.label.resend"),color:"primary",handler:()=>{const n={...t,roomId:e,body:t.content,attached:t.files[0]?.id};this.conversationMessages=this.conversationMessages.filter((e=>e.id!==t._id)),this.pushMessage(n),this.uploadMessage(n).then((e=>{this.$crud.delete("apiRoutes.qchat.messages",t._id)}))}}]})},openRoomFromUrl(){setTimeout((()=>{let e=this.$route.query.conversationId;if(e){let t=this.conversations.find((t=>t.id==e));t?this.openRoomId=t.id:this.getRooms({roomId:e})}}),200)}}};var w=n(68716),I=n(99140),D=n(54420),k=n(75960),M=n(84884),A=n(11032),x=n(11252),T=n(2992),N=n(58120),S=n(29104),C=n(95252),z=n.n(C);const O=(0,w.c)(v,[["render",g]]),$=O;z()(v,"components",{QBtn:I.c,QSpinnerDots:D.c,QInfiniteScroll:k.c,QItem:M.c,QItemSection:A.c,QAvatar:x.c,QItemLabel:T.c,QIcon:N.c,QBadge:S.c})},13488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var r=n(92444),a=n(74044);const o={class:"row gutter-x-sm relative-position q-mb-lg"},i={key:0,class:"col-12"},l={class:"row"},s={class:"col-12 q-mb-md"},u={key:0,class:"col-12"},c={class:"row q-col-gutter-md"},d={class:"col-12"},m={key:0,class:"row q-col-gutter-xs"},f={class:"col-8 col-md-10"},p={class:"col-4 col-md-2"},h={key:1,class:"relative-position"},g={class:"input-title"},y={class:"col-12 text-right"};function b(e,t,n,b,v,w){const I=(0,r.E1)("locales"),D=(0,r.E1)("q-input"),k=(0,r.E1)("q-select"),M=(0,r.E1)("q-color"),A=(0,r.E1)("q-popup-proxy"),x=(0,r.E1)("q-icon"),T=(0,r.E1)("q-chip"),N=(0,r.E1)("upload-media"),S=(0,r.E1)("q-btn"),C=(0,r.E1)("q-form"),z=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",o,[v.success?((0,r.Wz)(),(0,r.An)("div",i,[(0,r.QD)("div",l,[(0,r.QD)("div",s,[(0,r.K2)(I,{modelValue:v.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>v.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,r.K2)(C,{onSubmit:t[6]||(t[6]=e=>v.itemId?w.updateItem():w.createItem()),ref:"formContent",class:"row q-col-gutter-x-sm full-width",autocomplete:"off",onValidationError:t[7]||(t[7]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[v.locale.success?((0,r.Wz)(),(0,r.An)("div",u,[(0,r.QD)("div",c,[(0,r.QD)("div",d,[(0,r.K2)(D,{outlined:"",dense:"",modelValue:v.locale.formTemplate.description,"onUpdate:modelValue":t[1]||(t[1]=e=>v.locale.formTemplate.description=e),rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.description")} (${v.locale.language})*`},null,8,["modelValue","rules","label"]),(0,r.K2)(k,{outlined:"",dense:"",modelValue:v.locale.formTemplate.options.type,"onUpdate:modelValue":t[2]||(t[2]=e=>v.locale.formTemplate.options.type=e),rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.type")} *`,options:v.typeOptions,"map-options":"","emit-value":""},null,8,["modelValue","rules","label","options"]),3==v.locale.form.options.type?((0,r.Wz)(),(0,r.An)("div",m,[(0,r.QD)("div",f,[(0,r.K2)(D,{outlined:"",dense:"",modelValue:v.locale.formTemplate.options.color,"onUpdate:modelValue":t[4]||(t[4]=e=>v.locale.formTemplate.options.color=e),rules:["anyColor"],label:`${e.$tr("icommerce.cms.form.color")} *`},{append:(0,r.Ql)((()=>[(0,r.K2)(x,{name:"colorize",class:"cursor-pointer"},{default:(0,r.Ql)((()=>[(0,r.K2)(A,{"transition-show":"scale","transition-hide":"scale"},{default:(0,r.Ql)((()=>[(0,r.K2)(M,{modelValue:v.locale.formTemplate.options.color,"onUpdate:modelValue":t[3]||(t[3]=e=>v.locale.formTemplate.options.color=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"])]),(0,r.QD)("div",p,[(0,r.K2)(T,{class:"full-width no-border-radius q-ma-none",style:(0,a.MN)("height: 40px;background-color: "+v.locale.formTemplate.options.color)},null,8,["style"])])])):(0,r.g1)("",!0),2==v.locale.form.options.type?((0,r.Wz)(),(0,r.An)("div",h,[(0,r.QD)("div",g,(0,a.WA)(e.$tr("isite.cms.form.image")),1),(0,r.K2)(N,{modelValue:v.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[5]||(t[5]=e=>v.locale.formTemplate.mediasSingle=e),entity:"Modules\\Icommerce\\Entities\\OptionValue","entity-id":v.itemId||null,zone:"mainimage"},null,8,["modelValue","entity-id"])])):(0,r.g1)("",!0)])])])):(0,r.g1)("",!0),(0,r.QD)("div",y,[(0,r.K2)(S,{color:"green",loading:v.loading,icon:"fas fa-edit",label:v.itemId?e.$tr("isite.cms.label.update"):e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"])])])),_:1},512)])])):(0,r.g1)("",!0),(0,r.K2)(z,{visible:v.loading},null,8,["visible"])])}n(23816);var v=n(4608);const w={emits:["updated"],components:{uploadMedia:v.c},watch:{$route(e,t){this.initForm()},id(){this.initForm()}},mounted(){this.$nextTick((function(){this.initForm()}))},validations(){return this.getObjectValidation()},data(){return{locale:{},loading:!1,success:!1,users:[],itemId:!1,optionValues:[],pages:[],typeOptions:[{label:this.$tr("isite.cms.label.text"),value:1},{label:this.$tr("isite.cms.label.image"),value:2},{label:this.$tr("icommerce.cms.form.color"),value:3}]}},computed:{dataLocale(){return{fields:{optionId:this.optionId||this.$route.params.optionId,sortOrder:1,options:{type:1,color:"#000000"},mediasSingle:{},mediasMulti:{}},fieldsTranslatable:{description:""}}}},props:{optionId:{default:0},id:{default:0}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),0==this.id?this.itemId=this.$route.params.id||0:this.itemId=this.id>-1?this.id:0,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.getoptionValues(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const n=this.$clone(this.itemId);if(n>0){let r="apiRoutes.qcommerce.optionValues",a={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(r,n,a).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest")}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qcommerce.optionValues";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$route.params.optionId&&this.$router.push({name:"qcommerce.admin.options.edit",params:{id:this.$route.params.optionId}}),this.$emit("updated")})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated")})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qcommerce.optionValues";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$emit("updated"),this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated")})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e},getoptionValues(){return new Promise(((e,t)=>{let n="apiRoutes.qcommerce.optionValues",r={refresh:!0,params:{filter:{allTranslations:!0,optionId:this.$route.params.optionId||this.optionId}}};this.$crud.index(n,r).then((t=>{this.optionValues=this.$array.tree(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error("Failed: "+e,"bottom"),t(!0)}))}))}))},arrayUnique(e){return e.filter(((e,t,n)=>n.findIndex((t=>JSON.stringify(t)===JSON.stringify(e)))===t))}}};var I=n(68716),D=n(14288),k=n(20540),M=n(36008),A=n(58120),x=n(7120),T=n(14512),N=n(84256),S=n(99140),C=n(95252),z=n.n(C);const O=(0,I.c)(w,[["render",b]]),$=O;z()(w,"components",{QForm:D.c,QInput:k.c,QSelect:M.c,QIcon:A.c,QPopupProxy:x.c,QColor:T.c,QChip:N.c,QBtn:S.c})},22096:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>se});var r=n(92444),a=n(264),o={class:"tw-w-full"},i=(0,r.QD)("i",{class:"fa-solid fa-circle-exclamation tw-text-6xl"},null,-1),l=(0,r.QD)("p",{class:"tw-mt-3"},"The map loading has failed",-1),s={class:"tw-w-full"},u={key:0,class:"tw-w-full tw-h-96",ref:"mapRef"},c=["src"],d=(0,r.QD)("i",{class:"fa-solid fa-map-location-dot tw-text-6xl"},null,-1),m=(0,r.QD)("p",{class:"tw-mt-3"},"No data to show on the map",-1);function f(e,t,n,f,p,h){var g=(0,r.E1)("q-inner-loading"),y=(0,r.E1)("q-card");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.wt)((0,r.K2)(y,{class:"tw-relative tw-w-full tw-h-96 tw-flex tw-justify-center tw-items-center"},{default:(0,r.Ql)((function(){return[(0,r.K2)(g,{showing:e.loading,label:"Please wait...","label-class":"text-grey","label-style":"font-size: 1.1em"},null,8,["showing"])]})),_:1},512),[[a.Ub,e.loading]]),e.error&&!e.mapScreenshot?((0,r.Wz)(),(0,r.Az)(y,{key:0,class:"card-example tw-w-full tw-h-96 tw-flex tw-flex-col tw-justify-center tw-items-center tw-text-gray-500"},{default:(0,r.Ql)((function(){return[i,l]})),_:1})):(0,r.g1)("",!0),(0,r.wt)((0,r.QD)("div",s,["google"!==e.mapType||e.error?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",u,null,512)),"flightaware"===e.mapType&&e.mapScreenshot?((0,r.Wz)(),(0,r.An)("img",{key:1,src:e.mapScreenshot,class:"tw-w-full tw-h-auto"},null,8,c)):(0,r.g1)("",!0),"flightaware"!==e.mapType||e.mapScreenshot||e.error?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(y,{key:2,class:"card-example tw-w-full tw-h-96 tw-flex tw-flex-col tw-justify-center tw-items-center tw-text-gray-500"},{default:(0,r.Ql)((function(){return[d,m]})),_:1}))],512),[[a.Ub,!e.loading]])])}var p=n(75836),h=n(43648),g=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},y=function(e,t,n){if(!t)return[];var r=g([],t,!0);if((null===n||void 0===n?void 0:n.type)===e){var a=function(e){return(null===e||void 0===e?void 0:e.id)===(null===n||void 0===n?void 0:n.id)},o=null===r||void 0===r?void 0:r.findIndex(a);return o>=0?(r[o]=n,r):(r.push(n),r)}return r},b=function(e){var t=null===e||void 0===e?void 0:e.inboundOriginAirport,n=null===e||void 0===e?void 0:e.outboundDestinationAirport,r=null===e||void 0===e?void 0:e.origin,a=null===e||void 0===e?void 0:e.destination,o=[Number((null===r||void 0===r?void 0:r.lat)||(null===t||void 0===t?void 0:t.lat))||null,Number((null===r||void 0===r?void 0:r.lng)||(null===t||void 0===t?void 0:t.lng))||null],i=[Number((null===a||void 0===a?void 0:a.lat)||(null===n||void 0===n?void 0:n.lat))||null,Number((null===a||void 0===a?void 0:a.lng)||(null===n||void 0===n?void 0:n.lng))||null];return{origin:{title:(null===r||void 0===r?void 0:r.title)||(null===t||void 0===t?void 0:t.airportName),coordinate:o,code:(null===r||void 0===r?void 0:r.code)||(null===t||void 0===t?void 0:t.airportCode)},destination:{title:(null===a||void 0===a?void 0:a.title)||(null===n||void 0===n?void 0:n.airportName),coordinate:i,code:(null===a||void 0===a?void 0:a.code)||(null===n||void 0===n?void 0:n.airportCode)}}},v=function(e){if(void 0===e&&(e=[]),e.length<=0)return[];var t=e.map((function(e){return Array.isArray(e)?{lat:e[0],lng:e[1]}:{lat:Number(null===e||void 0===e?void 0:e.lat),lng:Number(null===e||void 0===e?void 0:e.lon)}}));return t},w=function(e,t,n){var r=b(n),a=r.origin,o=r.destination,i=(null===e||void 0===e?void 0:e.lat)?Number(null===e||void 0===e?void 0:e.lat):null,l=(null===e||void 0===e?void 0:e.lon)?Number(null===e||void 0===e?void 0:e.lon):null,s=(null===t||void 0===t?void 0:t.waypoints)||[],u=Number(null===e||void 0===e?void 0:e.heading),c=(null===e||void 0===e?void 0:e.aircrafttype)||"",d=[i,l],m={originAirport:a,destinationAirport:o,aircraftType:c,heading:u,wayPoints:s,flightCoordinates:d};return m},I="M12.7453 0.584293C10.6162 0.556597 10.0461 4.74809 10.2188 9.51409L5.91551 11.9865L5.86988 11.8157C5.87896 11.5554 5.72387 11.318 5.40205 11.388C5.08022 11.458 4.94473 11.5391 4.97344 11.8427L4.96703 12.5543L0.773151 15.0934C0.664105 15.1444 0.568326 15.2178 0.492142 15.3089C0.415957 15.4 0.3611 15.5066 0.331193 15.6218C0.301286 15.7369 0.29701 15.8579 0.318647 15.9768C0.340284 16.0956 0.387341 16.2097 0.456712 16.3114C0.65743 16.7197 1.04964 16.8152 1.6177 16.5884L10.6497 15.2957C10.955 18.3026 11.4428 21.0115 11.6123 22.3821L11.604 23.5714L8.5547 25.2034C8.4659 25.2796 8.3947 25.3733 8.34545 25.4788C8.29619 25.5843 8.26991 25.6993 8.26822 25.817C8.26653 25.9346 8.28946 26.0522 8.33562 26.1628C8.38177 26.2733 8.45017 26.3744 8.53664 26.4599C9.78738 26.1775 11.0673 26.0116 12.3595 25.9643C13.5933 26.0966 15.7412 26.0673 16.9273 26.4559C17.0135 26.3795 17.0828 26.2866 17.1311 26.1826C17.1795 26.0786 17.206 25.9655 17.2091 25.8497C17.2122 25.7339 17.1919 25.6177 17.1493 25.5078C17.1068 25.3978 17.0427 25.2963 16.9609 25.2089L14.0556 23.6844C14.0396 23.618 14.0386 23.5496 14.0528 23.484C14.067 23.4184 14.0959 23.3573 14.1376 23.305C14.1376 23.305 14.6244 19.6352 14.8583 15.1165L23.9325 17.3657C24.5188 17.5998 24.8654 17.5244 25.1207 17.1073C25.1807 17.0142 25.2202 16.9094 25.2369 16.7992C25.2536 16.689 25.2472 16.5758 25.2179 16.4664C25.1887 16.3569 25.1373 16.2535 25.0668 16.1623C24.9963 16.0711 24.9083 15.994 24.8079 15.9357L21.0732 13.3776L21.0157 12.7703C21.0339 12.4952 20.8789 12.2578 20.5323 12.3331C20.4685 12.3199 20.403 12.3227 20.342 12.3412C20.2809 12.3597 20.2264 12.3933 20.1834 12.4388C20.1405 12.4844 20.1107 12.5403 20.0967 12.6014C20.0827 12.6625 20.0851 12.7267 20.1037 12.7879L15.1663 9.45019C14.8932 4.60271 14.6385 0.611625 12.7453 0.584293Z",D="#FBBF23",k="#FFA000",M="FLIGHT",A=360,x="4504f8b37365c3d0",T={geodesic:!0,strokeColor:k,strokeOpacity:1,strokeWeight:3},N={center:{lat:37.09024,lng:-95.712891},zoom:3,mapId:x,minZoom:2,streetViewControl:!1,scrollwheel:!0,restriction:{latLngBounds:{north:85,south:-85,west:-180,east:180},strictBounds:!0}},S="wss://app-agionefirehose-prod-use2-04.azurewebsites.net/firehose",C={path:I,fillColor:D,strokeColor:"#7F7F7F",fillOpacity:1,strokeWeight:1.5,scale:1.2,url:null},z={text:"",color:"#E43A3A",fontSize:"14px",fontWeight:"bold"},O={type:1,protocol:"json",version:1,target:"FireHoseConnect",arguments:["ALL"]},$={google:"google",flightaware:"flightaware"},Q={position:"position",cancellation:"cancellation",flifo:"flifo"},L=function(e){var t=b(e),n=t.origin,r=t.destination,a=(null===e||void 0===e?void 0:e.lat)?Number(null===e||void 0===e?void 0:e.lat):null,o=(null===e||void 0===e?void 0:e.lng)?Number(null===e||void 0===e?void 0:e.lng):null,i={originAirport:n,destinationAirport:r,aircraftType:M,heading:(null===e||void 0===e?void 0:e.heading)||0,wayPoints:(null===e||void 0===e?void 0:e.waypoints)||[],flightCoordinates:[a,o]};return i},E=(0,p.cB)({websocketConnection:null});function F(){var e=function(e){E.websocketConnection=e},t=function(){return E.websocketConnection};return{setWebsocketConnection:e,getWebsocketConnection:t}}var W=n(8932),Y=function(){function e(){this.socket=F().getWebsocketConnection(),this.isConnected=!1}return e.prototype.connect=function(e){var t=this,n=W.is.state.quserAuth.userToken;if(!n)return console.error("User token is undefined."),null;var r=n.slice(7);return this.isConnected?(console.warn("Connection is already open."),this.socket):(this.socket||(this.socket=new WebSocket("".concat(e,"?token=").concat(r)),this.socket.addEventListener("open",(function(){t.isConnected=!0})),this.socket.addEventListener("error",(function(e){console.error("error",e)})),F().setWebsocketConnection(this.socket)),this.socket)},e.prototype.close=function(){var e=this;setTimeout((function(){e.socket&&(e.socket.close(),e.socket.addEventListener("close",(function(t){console.log("close",t),e.socket=null,e.isConnected=!1,F().setWebsocketConnection(null)})))}),700)},e.prototype.addEventListener=function(e,t){this.socket&&this.socket.addEventListener(e,t)},e.prototype.isConnect=function(){return this.isConnected},e}(),j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j.apply(this,arguments)},q={title:"",coordinate:[],code:""},R={heading:0,aircraftType:"",wayPoints:[],originAirport:j({},q),destinationAirport:j({},q),flightCoordinates:[]},P=n(20584),U=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},_=function(e){return U(void 0,void 0,void 0,(function(){var t,n,r,a;return V(this,(function(o){switch(o.label){case 0:t="apiRoutes.qramp.flightPosition",o.label=1;case 1:return o.trys.push([1,3,,4]),n={refresh:!0,params:{filter:{id:0}}},e&&(n.params.filter.id=e),[4,P.c.index(t,n)];case 2:return r=o.sent(),[2,r];case 3:return a=o.sent(),console.log(a),[3,4];case 4:return[2]}}))}))},B=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},K=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},H=function(e){return B(void 0,void 0,void 0,(function(){var t,n,r;return K(this,(function(a){switch(a.label){case 0:t="apiRoutes.qfly.flightsFlightawareMap",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,P.c.get(t,{refresh:!0},{id:e})];case 2:return n=a.sent(),[2,n];case 3:return r=a.sent(),console.log(r),[3,4];case 4:return[2]}}))}))},G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},G.apply(this,arguments)},Z=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},J=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},X=function(e){var t,a=(0,p.IL)(null),o=n(43757),i=n(71196),l=(0,p.kx)(e),s=l.flightDetails,u=l.faFlightId,c=l.mapType,d=l.workOrderId,m=new Set,f=new Map,g=new Y,I=W.is.getSetting("isite::api-maps"),D=(0,p.IL)([]),k=(0,p.IL)([]),M=(0,p.IL)(R),x=(0,p.IL)(),E=(0,p.IL)(!0),F=(0,p.IL)(),j=(0,p.IL)(0),q=(0,p.IL)(null),P=(0,p.IL)(!1),U=(0,r.S6)((function(){var e,t;return(null===(e=F.value)||void 0===e?void 0:e.type)===Q.position&&!m.has(null===(t=F.value)||void 0===t?void 0:t.id)})),V=(0,r.S6)((function(){var e,t,n,r;return(null===(e=F.value)||void 0===e?void 0:e.type)===Q.cancellation||(null===(t=F.value)||void 0===t?void 0:t.actual_on)||(null===(n=F.value)||void 0===n?void 0:n.actual_in)||(null===(r=F.value)||void 0===r?void 0:r.aat)}));function B(){return Z(this,void 0,Promise,(function(){var e,n,r;return J(this,(function(o){switch(o.label){case 0:if(t)return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,google.maps.importLibrary("maps")];case 2:return e=o.sent().Map,n=new h.c1({apiKey:I,version:"weekly"}),[4,n.load().then((function(){a.value&&(t=new e(a.value,G(G({},N),{mapTypeId:google.maps.MapTypeId.TERRAIN})))}))];case 3:return o.sent(),[3,5];case 4:return r=o.sent(),E.value=!1,q.value=r,console.error(r),[3,5];case 5:return[2]}}))}))}var K=function(){var e=g.connect(S);g.addEventListener("open",(function(){e&&(e.send(JSON.stringify(O)+""),e.send(JSON.stringify(O)+""))}))},X=function(e,n){if(n&&t)try{var r=new google.maps.InfoWindow({content:"<p>".concat(n,"</p>")});e.addListener("mouseover",(function(){r.open(t,e)})),e.addListener("mouseout",(function(){r.close()})),u.value||e.addListener("click",(function(){}))}catch(a){console.error(a)}},ee=function(e,n,r,a,o,i){return void 0===e&&(e=0),void 0===i&&(i={}),Z(void 0,void 0,void 0,(function(){var l,s,u,c;return J(this,(function(d){if(l={url:o,labelOrigin:new google.maps.Point(40,15)},s=G(G(G({},C),{anchor:new google.maps.Point(15,15),rotation:e}),i),u=G(G({},z),{text:a||""}),!n[0]||!n[1])return[2,null];try{return c=new google.maps.Marker({position:{lat:Number(n[0]),lng:Number(n[1])},map:t,icon:o?l:s,label:a?u:"",zIndex:o?1:2}),X(c,r),[2,c]}catch(m){console.error(m)}return[2]}))}))},te=function(){try{for(var e=0,t=f.values();e<t.length;e++){var n=t[e];n.setMap(null)}}catch(r){console.error(r)}},ne=function(e){var t=e.id,n=e.rotation,r=e.flightCoordinates,a=e.aircraftType;try{var o=ee(n,r,a);if(!o)return;f.set(t,o),r&&u.value&&ie(r[0],r[1],5)}catch(i){console.error(i)}},re=function(e){var t=e.id,n=e.rotation,r=e.flightCoordinates;if(t&&n&&r[0]&&r[1])try{var a=f.get(t),o=new google.maps.LatLng(r[0],r[1]);o&&(a.setPosition(o),a.setIcon(G(G({},a.getIcon()),{rotation:n})))}catch(i){console.error(i)}},ae=function(e){var t=e.id,n=e.lat,r=e.lon,a=e.heading,o=e.aircrafttype;if(t||n||r||a||o){var i=[n,r];fe(a,i,o,t)}},oe=function(e){var t=null===e||void 0===e?void 0:e.id;if(F.value=e,U.value&&ae(e),V.value)try{if(m.add(t),f.has(t)){var n=f.get(t);n.setMap(null),f.delete(t)}}catch(r){console.error(r)}},ie=function(e,n,r){try{if(!e||!n)return;var a=new google.maps.LatLng(e,n);t&&(t.setZoom(r),t.setCenter(a))}catch(o){console.error(o)}},le=function(e){if(!P.value)try{if((null===e||void 0===e?void 0:e.length)>0){var n=v(e),r=new google.maps.Polyline(G(G({},T),{path:n}));P.value=!0,t&&r.setMap(t)}}catch(a){console.error(a)}},se=function(e){var t,n,r=function(t){return(null===t||void 0===t?void 0:t.id)===e},a=null===(t=D.value)||void 0===t?void 0:t.find(r),o=null===(n=k.value)||void 0===n?void 0:n.find(r);return[a,o]},ue=function(){return Z(void 0,void 0,Promise,(function(){var e,t,n,r,a,o,i,l,s,u,c,m;return J(this,(function(f){switch(f.label){case 0:if(j.value=j.value+1,j.value>1)return[2,M.value];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,_(d.value)];case 2:return e=f.sent(),t=e.data,n=null===t||void 0===t?void 0:t.flightPosition,r=(null===n||void 0===n?void 0:n.lastPositionLatitude)?Number(null===n||void 0===n?void 0:n.lastPositionLatitude):null,a=(null===n||void 0===n?void 0:n.lastPositionLongitude)?Number(null===n||void 0===n?void 0:n.lastPositionLongitude):null,o=null===n||void 0===n?void 0:n.lastPositionHeading,i=null===n||void 0===n?void 0:n.waypoints,l=b(t),s=l.origin,u=l.destination,c={originAirport:s,destinationAirport:u,aircraftType:null===t||void 0===t?void 0:t.aircraftType,heading:o,wayPoints:i,flightCoordinates:[r,a]},M.value=c,[2,c];case 3:return m=f.sent(),console.error(m),[2,R];case 4:return[2]}}))}))},ce=function(){return Z(void 0,void 0,Promise,(function(){var e,t,n,r;return J(this,(function(a){if(u.value||d.value){if(e=se(u.value),t=e[0],n=e[1],r=t||n,r)return[2,w(t,n,s.value)];if(!r)return[2,ue()]}return s.value?[2,L(s.value)]:[2,R]}))}))},de=function(e,n){if(e[0]&&e[1]&&n[0]&&n[1])try{var r=new google.maps.LatLng(e[0],e[1]),a=new google.maps.LatLng(n[0],n[1]),o=new google.maps.LatLngBounds;o.extend(r),o.extend(a),t&&t.fitBounds(o)}catch(i){console.error(i)}},me=function(e,t){var n=ee(0,e.coordinate,e.title,e.code,o),r=ee(0,t.coordinate,t.title,t.code,i);f.set("origin",n),f.set("destination",r),de(e.coordinate,t.coordinate)},fe=function(e,t,n,r){return void 0===e&&(e=0),Z(void 0,void 0,void 0,(function(){var a,o;return J(this,(function(i){return e||t?(a=e?e%A:0,o={id:r||n,rotation:a,flightCoordinates:t},f.has(r)?re(G({},o)):ne(G(G({},o),{aircraftType:n})),[2]):[2]}))}))},pe=function(){g.addEventListener("message",(function(e){var t;return Z(this,void 0,void 0,(function(){var n,r,a,o,i,l,c,m;return J(this,(function(f){switch(f.label){case 0:return e?(n=null===e||void 0===e?void 0:e.data.slice(0,-1),r=JSON.parse(n),a=null===(t=null===r||void 0===r?void 0:r.arguments)||void 0===t?void 0:t[0],console.log("firehose",a),D.value=y(Q.position,D.value,a),k.value=y(Q.flifo,k.value,a),[4,ce()]):[2];case 1:return o=f.sent(),i=o.heading,l=o.aircraftType,c=o.flightCoordinates,m=o.wayPoints,u.value||s.value||d.value?(le(m),fe(i,c,l,u.value),[2]):(oe(a),[2])}}))}))}))},he=function(){return Z(void 0,void 0,void 0,(function(){var e,t,n;return J(this,(function(r){switch(r.label){case 0:return[4,ce()];case 1:return e=r.sent(),t=e.originAirport,n=e.destinationAirport,K(),me(t,n),pe(),[2]}}))}))},ge=function(){return Z(void 0,void 0,void 0,(function(){var e,t,n,r,a,o,i;return J(this,(function(l){switch(l.label){case 0:return[4,ce()];case 1:return e=l.sent(),t=e.heading,n=e.aircraftType,r=e.flightCoordinates,a=e.wayPoints,o=e.originAirport,i=e.destinationAirport,me(o,i),le(a),fe(t,r,n),[2]}}))}))},ye=function(){return Z(void 0,void 0,void 0,(function(){var e;return J(this,(function(t){switch(t.label){case 0:return[4,H(u.value)];case 1:return e=t.sent(),x.value=null===e||void 0===e?void 0:e.data.map,[2]}}))}))},be=function(){return Z(void 0,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return te(),u.value&&c.value===$.google&&d.value?[4,he()]:[3,2];case 1:return e.sent(),[2];case 2:return!s.value||c.value!==$.google||u.value||d.value?[3,4]:[4,ge()];case 3:return e.sent(),[2];case 4:return u.value&&c.value===$.flightaware?[4,ye()]:[3,6];case 5:return e.sent(),[2];case 6:return K(),pe(),[2]}}))}))};return(0,r.GE)((function(){P.value=!1,g.close()})),(0,r.u2)((function(){return Z(void 0,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return[4,B()];case 1:return e.sent(),[4,be()];case 2:return e.sent(),P.value=!1,E.value=!1,[2]}}))}))})),{mapRef:a,mapScreenshot:x,loading:E,error:q}},ee=function(){return ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ee.apply(this,arguments)};const te=(0,r._M)({props:{flightDetails:{type:Object,default:function(){return null}},faFlightId:{type:String,default:function(){return""}},mapType:{type:String,default:"google"},workOrderId:{type:Number,default:function(){return 0}}},setup:function(e){return ee({},X(e))}});var ne=n(68716),re=n(70608),ae=n(23372),oe=n(95252),ie=n.n(oe);const le=(0,ne.c)(te,[["render",f]]),se=le;ie()(te,"components",{QCard:re.c,QInnerLoading:ae.c})},88006:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>nn});var r=n(92444),a=n(74044),o={key:0,class:"tw-p-4"},i=(0,r.QD)("div",{class:"tw-text-center"},[(0,r.QD)("img",{src:"https://agidev.blob.core.windows.net/agione/AGI_logo_app.png",alt:"",srcset:""})],-1),l={class:"tw-px-8 tw-border tw-py-4 tw-rounded tw-space-y-4 tw-mx-auto tw-my-4 tw-shadow-lg"},s=(0,r.QD)("p",{class:"tw-font-semibold"},"Search for flight",-1),u={class:"tw-flex tw-w-full tw-space-x-4"},c={class:"tw-w-64"},d={key:1,class:"tw-px-4"},m={class:"tw-border tw-shadow-lg tw-rounded-md"},f={key:0,class:"tw-flex tw-absolute tw-my-4 tw-ml-6"},p={class:"tw-w-full lg:tw-w-3/5"},h={class:"tw-w-full lg:tw-w-2/5 lg:tw-px-6"},g={class:"tw-space-y-8 tw-p-4"},y={key:2,class:"tw-text-8xl tw-flex tw-justify-center"},b=(0,r.QD)("i",{class:"fa-light fa-plane-departure tw-text-blue-900 tw-animate-pulse"},null,-1),v={key:3,class:"tw-py-4 tw-text-xl tw-border tw-shadow-lg tw-p-4 tw-mx-4 tw-rounded-md tw-text-center"},w=(0,r.QD)("div",{class:"tw-py-3"},[(0,r.QD)("i",{class:"fa-light fa-plane-circle-xmark tw-text-6xl tw-text-blue-900"})],-1),I={key:4,class:"tw-py-4 tw-text-xl tw-border tw-shadow-lg tw-p-4 tw-mx-4 tw-rounded-md tw-text-center"},D=(0,r.QD)("div",{class:"tw-py-3"},[(0,r.QD)("i",{class:"fa-light fa-plane-circle-xmark tw-text-6xl tw-text-blue-900"})],-1),k=(0,r.QD)("div",null," No statistics available ",-1),M=[D,k];function A(e,t,n,D,k,A){var x=(0,r.E1)("dynamic-field"),T=(0,r.E1)("q-btn"),N=(0,r.E1)("q-banner"),S=(0,r.E1)("q-tooltip"),C=(0,r.E1)("flightDetail"),z=(0,r.E1)("timeCards"),O=(0,r.E1)("tableFlight"),$=(0,r.E1)("q-spinner-dots");return(0,r.Wz)(),(0,r.An)("div",null,[e.isSearch?((0,r.Wz)(),(0,r.An)("div",o,[i,(0,r.QD)("div",l,[s,(0,r.QD)("div",u,[(0,r.QD)("div",c,[(0,r.K2)(x,{modelValue:e.store.search,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.store.search=t}),field:e.fields.search,onEnter:t[1]||(t[1]=function(t){return e.methods.getFlightaware()})},null,8,["modelValue","field"])]),(0,r.QD)("div",null,[(0,r.K2)(T,{color:"primary",label:e.$tr("isite.cms.label.search"),onClick:t[2]||(t[2]=function(t){return e.methods.getFlightaware()})},null,8,["label"])])])])])):(0,r.g1)("",!0),e.flight&&!e.loading?((0,r.Wz)(),(0,r.An)("div",d,[e.isSearch||e.validateFaFlightId?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(N,{key:0,"inline-actions":"",rounded:"",class:"bg-orange text-white"},{default:(0,r.Ql)((function(){return[(0,r.mY)(" This Work Order doesn't have a Flightaware flight linked to it, we are showing you everything that we get ")]})),_:1})),(0,r.QD)("div",m,[e.flight.workOrder&&e.isSearch?((0,r.Wz)(),(0,r.An)("div",f,[(0,r.K2)(T,{round:"",color:"primary",icon:"fa-light fa-briefcase",size:"sm",onClick:e.methods.redirectWo},{default:(0,r.Ql)((function(){return[(0,r.K2)(S,null,{default:(0,r.Ql)((function(){return[(0,r.mY)(" go to workOrder ")]})),_:1})]})),_:1},8,["onClick"])])):(0,r.g1)("",!0),(0,r.QD)("div",{class:(0,a.WN)(["tw-p-4 lg:tw-flex",{"tw-mt-8":e.flight.workOrder}])},[(0,r.QD)("div",p,[(0,r.K2)(C)]),(0,r.QD)("div",h,[(0,r.K2)(z)])],2),(0,r.QD)("div",g,[e.upcomingFlights.length>0?((0,r.Wz)(),(0,r.Az)(O,{key:0,title:"Upcoming Flights",dataTable:e.upcomingFlights,showWorkOrderColumn:e.isSearch},null,8,["dataTable","showWorkOrderColumn"])):(0,r.g1)("",!0),e.routeFlight.length>0?((0,r.Wz)(),(0,r.Az)(O,{key:1,title:"En Route Flight",dataTable:e.routeFlight,showWorkOrderColumn:e.isSearch},null,8,["dataTable","showWorkOrderColumn"])):(0,r.g1)("",!0),e.pastFlights.length>0?((0,r.Wz)(),(0,r.Az)(O,{key:2,title:"Past Flights",dataTable:e.pastFlights,showWorkOrderColumn:e.isSearch},null,8,["dataTable","showWorkOrderColumn"])):(0,r.g1)("",!0)])])])):(0,r.g1)("",!0),e.loading?((0,r.Wz)(),(0,r.An)("div",y,[(0,r.QD)("div",null,[b,(0,r.K2)($,{color:"primary"})])])):(0,r.g1)("",!0),0===e.store.flightList.length&&e.store.search.length>0&&e.store.failRequest?((0,r.Wz)(),(0,r.An)("div",v,[w,(0,r.QD)("div",null," I couldn't find flight tracking data for "+(0,a.WA)(e.store.search)+" yet. Recheck the flight number/identifier. ",1)])):(0,r.g1)("",!0),!(e.store.flightList.length>0)||e.isSearch||e.loading||e.store.selectedFligth||e.store.failRequest?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",I,M))])}var x=n(20584),T=n(75836),N=(0,T.cB)({search:"",flightList:[],selectedFligth:null,loading:!1,failRequest:!1,aircraftTypeList:[],airlinesList:[]}),S=(0,r.S6)((function(){return{get search(){return N.search},set search(e){N.failRequest=!1,N.search=e||""},get flightList(){return N.flightList},set flightList(e){N.flightList=e},get selectedFligth(){return N.selectedFligth},get aircraftTypeList(){return N.aircraftTypeList},set aircraftTypeList(e){N.aircraftTypeList=e},get airlinesList(){return N.airlinesList},set airlinesList(e){N.airlinesList=e},set selectedFligth(e){N.selectedFligth=e},get loading(){return N.loading},set loading(e){N.loading=e},get failRequest(){return N.failRequest},set failRequest(e){N.failRequest=e},reset:function(){N.search="",N.flightList=[],N.selectedFligth=null,N.loading=!1,N.failRequest=!1,N.aircraftTypeList=[],N.airlinesList=[]}}})).value;const C=S;var z=n(8932),O=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Q(e){return void 0===e&&(e=null),O(this,void 0,Promise,(function(){var t,n,r;return $(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),C.failRequest=!1,0===C.search.length?(z.Qb.warning("Please write the flight"),F(),C.failRequest=!1,[2]):(C.loading=!0,t={refresh:!0,params:{filter:{search:C.search.toUpperCase()}}},[4,x.c.index("apiRoutes.qfly.flightaware",t)]);case 1:return n=a.sent(),204===n.status?(F(),C.failRequest=!0,C.loading=!1,[2]):(C.flightList=n.data,W(e,n),[4,L()]);case 2:return a.sent(),[4,E()];case 3:return a.sent(),setTimeout((function(){C.loading=!1}),1e3),[3,5];case 4:return r=a.sent(),console.log(r),F(),C.loading=!1,C.failRequest=!1,[3,5];case 5:return[2]}}))}))}function L(){return O(this,void 0,Promise,(function(){var e,t;return $(this,(function(n){switch(n.label){case 0:return e={},[4,x.c.index("apiRoutes.qfly.aircraftTypes",e)];case 1:return t=n.sent(),C.aircraftTypeList=t.data,[2]}}))}))}function E(){return O(this,void 0,void 0,(function(){var e,t;return $(this,(function(n){switch(n.label){case 0:return e={},[4,x.c.index("apiRoutes.qfly.airlines",e)];case 1:return t=n.sent(),C.airlinesList=t.data,[2]}}))}))}function F(){C.flightList=[],C.selectedFligth=null}function W(e,t){if(e)C.selectedFligth=t.data.find((function(t){var n,r=t.workOrder&&"inbound"===e.type?t.workOrder.faFlightId:null===(n=t.workOrder)||void 0===n?void 0:n.outboundFaFlightId;return t.workOrder&&r?r==e.faFlightId:t.status.includes("Route")}))||(t.data.length>1?t.data[1]:null)||t.data[0];else{var n=t.data.find((function(e){return e.status.includes("Route")}))||(t.data.length>1?t.data[1]:null)||t.data[0];C.selectedFligth=n||null}}var Y="flightaware",j="google",q="qramp.admin.passenger",R="qramp.admin.workOrders",P="tw-right-thumb tw-hidden",U="tw-right-thumb",V={search:{value:null,type:"search",props:{label:"Search for flight"}}},_=n(86284);function B(e){if(e.workOrder){var t=e.workOrder||{},n=t.businessUnitId===_.GK?q:R;z.us.push({name:n,query:{edit:t.id}}).catch((function(e){"NavigationDuplicated"!=e.name&&console.log(e)}))}}var K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},K.apply(this,arguments)},H=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},G=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Z(e){var t=this,n=(0,r.S6)((function(){return C.flightList.filter((function(e){return e.status.includes("Scheduled")}))})),a=(0,r.S6)((function(){return C.flightList.filter((function(e){return e.status.includes("Route")}))})),o=(0,r.S6)((function(){return C.flightList.filter((function(e){return!e.status.includes("Scheduled")&&!e.status.includes("Route")}))})),i=(0,r.S6)((function(){return C.flightList})),l=(0,r.S6)((function(){return C.selectedFligth})),s=(0,r.S6)((function(){return C.loading})),u=(0,r.S6)((function(){return K({},V)})),c=(0,r.S6)((function(){var t=l.value.workOrder,n=t&&"inbound"===e.workOrderData.type?null===t||void 0===t?void 0:t.faFlightId:null===t||void 0===t?void 0:t.outboundFaFlightId;return!!(t&&e.workOrderData&&e.workOrderData.faFlightId)&&n==e.workOrderData.faFlightId})),d={getFlightaware:Q,redirectWo:function(){B(l.value)}};return(0,r.u2)((function(){return H(t,void 0,void 0,(function(){var t;return G(this,(function(n){switch(n.label){case 0:return e.isSearch?[3,2]:(t=e.workOrderData.flightNumber,C.search=t,[4,Q(e.workOrderData)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))})),(0,r.GE)((function(){C.reset()})),{fields:u,methods:d,store:C,upcomingFlights:n,routeFlight:a,pastFlights:o,flight:l,loading:s,flightList:i,validateFaFlightId:c}}var J={class:"md:tw-flex tw-mb-6 md:tw-space-x-4"},X={class:"rw-grow"},ee={class:"tw-flex"},te={class:"tw-grow"},ne=(0,r.QD)("p",{class:"tw-text-2xl tw-mb-2 tw-hidden"},"ABX Air 1234",-1),re={key:0,class:"tw-uppercase tw-text-gray-400"},ae=(0,r.QD)("a",{class:"tw-text-xs tw-mb-2 tw-block tw-font-semibold tw-underline tw-decoration-dashed tw-text-blue-400 tw-hidden",href:""},"Make a category upgrade to see the registration number",-1),oe={class:"tw-text-yellow-600 tw-text-base tw-hidden"},ie={class:"tw-flex tw-flex-col md:tw-flex-row tw-justify-between tw-space-x-4"},le={class:"tw-mb-3"},se={key:0,class:"tw-uppercase tw-text-lg"},ue={class:"tw-text-xl tw-uppercase"},ce={class:"tw-text-lg tw-uppercase tw-font-medium tw-text-blue-400 decorator-text"},de=(0,r.QD)("p",{class:"tw-text-sm tw-hidden"},"Detachment from",-1),me=(0,r.QD)("a",{class:"tw-text-base tw-mb-2 tw-block tw-font-bold tw-underline tw-decoration-dotted tw-text-blue-400 tw-hidden"},[(0,r.mY)("int'l de denver - "),(0,r.QD)("span",{class:"tw-font-bold tw-uppercase"},"DEN")],-1),fe={class:"tw-text-lg tw-uppercase"},pe={class:"tw-text-lg"},he={class:"tw-font-bold"},ge={class:"tw-text-right"},ye={key:0,class:"tw-uppercase tw-text-lg"},be={class:"tw-text-xl tw-uppercase"},ve={class:"tw-text-lg tw-uppercase tw-font-medium tw-text-blue-400 decorator-text"},we=(0,r.QD)("p",{class:"tw-text-sm tw-hidden"},"landing on",-1),Ie=(0,r.QD)("a",{class:"tw-text-base tw-mb-2 tw-block tw-font-bold tw-underline tw-decoration-dotted tw-text-blue-400 tw-hidden"},[(0,r.mY)("int'l de denver - "),(0,r.QD)("span",{class:"tw-font-bold tw-uppercase"},"ILN")],-1),De={class:"tw-text-lg tw-uppercase"},ke={class:"tw-text-lg"},Me={class:"tw-font-bold"},Ae={class:"tw-mt-6"},xe={class:"tw-grid tw-grid-cols-1 tw-gap-4 tw-place-items-stretch tw-mb-6 tw-text-gray-500"},Te={class:"tw-text-sm tw-text-center"},Ne={class:"tw-font-bold"};function Se(e,t,n,o,i,l){var s=(0,r.E1)("q-range"),u=(0,r.E1)("flightMap");return e.flight?((0,r.Wz)(),(0,r.An)("div",{key:0,class:"flight-map-traker tw-mx-auto tw-p-3",style:(0,a.MN)(e.cssVars)},[(0,r.QD)("div",J,[(0,r.QD)("div",X,[(0,r.QD)("div",ee,[(0,r.QD)("div",te,[ne,e.flight.ident&&e.flight.identIata?((0,r.Wz)(),(0,r.An)("p",re,(0,a.WA)(e.flight.ident)+" / "+(0,a.WA)(e.flight.identIata),1)):(0,r.g1)("",!0),ae,(0,r.QD)("p",{class:(0,a.WN)(["tw-uppercase tw-text-xl tw-font-bold",e.flight.flightStatusColor?"tw-bg-".concat(e.flight.flightStatusColor," tw-text-white tw-px-2 tw-rounded-md"):""])},(0,a.WA)(e.flight.status),3),(0,r.QD)("p",oe,(0,a.WA)(e.methods.minutesToHours(e.flight.timeTotalEstimated)),1)])])])]),(0,r.QD)("div",ie,[(0,r.QD)("div",le,[e.flight.gateOrigin?((0,r.Wz)(),(0,r.An)("p",se," Gate: "+(0,a.WA)(e.flight.gateOrigin),1)):(0,r.g1)("",!0),(0,r.QD)("p",ue,(0,a.WA)(e.flight.originAirport.airportIataCode),1),(0,r.QD)("p",ce,(0,a.WA)(e.flight.originAirport.airportName),1),de,me,(0,r.QD)("p",fe,(0,a.WA)(e.dateOriginAirportTimezone(e.dateDeparture,"dddd DD-MM-YYYY")),1),(0,r.QD)("p",pe,[(0,r.QD)("span",he,(0,a.WA)(e.dateOriginAirportTimezone(e.dateDeparture,"hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.originAirport.timezone)),1),e.flight.departureDelay?((0,r.Wz)(),(0,r.An)("span",{key:0,class:(0,a.WN)(e.methods.delay(e.flight.departureDelay).color)}," ("+(0,a.WA)(e.methods.delay(e.flight.departureDelay).title)+") ",3)):(0,r.g1)("",!0)])]),(0,r.QD)("div",ge,[e.flight.gateDestination?((0,r.Wz)(),(0,r.An)("p",ye," Gate: "+(0,a.WA)(e.flight.gateDestination),1)):(0,r.g1)("",!0),(0,r.QD)("p",be,(0,a.WA)(e.flight.destinationAirport.airportIataCode),1),(0,r.QD)("p",ve,(0,a.WA)(e.flight.destinationAirport.airportName),1),we,Ie,(0,r.QD)("p",De,(0,a.WA)(e.dateDestinationTimezone(e.dateArrival,"dddd DD-MM-YYYY")),1),(0,r.QD)("p",ke,[e.flight.arrivalDelay?((0,r.Wz)(),(0,r.An)("span",{key:0,class:(0,a.WN)(e.methods.delay(e.flight.arrivalDelay).color)}," ("+(0,a.WA)(e.methods.delay(e.flight.arrivalDelay).title)+")",3)):(0,r.g1)("",!0),(0,r.QD)("span",Me,(0,a.WA)(e.dateDestinationTimezone(e.dateArrival,"hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.destinationAirport.timezone)),1)])])]),(0,r.QD)("div",Ae,[(0,r.K2)(s,{modelValue:e.standard,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.standard=t}),color:"positive",min:0,max:100,readonly:"","left-thumb-color":"tw-left-thumb","right-thumb-color":e.rightThumbColor},null,8,["modelValue","right-thumb-color"])]),(0,r.QD)("div",xe,[(0,r.QD)("div",Te,[(0,r.QD)("span",Ne,(0,a.WA)(e.totalTravelTime),1),(0,r.mY)(" total travel time ")])]),(0,r.K2)(u,(0,a.Gk)((0,r.o9)(e.wantedFlightCases)),null,16)],4)):(0,r.g1)("",!0)}var Ce=n(47507),ze=n.n(Ce),Oe=n(49456),$e=n.n(Oe);function Qe(e){if(!e)return"00 hour 00 minutes";var t=$e().duration(e,"minutes"),n=8760*t.years()+720*t.months()+24*t.days()+t.hours(),r=t.minutes();return"".concat(n," hour ").concat(r," minutes")}function Le(e){if(0===e||null===e)return{title:"On Time",color:"text-positive"};var t=$e().duration(e,"minutes"),n=8760*t.years()+720*t.months()+24*t.days()+t.hours(),r=t.minutes();if(e<0){var a=0===Math.abs(n)?"Advanced ".concat(Math.abs(r)," minutes"):"Advanced ".concat(Math.abs(n)," hours and ").concat(Math.abs(r)," minutes");return{title:a,color:"text-positive"}}if(e>0){a=0===Math.abs(n)?"Delayed ".concat(Math.abs(r)," minutes"):"Delayed ".concat(Math.abs(n)," hours and ").concat(Math.abs(r)," minutes");return{title:a,color:"tw-text-yellow-600"}}return{title:"",color:"tw-text-black"}}var Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ee.apply(this,arguments)};function Fe(e){return(null===e||void 0===e?void 0:e.workOrder)?(null===e||void 0===e?void 0:e.status.includes("Route"))?e.status.includes("Route")?We(e):void 0:e.workOrder.flightPosition?{mapType:Ye(e).mapType,flightDetails:Ee(Ee({},qe(e)),{lat:e.workOrder.flightPosition.lastPositionLatitude||null,lng:e.workOrder.flightPosition.lastPositionLongitude||null,heading:e.workOrder.flightPosition.lastPositionHeading||0,waypoints:e.workOrder.flightPosition.waypoints||[]})}:Ye(e):(null===e||void 0===e?void 0:e.status.includes("Route"))?je(e):Ye(e)}var We=function(e){return{faFlightId:e.faFlightId,mapType:j,workOrderId:e.workOrder.id,flightDetails:Ee({},qe(e))}},Ye=function(e){return{mapType:j,flightDetails:Ee({},qe(e))}},je=function(e){return{faFlightId:e.faFlightId,mapType:Y}},qe=function(e){return{origin:{title:e.originAirport.airportName,lat:e.originAirport.lat,lng:e.originAirport.lng,code:e.originAirport.airportCode},destination:{title:e.destinationAirport.airportName,lat:e.destinationAirport.lat,lng:e.destinationAirport.lng,code:e.destinationAirport.airportCode},lat:null,lng:null,heading:null,waypoints:[]}};function Re(){var e="Date not found",t=(0,r.S6)((function(){return C.selectedFligth})),n=(0,r.S6)((function(){var e,n,r;return(null===(e=t.value)||void 0===e?void 0:e.actualOut)||(null===(n=t.value)||void 0===n?void 0:n.estimatedOut)||(null===(r=t.value)||void 0===r?void 0:r.scheduledOut)})),a=(0,r.S6)((function(){var e,n,r;return(null===(e=t.value)||void 0===e?void 0:e.actualIn)||(null===(n=t.value)||void 0===n?void 0:n.estimatedIn)||(null===(r=t.value)||void 0===r?void 0:r.scheduledIn)})),o=(0,r.S6)((function(){var e,n,r;return(null===(e=t.value)||void 0===e?void 0:e.actualOff)||(null===(n=t.value)||void 0===n?void 0:n.estimatedOff)||(null===(r=t.value)||void 0===r?void 0:r.scheduledOff)})),i=(0,r.S6)((function(){var e,n,r;return(null===(e=t.value)||void 0===e?void 0:e.actualOn)||(null===(n=t.value)||void 0===n?void 0:n.estimatedOn)||(null===(r=t.value)||void 0===r?void 0:r.scheduledOn)})),l=(0,r.S6)((function(){return Fe(t.value)})),s=(0,r.S6)((function(){var e=ze()(a.value).tz(t.value.destinationAirport.timezone),r=ze()(n.value).tz(t.value.originAirport.timezone),o=ze().duration(e.diff(r)),i=o.hours()||0,l=o.minutes()||0;return i>0&&l>0?"".concat(i," hour ").concat(l," minutes"):"".concat(i," hour")})),u=function(n,r){void 0===r&&(r="");var a=ze()(n).tz(t.value.destinationAirport.timezone);return a.isValid()?a.format(r):e},c=function(n,r){void 0===r&&(r="");var a=ze()(n).tz(t.value.originAirport.timezone);return a.isValid()?a.format(r):e},d=(0,r.S6)((function(){var e;return{min:0,max:(null===(e=t.value)||void 0===e?void 0:e.distancePercentageCovered)||0}})),m=(0,r.S6)((function(){var e,n=C.aircraftTypeList.find((function(e){var n;return e.model==(null===(n=t.value)||void 0===n?void 0:n.aircraftType)}));return n?"".concat(n.fullName," (").concat(n.description,")(").concat(n.model,")"):(null===(e=t.value)||void 0===e?void 0:e.aircraftType)||""})),f=(0,r.S6)((function(){var e,n=C.airlinesList.find((function(e){var n;return e.airlineIcaoCode==(null===(n=t.value)||void 0===n?void 0:n.operatorIcao)}));return n?"".concat(n.airlineName):(null===(e=t.value)||void 0===e?void 0:e.operatorIcao)||""})),p=(0,r.S6)((function(){return d.value.max>=100?P:U})),h=(0,r.S6)((function(){return{"--display-range":0===d.value.max?"none":"block"}})),g={minutesToHours:Qe,delay:Le,timezone:function(e){return void 0===e&&(e=null),e?ze().tz(e).format("z"):""}};return{methods:g,flight:t,standard:d,rightThumbColor:p,aircraftType:m,airlines:f,momentTimezone:ze(),dateDeparture:n,dateArrival:a,dateDepartureOff:o,dateArrivalOn:i,cssVars:h,wantedFlightCases:l,totalTravelTime:s,dateDestinationTimezone:u,dateOriginAirportTimezone:c,dateNotFound:e}}var Pe=n(22096),Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ue.apply(this,arguments)};const Ve=(0,r._M)({components:{flightMap:Pe["default"]},setup:function(){return Ue({},Re())}});var _e=n(68716),Be=n(51620),Ke=n(49541),He=n(95252),Ge=n.n(He);const Ze=(0,_e.c)(Ve,[["render",Se]]),Je=Ze;Ge()(Ve,"components",{QRange:Be.c,QSlider:Ke.c});var Xe=(0,r.QD)("div",{class:"tw-flex tw-border-b tw-border-gray-400 tw-items-end"},[(0,r.QD)("div",null,[(0,r.QD)("p",{class:"tw-text-2xl tw-font-semibold"},"Flight Details")]),(0,r.QD)("div",{class:"tw-ml-auto"},[(0,r.QD)("p",{class:"tw-text-xs tw-text-gray-400 tw-hidden"},"updated 46 seconds ago")])],-1),et={class:"tw-border tw-w-full tw-rounded-md tw-mx-1 tw-text-lg tw-mt-2"},tt=(0,r.QD)("div",{class:"tw-bg-gray-300 tw-p-3"}," Departure Times ",-1),nt={class:"tw-grid tw-grid-cols-2 tw-gap-4 tw-border-b tw-py-1"},rt={class:"tw-px-4"},at=(0,r.QD)("p",null,"Gate Departure",-1),ot={class:"tw-font-semibold"},it={class:"tw-text-xs"},lt={class:"tw-px-4"},st=(0,r.QD)("p",null,"Takeoff",-1),ut={class:"tw-font-semibold"},ct={class:"tw-text-xs"},dt=(0,r.QD)("div",{class:"tw-px-4 tw-text-sm tw-py-2 tw-hidden"},[(0,r.QD)("p",null,"Taxi Time: 14 minutes"),(0,r.QD)("p",null,"Average Delay: Less than 10 minutes")],-1),mt=(0,r.QD)("div",{class:"tw-bg-gray-300 tw-p-3"}," Arrival Times ",-1),ft={class:"tw-grid tw-grid-cols-2 tw-gap-4 tw-border-b tw-py-1"},pt={class:"tw-px-4"},ht=(0,r.QD)("p",null,"Landing",-1),gt={class:"tw-font-semibold"},yt={class:"tw-text-xs"},bt={class:"tw-px-4"},vt=(0,r.QD)("p",null,"Gate Arrival",-1),wt={class:"tw-font-semibold"},It={class:"tw-text-xs"},Dt=(0,r.QD)("div",{class:"tw-px-4 tw-text-sm tw-py-2 tw-hidden"},[(0,r.QD)("p",null,"Taxi Time: 6 minutes"),(0,r.QD)("p",null,"Average Delay: Less than 10 minutes")],-1),kt={class:"tw-py-4"},Mt=(0,r.QD)("div",{class:"tw-flex tw-border-b tw-border-gray-400 tw-items-end"},[(0,r.QD)("div",null,[(0,r.QD)("p",{class:"tw-text-2xl tw-font-semibold"},"Aircraft Details")]),(0,r.QD)("div",{class:"tw-ml-auto"},[(0,r.QD)("p",{class:"tw-text-xs tw-text-gray-400 tw-hidden"},"updated 46 seconds ago")])],-1),At={class:"tw-border tw-w-full tw-rounded-md tw-mx-1 tw-text-lg tw-mt-2"},xt=(0,r.QD)("div",{class:"tw-bg-gray-300 tw-p-3"}," Aircraft Information ",-1),Tt={class:"tw-border-b tw-py-1"},Nt={class:"tw-px-4"},St=(0,r.QD)("div",{class:"tw-bg-gray-300 tw-p-3"}," Airline Information ",-1),Ct={class:"tw-border-b tw-py-1"},zt={class:"tw-px-4"},Ot=(0,r.QD)("div",{class:"tw-bg-gray-300 tw-p-3 tw-hidden"}," Flight Data ",-1),$t=(0,r.QD)("div",{class:"tw-border-b tw-py-1 tw-hidden"},[(0,r.QD)("div",{class:"tw-px-4"},[(0,r.QD)("p",null,"Speed Filed: 560 mph graph"),(0,r.QD)("p",null,"Altitude Filed: 40,000 ft graph Distance"),(0,r.QD)("p",null,"Actual: 3,506 mi (Direct: 3,445 mi)"),(0,r.QD)("p",null,"Route: 5259N/05353W TOPPS ENE PARCH3")])],-1);function Qt(e,t,n,o,i,l){return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.QD)("div",null,[Xe,(0,r.QD)("div",et,[tt,(0,r.QD)("div",nt,[(0,r.QD)("div",rt,[at,(0,r.QD)("p",ot,[(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.dateDeparture).tz(e.flight.originAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.originAirport.timezone)),1)]),(0,r.QD)("p",it,[(0,r.mY)("Scheduled "),(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.flight.scheduledOut).tz(e.flight.originAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.originAirport.timezone)),1)])]),(0,r.QD)("div",lt,[st,(0,r.QD)("p",ut,[(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.dateDepartureOff).tz(e.flight.originAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.originAirport.timezone)),1)]),(0,r.QD)("p",ct,[(0,r.mY)(" Scheduled "),(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.flight.scheduledOff).tz(e.flight.originAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.originAirport.timezone)),1)])])]),dt,mt,(0,r.QD)("div",ft,[(0,r.QD)("div",pt,[ht,(0,r.QD)("p",gt,[(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.dateArrivalOn).tz(e.flight.destinationAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.destinationAirport.timezone)),1)]),(0,r.QD)("p",yt,[(0,r.mY)(" Scheduled "),(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.flight.scheduledOn).tz(e.flight.destinationAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.destinationAirport.timezone)),1)])]),(0,r.QD)("div",bt,[vt,(0,r.QD)("p",wt,[(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.dateArrival).tz(e.flight.destinationAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.destinationAirport.timezone)),1)]),(0,r.QD)("p",It,[(0,r.mY)("Scheduled "),(0,r.QD)("span",null,(0,a.WA)(e.momentTimezone(e.flight.scheduledIn).tz(e.flight.destinationAirport.timezone).format("hh:mm A"))+" "+(0,a.WA)(e.methods.timezone(e.flight.destinationAirport.timezone)),1)])])]),Dt])]),(0,r.QD)("div",kt,[Mt,(0,r.QD)("div",At,[xt,(0,r.QD)("div",Tt,[(0,r.QD)("div",Nt,[(0,r.QD)("p",null," Aircraft Type: "+(0,a.WA)(e.aircraftType),1)])]),St,(0,r.QD)("div",Ct,[(0,r.QD)("div",zt,[(0,r.QD)("p",null,"Airline: "+(0,a.WA)(e.airlines),1)])]),Ot,$t])])])}var Lt=function(){return Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Lt.apply(this,arguments)};const Et=(0,r._M)({setup:function(){return Lt({},Re())}}),Ft=(0,_e.c)(Et,[["render",Qt]]),Wt=Ft;var Yt=["innerHTML"],jt={key:1};function qt(e,t,n,a,o,i){var l=(0,r.E1)("q-td"),s=(0,r.E1)("q-tooltip"),u=(0,r.E1)("q-btn"),c=(0,r.E1)("q-table");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.K2)(c,{title:e.title,dense:"",rows:e.dataTable,columns:e.columns,"visible-columns":[""]},{"body-cell":(0,r.Ql)((function(e){return[(0,r.K2)(l,{props:e},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",{innerHTML:e.value},null,8,Yt)]})),_:2},1032,["props"])]})),"body-cell-workOrder":(0,r.Ql)((function(t){return[(0,r.K2)(l,{props:t},{default:(0,r.Ql)((function(){return[t.row.workOrder?((0,r.Wz)(),(0,r.Az)(u,{key:0,round:"",color:"primary",icon:"fa-light fa-briefcase",size:"sm",onClick:function(n){return e.redirect(t.row)}},{default:(0,r.Ql)((function(){return[(0,r.K2)(s,null,{default:(0,r.Ql)((function(){return[(0,r.mY)(" go to workOrder ")]})),_:1})]})),_:2},1032,["onClick"])):(0,r.g1)("",!0),t.row.workOrder?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("p",jt," - "))]})),_:2},1032,["props"])]})),_:1},8,["title","rows","columns"])])}function Rt(e){var t="Date not found",n=(0,r.S6)((function(){return e.showWorkOrderColumn})),a=(0,T.IL)([{name:"date",label:"Date",align:"left",field:function(e){return e},format:function(e){var n;return e.status.includes("Scheduled")&&(n=e.scheduledOut),e.status.includes("Route")&&(n=e.actualOut||e.estimatedOut||e.scheduledOut),e.status.includes("Arrived")&&(n=e.actualOut),ze()(n).tz(e.originAirport.timezone).format("dddd DD-MMM-YYYY")||t},required:!0},{name:"Departure",align:"left",label:"Departure",field:function(e){return e},format:function(e){var t=e.actualOut||e.estimatedOut||e.scheduledOut;return l(e.status,e.scheduledOut,t,e.actualOut,e.originAirport)},required:!0},{name:"arrival",label:"Arrival",field:function(e){return e},format:function(e){var t=e.actualIn||e.estimatedIn||e.scheduledIn;return l(e.status,e.scheduledIn,t,e.actualIn,e.destinationAirport)},required:!0},{name:"workOrder",label:"Work Order",field:"workOrderField",required:n.value},{name:"aircraft",label:"Aircraft",field:"aircraftType",required:!0},{name:"duration",label:"Duration",field:"timeTotalEstimated",format:function(e){return Qe(e||0)},required:!0}]),o=(0,r.S6)((function(){return e.title})),i=(0,r.S6)((function(){return e.dataTable}));function l(e,n,r,a,o){var i,l="",s=ze().tz(o.timezone).format("z");e.includes("Scheduled")&&(i=n),e.includes("Route")&&(i=r),e.includes("Arrived")&&(i=a);var u=ze()(i).tz(o.timezone);return l=u.isValid()?u.format("hh:mm A"):t,"".concat(l," ").concat(s," <br> ").concat(o.airportName," - ").concat(o.airportCode)}function s(e){B(e)}return{columns:a,title:o,dataTable:i,minutesToHours:Qe,redirect:s}}var Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Pt.apply(this,arguments)};const Ut=(0,r._M)({props:{title:{type:String,default:function(){return"Fly"}},dataTable:{type:Array,default:function(){return[]}},showWorkOrderColumn:{type:Boolean,default:function(){return!1}}},setup:function(e){return Pt({},Rt(e))}});var Vt=n(40792),_t=n(50213),Bt=n(99140),Kt=n(90111);const Ht=(0,_e.c)(Ut,[["render",qt]]),Gt=Ht;Ge()(Ut,"components",{QTable:Vt.c,QTd:_t.c,QBtn:Bt.c,QTooltip:Kt.c});var Zt=function(){return Zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zt.apply(this,arguments)};const Jt=(0,r._M)({props:{workOrderData:{type:Object,default:function(){return null}},isSearch:{type:Boolean,default:function(){return!0}}},components:{flightDetail:Je,timeCards:Wt,tableFlight:Gt},setup:function(e){return Zt({},Z(e))}});var Xt=n(65224),en=n(54420);const tn=(0,_e.c)(Jt,[["render",A]]),nn=tn;Ge()(Jt,"components",{QBtn:Bt.c,QBanner:Xt.c,QTooltip:Kt.c,QSpinnerDots:en.c})},74964:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(92444);const a={id:"pageId",class:"q-layout-page layout-padding location-form"},o={class:"relative-position q-mb-lg backend-page"},i={key:0,class:"box"},l={class:"col-12"},s={class:"row q-col-gutter-md"},u={class:"col-12 col-md-6"},c={class:"col-12 col-md-6"},d={class:"col-12"},m={class:"row q-col-gutter-md"},f={class:"col-12 col-sm-6"},p={class:"col-12 col-sm-6"};function h(e,t,h,g,y,b){const v=(0,r.E1)("locales"),w=(0,r.E1)("q-input"),I=(0,r.E1)("crud"),D=(0,r.E1)("q-btn"),k=(0,r.E1)("q-page-sticky"),M=(0,r.E1)("q-form"),A=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",a,[(0,r.QD)("div",o,[y.success?((0,r.Wz)(),(0,r.An)("div",i,[(0,r.QD)("div",l,[(0,r.K2)(v,{modelValue:y.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>y.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),y.locale.success?((0,r.Wz)(),(0,r.Az)(M,{key:0,autocorrect:"off",autocomplete:"off",ref:"formContent",class:"full-width q-my-sm",onSubmit:t[6]||(t[6]=e=>y.itemId?b.updateItem():b.createItem()),onValidationError:t[7]||(t[7]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[(0,r.QD)("div",s,[(0,r.QD)("div",u,[(0,r.K2)(w,{outlined:"",dense:"",modelValue:y.locale.formTemplate.name,"onUpdate:modelValue":t[1]||(t[1]=e=>y.locale.formTemplate.name=e),label:`${e.$tr("isite.cms.form.name")} (${y.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,r.QD)("div",c,[(0,r.K2)(w,{outlined:"",dense:"",modelValue:y.locale.formTemplate.code,"onUpdate:modelValue":t[2]||(t[2]=e=>y.locale.formTemplate.code=e),label:`${e.$tr("ilocations.cms.form.code")} (${y.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,r.QD)("div",d,[(0,r.QD)("div",m,[(0,r.QD)("div",f,[(0,r.K2)(I,{ref:"countries","crud-data":n.e(8488).then(n.bind(n,68488)),modelValue:y.locale.formTemplate.countryId,"onUpdate:modelValue":[t[3]||(t[3]=e=>y.locale.formTemplate.countryId=e),t[4]||(t[4]=()=>{y.locale.formTemplate.countryId&&e.$refs.provinces.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.country")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"}}},null,8,["crud-data","modelValue","crud-props"])]),(0,r.QD)("div",p,[(0,r.K2)(I,{ref:"provinces","crud-data":n.e(5972).then(n.bind(n,95972)),modelValue:y.locale.formTemplate.provinceId,"onUpdate:modelValue":t[5]||(t[5]=e=>y.locale.formTemplate.provinceId=e),type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.province")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"},requestParams:{filter:{country:y.locale.formTemplate.countryId}}}},null,8,["crud-data","modelValue","crud-props","config"])])])])]),(0,r.K2)(k,{position:"bottom-right",offset:[18,18]},{default:(0,r.Ql)((()=>[e.$route.params.id?((0,r.Wz)(),(0,r.Az)(D,{key:0,color:"positive",loading:y.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit"},null,8,["loading","label"])):((0,r.Wz)(),(0,r.Az)(D,{key:1,color:"positive",loading:y.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit"},null,8,["loading","label"]))])),_:1})])),_:1},512)):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.K2)(A,{visible:y.loading},null,8,["visible"])])])}n(23816);const g={components:{},watch:{$route(e,t){this.initForm(!0)}},mounted(){this.$nextTick((function(){this.initForm()}))},data(){return{locale:{},loading:!1,countryLoading:!1,provinceLoading:!1,success:!1,itemId:!1}},props:{id:{default:null}},computed:{dataLocale(){return{fields:{code:"",countryId:null,provinceId:null},fieldsTranslatable:{name:""}}}},methods:{async initForm(e=!1){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=null!==this.id?this.id:this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(e),this.success=!0,this.loading=!1},getData(e=!1){return new Promise(((t,n)=>{const r=this.$clone(this.itemId);if(r){let a="apiRoutes.qlocations.cities",o={refresh:e,params:{include:"province,country",filter:{allTranslations:!0}}};this.$crud.show(a,r,o).then((e=>{this.orderDataItemToLocale(e.data),this.locale.form.provinceId=parseInt(e.data.provinceId),this.getProvinces(),t(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,n(!1)}))}))}else t(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.cities";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.$router.push({name:"qlocations.admin.cities.index"}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.cities";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var y=n(68716),b=n(41628),v=n(14288),w=n(20540),I=n(60352),D=n(99140),k=n(95252),M=n.n(k);const A=(0,y.c)(g,[["render",h]]),x=A;M()(g,"components",{QLayout:b.c,QForm:v.c,QInput:w.c,QPageSticky:I.c,QBtn:D.c})},79792:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(92444),a=n(74044);const o={id:"pageId",class:"q-layout-page layout-padding location-form"},i={class:"relative-position q-mb-lg backend-page"},l={key:0,class:"box"},s={class:"col-12"},u={class:"row q-col-gutter-md"},c={class:"col-12 col-md-6"},d={class:"col-12 col-md-6"},m={class:"col-12 col-md-6"},f={class:"col-12 col-md-6"},p={class:"row q-col-gutter-md"},h={class:"col-8 col-md-10"},g={class:"col-4 col-md-2 text-right"};function y(e,t,y,b,v,w){const I=(0,r.E1)("locales"),D=(0,r.E1)("q-input"),k=(0,r.E1)("crud"),M=(0,r.E1)("q-tooltip"),A=(0,r.E1)("q-btn"),x=(0,r.E1)("q-page-sticky"),T=(0,r.E1)("q-form"),N=(0,r.E1)("inner-loading"),S=(0,r.E1)("q-toolbar-title"),C=(0,r.E1)("q-toolbar"),z=(0,r.E1)("cityForm"),O=(0,r.E1)("q-card-section"),$=(0,r.E1)("q-card"),Q=(0,r.E1)("q-dialog"),L=(0,r.iS)("close-popup");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[v.success?((0,r.Wz)(),(0,r.An)("div",l,[(0,r.QD)("div",s,[(0,r.K2)(I,{modelValue:v.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>v.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),v.locale.success?((0,r.Wz)(),(0,r.Az)(T,{key:0,autocorrect:"off",autocomplete:"off",ref:"formContent",class:"full-width q-my-sm",onSubmit:t[8]||(t[8]=e=>v.itemId?w.updateItem():w.createItem()),onValidationError:t[9]||(t[9]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[(0,r.QD)("div",u,[(0,r.QD)("div",c,[(0,r.K2)(D,{outlined:"",dense:"",modelValue:v.locale.formTemplate.name,"onUpdate:modelValue":t[1]||(t[1]=e=>v.locale.formTemplate.name=e),label:`${e.$tr("isite.cms.form.name")} (${v.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,r.QD)("div",d,[(0,r.K2)(k,{ref:"countries","crud-data":n.e(8488).then(n.bind(n,68488)),modelValue:v.locale.formTemplate.countryId,"onUpdate:modelValue":[t[2]||(t[2]=e=>v.locale.formTemplate.countryId=e),t[3]||(t[3]=()=>{v.locale.formTemplate.countryId&&e.$refs.provinces.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.country")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"}}},null,8,["crud-data","modelValue","crud-props"])]),(0,r.QD)("div",m,[(0,r.K2)(k,{ref:"provinces","crud-data":n.e(5972).then(n.bind(n,95972)),modelValue:v.locale.formTemplate.provinceId,"onUpdate:modelValue":[t[4]||(t[4]=e=>v.locale.formTemplate.provinceId=e),t[5]||(t[5]=()=>{v.locale.formTemplate.provinceId&&e.$refs.cities.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.province")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"},requestParams:{filter:{country:v.locale.formTemplate.countryId}}}},null,8,["crud-data","modelValue","crud-props","config"])]),(0,r.QD)("div",f,[(0,r.QD)("div",p,[(0,r.QD)("div",h,[(0,r.K2)(k,{ref:"cities","crud-data":n.e(6576).then(n.bind(n,76576)),modelValue:v.locale.formTemplate.cityId,"onUpdate:modelValue":t[6]||(t[6]=e=>v.locale.formTemplate.cityId=e),type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.city")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},"custom-data":{create:!1},config:{options:{label:"name",value:"id"},requestParams:{filter:{province_id:v.locale.formTemplate.provinceId}}}},null,8,["crud-data","modelValue","crud-props","config"])]),(0,r.QD)("div",g,[(0,r.K2)(A,{size:"sm",class:"btn-small",color:"green",icon:"fas fa-plus",onClick:t[7]||(t[7]=e=>v.showCityCreate=!0)},{default:(0,r.Ql)((()=>[(0,r.K2)(M,{offset:[10,10]},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(e.$tr("ilocations.cms.newCity")),1)])),_:1})])),_:1})])])])]),(0,r.K2)(x,{position:"bottom-right",offset:[18,18]},{default:(0,r.Ql)((()=>[e.$route.params.id?((0,r.Wz)(),(0,r.Az)(A,{key:0,color:"green",loading:v.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit"},null,8,["loading","label"])):((0,r.Wz)(),(0,r.Az)(A,{key:1,color:"green",loading:v.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit"},null,8,["loading","label"]))])),_:1})])),_:1},512)):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.K2)(N,{visible:v.loading},null,8,["visible"])]),v.showCityCreate?((0,r.Wz)(),(0,r.Az)(Q,{key:0,"content-class":"modal-form-crud",modelValue:v.showCityCreate,"onUpdate:modelValue":t[10]||(t[10]=e=>v.showCityCreate=e),onHide:e.getCities,"no-esc-dismiss":"","no-backdrop-dismiss":""},{default:(0,r.Ql)((()=>[(0,r.K2)($,{class:"bg-grey-1 backend-page row",style:{"max-width":"80vw!important"}},{default:(0,r.Ql)((()=>[(0,r.K2)(C,{class:"bg-primary text-white"},{default:(0,r.Ql)((()=>[(0,r.K2)(S,null,{default:(0,r.Ql)((()=>[(0,r.QD)("label",null,(0,a.WA)(e.$tr("ilocations.cms.newCity")),1)])),_:1}),(0,r.wt)((0,r.K2)(A,{flat:"",icon:"fas fa-times"},null,512),[[L]])])),_:1}),(0,r.K2)(O,{class:"relative-position col-12"},{default:(0,r.Ql)((()=>[(0,r.K2)(z,{id:!1})])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])):(0,r.g1)("",!0)])}n(23816);var b=n(74964);const v={components:{cityForm:b["default"]},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((function(){this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,showCityCreate:!1}},props:{id:{default:null}},computed:{dataLocale(){return{fields:{code:"",countryId:null,provinceId:null,cityId:null},fieldsTranslatable:{name:""}}}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=null!==this.id?this.id:this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),this.getCountries(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const n=this.$clone(this.itemId);if(n){let r="apiRoutes.qlocations.neighborhoods",a={refresh:!0,params:{include:"city",filter:{allTranslations:!0}}};this.$crud.show(r,n,a).then((t=>{this.orderDataItemToLocale(t.data),this.locale.form.countryId=parseInt(t.data.city.countryId),this.locale.form.provinceId=parseInt(t.data.city.provinceId),this.locale.form.cityId=parseInt(t.data.cityId),this.getProvinces(),this.getCities(),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.neighborhoods";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.neighborhoods";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.$router.push({name:"qlocations.admin.neighborhoods.index"}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var w=n(68716),I=n(41628),D=n(14288),k=n(20540),M=n(99140),A=n(90111),x=n(60352),T=n(30852),N=n(70608),S=n(6536),C=n(36524),z=n(71008),O=n(81020),$=n(95252),Q=n.n($);const L=(0,w.c)(v,[["render",y]]),E=L;Q()(v,"components",{QLayout:I.c,QForm:D.c,QInput:k.c,QBtn:M.c,QTooltip:A.c,QPageSticky:x.c,QDialog:T.c,QCard:N.c,QToolbar:S.c,QToolbarTitle:C.c,QCardSection:z.c}),Q()(v,"directives",{ClosePopup:O.c})},75952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(92444),a=n(74044);const o={id:"pageId",class:"q-layout-page layout-padding"},i={class:"relative-position q-mb-lg backend-page"},l={key:0,class:"box"},s={class:"col-12"},u={class:"row q-col-gutter-md"},c={class:"col-12"},d={class:"input-title"},m={class:"col-12"};function f(e,t,n,f,p,h){const g=(0,r.E1)("locales"),y=(0,r.E1)("q-input"),b=(0,r.E1)("q-editor"),v=(0,r.E1)("q-field"),w=(0,r.E1)("dynamic-field"),I=(0,r.E1)("q-btn"),D=(0,r.E1)("q-page-sticky"),k=(0,r.E1)("q-form"),M=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[p.success?((0,r.Wz)(),(0,r.An)("div",l,[(0,r.QD)("div",s,[(0,r.K2)(g,{modelValue:p.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>p.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),p.locale.success?((0,r.Wz)(),(0,r.Az)(k,{key:0,autocorrect:"off",autocomplete:"off",ref:"formContent",class:"full-width q-my-sm",onSubmit:t[6]||(t[6]=e=>p.itemId?h.updateItem():h.createItem()),onValidationError:t[7]||(t[7]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[(0,r.QD)("div",u,[(0,r.QD)("div",c,[(0,r.K2)(y,{outlined:"",dense:"",modelValue:p.locale.formTemplate.name,"onUpdate:modelValue":t[1]||(t[1]=e=>p.locale.formTemplate.name=e),label:`${e.$tr("isite.cms.form.name")} (${p.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"]),(0,r.QD)("div",d,(0,a.WA)(`${e.$tr("isite.cms.form.description")} (${p.locale.language})*`),1),(0,r.K2)(v,{borderless:"",modelValue:p.locale.formTemplate.description,"onUpdate:modelValue":t[3]||(t[3]=e=>p.locale.formTemplate.description=e),rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},{default:(0,r.Ql)((()=>[(0,r.K2)(b,{class:"full-width",modelValue:p.locale.formTemplate.description,"onUpdate:modelValue":t[2]||(t[2]=e=>p.locale.formTemplate.description=e)},null,8,["modelValue"])])),_:1},8,["modelValue","rules"])]),(0,r.QD)("div",m,[(0,r.K2)(w,{modelValue:p.modelMap,"onUpdate:modelValue":[t[4]||(t[4]=e=>p.modelMap=e),t[5]||(t[5]=e=>p.locale.formTemplate.points=e.points)],class:"q-mb-md",field:p.mapField},null,8,["modelValue","field"])])]),(0,r.K2)(D,{position:"bottom-right",offset:[18,18]},{default:(0,r.Ql)((()=>[e.$route.params.id?((0,r.Wz)(),(0,r.Az)(I,{key:0,color:"green",loading:p.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit"},null,8,["loading","label"])):((0,r.Wz)(),(0,r.Az)(I,{key:1,color:"green",loading:p.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit"},null,8,["loading","label"]))])),_:1})])),_:1},512)):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.K2)(M,{visible:p.loading},null,8,["visible"])])])}n(23816);const p={components:{},mounted(){this.$nextTick((function(){this.initForm()}))},data(){return{locale:{fields:{points:[],options:{}},fieldsTranslatable:{name:"",description:""}},modelMap:{},loading:!1,success:!1,itemId:!1,mapField:{type:"positionMarkerMap",help:{description:this.$tr("icommerce.cms.form.mapHelp")},required:!1,isFakeField:!1,props:{polygonControls:!0}}}},props:{id:{default:null}},computed:{token(){this.$getSetting("isite::api-maps")}},methods:{async initForm(){this.loading=!0,this.success=!1,this.itemId=null!==this.id?this.id:this.$route.params.id,await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const n=this.$clone(this.itemId);if(n){let r="apiRoutes.qlocations.polygons",a={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(r,n,a).then((t=>{this.locale.form=this.$clone(t.data),this.modelMap.points=this.$clone(t.data.points),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.polygons";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.polygons";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.$router.push({name:"qlocations.admin.polygons.index"}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e}}};var h=n(68716),g=n(41628),y=n(14288),b=n(20540),v=n(69452),w=n(85664),I=n(60352),D=n(99140),k=n(95252),M=n.n(k);const A=(0,h.c)(p,[["render",f]]),x=A;M()(p,"components",{QLayout:g.c,QForm:y.c,QInput:b.c,QField:v.c,QEditor:w.c,QPageSticky:I.c,QBtn:D.c})},46846:(e,t,n)=>{"use strict";n.d(t,{c:()=>S});var r=n(92444),a=n(74044),o=n(264),i={class:"flex flex-center notification-notification-icon-small tw-w-12 tw-h-12 tw-bg-gray-100 tw-rounded-lg"},l={class:"tw-text-base tw-leading-4 text-weight-bold"},s=["innerHTML"],u={class:"tw-text-[13px] tw-leading-[13px] text-grey-7"},c={class:"notification-unread"};function d(e,t,n,d,m,f){var p=(0,r.E1)("q-icon"),h=(0,r.E1)("q-item-section"),g=(0,r.E1)("q-item-label"),y=(0,r.E1)("q-tooltip"),b=(0,r.E1)("q-badge"),v=(0,r.E1)("q-btn"),w=(0,r.E1)("q-item");return(0,r.Wz)(),(0,r.Az)(w,{clickable:"",dense:"",class:"q-pt-sm q-my-sm q-px-sm",onClick:t[1]||(t[1]=function(t){return e.openModal()})},{default:(0,r.Ql)((function(){return[(0,r.K2)(h,{avatar:"",top:""},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",i,[(0,r.K2)(p,{name:e.iconName,style:(0,a.MN)({color:e.iconColor,fontSize:"20px"})},null,8,["name","style"])])]})),_:1}),(0,r.K2)(h,{top:""},{default:(0,r.Ql)((function(){return[(0,r.K2)(g,{lines:"1",class:"tw-m-0 tw-mb-0.5"},{default:(0,r.Ql)((function(){return[(0,r.QD)("span",l,(0,a.WA)(e.notification.title),1)]})),_:1}),(0,r.K2)(g,{lines:"2",class:"tw-m-0 tw-mb-1"},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",{class:"text-body2 tw-leading-[18px]",innerHTML:e.notification.message},null,8,s)]})),_:1}),(0,r.K2)(g,{caption:"",class:"no-margin"},{default:(0,r.Ql)((function(){return[(0,r.QD)("span",u,[(0,r.mY)((0,a.WA)(e.notification.timeAgo)+" ",1),(0,r.K2)(y,{anchor:"bottom end",self:"center right"},{default:(0,r.Ql)((function(){return[(0,r.mY)((0,a.WA)(e.notification.createdAt),1)]})),_:1})])]})),_:1})]})),_:1}),(0,r.K2)(h,{side:"",top:""},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",c,[e.isUnread?((0,r.Wz)(),(0,r.Az)(b,{key:0,color:e.notification.isImportant?"orange":"blue",rounded:""},null,8,["color"])):(0,r.g1)("",!0),e.isUnread&&e.showMarkAsRead?((0,r.Wz)(),(0,r.Az)(v,{key:1,class:"notification-mark-as-read",rounded:"",dense:"",unelevated:"","no-caps":"",size:"md",onClick:t[0]||(t[0]=(0,o.Y7)((function(t){return e.markAsReadHandler()}),["stop"])),label:e.$tr("notification.cms.markAsRead"),loading:e.loading},null,8,["label","loading"])):(0,r.g1)("",!0)])]})),_:1})]})),_:1})}var m=n(75836),f=n(17072),p=n(62792),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)};function g(e,t){var n={},a=(0,m.cB)({loading:!1,notification:e.itemNotification}),o={isUnread:(0,r.S6)((function(){return!a.notification.isRead})),iconName:(0,r.S6)((function(){var t;return e.sourceSettings[null===(t=e.itemNotification)||void 0===t?void 0:t.source]?e.sourceSettings[e.itemNotification.source].icon:"fa-light fa-bell"})),iconColor:(0,r.S6)((function(){var t;return e.sourceSettings[null===(t=e.itemNotification)||void 0===t?void 0:t.source]?e.sourceSettings[e.itemNotification.source].color:"#2196f3"}))},i={markAsRead:function(){return a.notification.isRead=!0,t("read"),new Promise((function(e,t){p.c.markAsRead(a.notification.id).then((function(t){e(a.notification)})).catch((function(e){f.c.handleError(e,(function(){a.notification.isRead=!1,a.loading=!1}))}))}))},openModal:function(){t("openModal",a.notification),o.isUnread.value&&i.markAsRead()},markAsReadHandler:function(){a.loading=!0,i.markAsRead().then((function(){a.loading=!1}))}};return(0,r.u2)((function(){})),(0,r.Kg)((function(){return e.itemNotification}),(function(e){a.notification=e})),h(h(h(h({},n),(0,m.kx)(a)),o),i)}const y=(0,r._M)({props:{itemNotification:{default:{}},sourceSettings:{default:[]},showMarkAsRead:{default:!1}},components:{},emits:["read","openModal"],setup:function(e,t){var n=t.emit;return g(e,n)}});var b=n(68716),v=n(84884),w=n(11032),I=n(58120),D=n(2992),k=n(90111),M=n(29104),A=n(99140),x=n(95252),T=n.n(x);const N=(0,b.c)(y,[["render",d]]),S=N;T()(y,"components",{QItem:v.c,QItemSection:w.c,QIcon:I.c,QItemLabel:D.c,QTooltip:k.c,QBadge:M.c,QBtn:A.c})},62520:(e,t,n)=>{"use strict";n.d(t,{c:()=>T});var r=n(92444);const a={class:"tw-w-full tw-mb-10 tw-mt-5"},o={class:"tw-px-6 tw-mb-8"},i={key:0,class:"tw-px-6"},l={class:"row"};function s(e,t,n,s,u,c){const d=(0,r.E1)("delayForm"),m=(0,r.E1)("q-toggle"),f=(0,r.E1)("q-btn"),p=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",a,[(0,r.K2)(d),(0,r.QD)("div",o,[(0,r.K2)(m,{modelValue:e.delay,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.delay=t),e.resetDelayList],color:"primary",label:"Delay"},null,8,["modelValue","onUpdate:modelValue"]),e.delay?((0,r.Wz)(),(0,r.Az)(f,{key:0,class:"q-ml-sm",flat:"",round:"",icon:"fa-light fa-plus",color:"primary",onClick:t[1]||(t[1]=t=>e.addDelay())})):(0,r.g1)("",!0)]),e.delay?((0,r.Wz)(),(0,r.An)("div",i,[(0,r.QD)("div",l,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.delayFields,((t,n)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:n},[(0,r.K2)(p,{class:"col-12 col-md-5 q-pr-sm",field:t,modelValue:e.delayList[n.includes("code")?n.split("code")[1]:n.split("hours")[1]][n.includes("code")?"code":"hours"],"onUpdate:modelValue":t=>e.delayList[n.includes("code")?n.split("code")[1]:n.split("hours")[1]][n.includes("code")?"code":"hours"]=t},null,8,["field","modelValue","onUpdate:modelValue"]),"select"!==t.type?((0,r.Wz)(),(0,r.Az)(f,{key:0,style:{width:"40px",height:"38px"},class:"col-12 btn-stick col-md-1",round:"",icon:"fa-light fa-trash-can",flat:"",size:"12px",color:"primary",onClick:t=>e.delDelay(n)},null,8,["onClick"])):(0,r.g1)("",!0)],64)))),128))])])):(0,r.g1)("",!0)])}n(23816);var u=n(12836),c=n(36852),d=n(30152),m=n(86284),f={class:"tw-grid tw-grid-cols-2 tw-gap-4 tw-px-6"};function p(e,t,n,a,o,i){var l=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",f,[(0,r.K2)(l,{field:e.fields.ourDelay,modelValue:e.ourDelay,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.ourDelay=t})},null,8,["field","modelValue"]),(0,r.K2)(l,{field:e.fields.delayComment,modelValue:e.delayComment,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.delayComment=t})},null,8,["field","modelValue"])])}const h=(0,r._M)({setup:function(){var e=(0,r.S6)((function(){return{ourDelay:{value:null,type:"select",props:{label:"Our delay",sortOptions:!1,options:[{label:"Yes",value:"1"},{label:"No",value:"2"},{label:"Partial",value:"3"}]}},delayComment:{value:null,type:"input",props:{label:"Delay Comment",type:"textarea"}}}})),t=(0,r.S6)({get:function(){return(0,u.c)().getOurDelay()},set:function(e){(0,u.c)().setOurDelay(e)}}),n=(0,r.S6)({get:function(){return(0,u.c)().getDelayComment()},set:function(e){(0,u.c)().setDelayComment(e)}});return{fields:e,ourDelay:t,delayComment:n}}});var g=n(68716);const y=(0,g.c)(h,[["render",p]]),b=y;var v=n(8932),w=n(20584);const I=(0,r._M)({components:{delayForm:b},setup(){const e=(0,r.S6)((()=>(0,d.c)().disabledReadonly())),t=(0,r.S6)((()=>(0,d.c)().getIsPassenger())),n=(0,r.S6)({get(){return(0,u.c)().getDelay()},set(e){(0,u.c)().setDelay(e)}}),a=(0,r.S6)((()=>(0,u.c)().getDelayList())),o=(0,r.S6)((()=>t.value?m.mI:m.wz)),i=(0,r.S6)((()=>{const t={};return a.value.forEach(((n,r)=>{t["code"+r]={value:n.code,type:"select",props:{options:(0,c["default"])().getWorkOrderDelays(),readonly:e.value,label:v._s.tr("icommerce.cms.sidebar.code"),clearable:!0,color:"primary","hide-bottom-space":!1},label:v._s.tr("icommerce.cms.sidebar.code")},t["hours"+r]={value:n.hours,type:"inputStandard",props:{hint:"Enter the Time in minutes",mask:"###################",readonly:e.value,label:v._s.tr("isite.cms.label.time"),clearable:!0,color:"primary","hide-bottom-space":!1},label:v._s.tr("isite.cms.label.time")}})),t}));function l(e){const t=parseInt(e.slice(-1));a.value.splice(t,1)}function s(){n.value||(a.value=[])}function f(){a.value.push({code:"",hours:""})}function p(){const e="apiRoutes.qramp.workOrderDelays",t={refresh:!0,params:{filter:{companyId:o.value}}};w.c.index(e,t).then((e=>{const t=e.data||[],n=t.map((e=>({id:e.id,label:e.name,value:e.name})));(0,c["default"])().setWorkOrderDelays(n)})).catch((e=>{(0,c["default"])().setWorkOrderDelays([]),console.log("ERROR WHILE OBTAINING THE LIST OF CODES:",e)}))}return(0,r.u2)((()=>{p(),n.value=a.value.length>0})),{delayFields:i,delayList:a,delDelay:l,delay:n,resetDelayList:s,getCodeList:p,addDelay:f}}});var D=n(64640),k=n(99140),M=n(95252),A=n.n(M);const x=(0,g.c)(I,[["render",s]]),T=x;A()(I,"components",{QToggle:D.c,QBtn:k.c})},78944:(e,t,n)=>{"use strict";n.d(t,{c:()=>M});var r=n(92444),a=n(74044),o={class:"row cursor-pointer"},i={class:"q-pr-md"},l={class:"q-py-xs"},s={class:"cursor-pointer"};function u(e,t,n,u,c,d){var m=(0,r.E1)("dynamic-field"),f=(0,r.E1)("q-btn");return(0,r.Wz)(),(0,r.An)("div",null,[e.state.bannerMessage?((0,r.Wz)(),(0,r.Az)(m,{key:0,class:"q-mb-md",field:e.fields.banner},null,8,["field"])):(0,r.g1)("",!0),(0,r.K2)(m,{field:e.fields.customerId,modelValue:e.state.selectCustomers,"onUpdate:modelValue":[t[1]||(t[1]=function(t){return e.state.selectCustomers=t}),e.setCustomer],onFilter:e.setCustomerName},(0,r.QP)({_:2},[e.addNewOptions?{name:"before-options",fn:(0,r.Ql)((function(){return[(0,r.QD)("div",{class:"q-py-md q-px-md",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.addCustumers&&e.addCustumers.apply(e,t)})},[(0,r.QD)("div",o,[(0,r.QD)("div",i,[(0,r.K2)(f,{push:"",color:"primary",round:"",icon:"fas fa-plus",size:"xs"})]),(0,r.QD)("div",l,[(0,r.QD)("label",s,(0,a.WA)(e.$tr("ifly.cms.label.createNewCustomer")),1)])])])]})),key:"0"}:void 0]),1032,["field","modelValue","onUpdate:modelValue","onFilter"])])}var c=n(75836),d=n(30152),m=n(36852),f=n(8932),p=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function g(e){var t=this,n=(0,r.S6)((function(){return e.dataForm})),a=(0,r.S6)((function(){return e.addNewOptions})),o=(0,r.S6)((function(){return e.readonly})),i=(0,c.cB)({newCustumerAdHoc:[],bannerMessage:null,customerName:"",selectCustomers:""}),l=(0,r.S6)((function(){return{banner:{type:"banner",props:{color:"info",icon:"fas fa-exclamation-triangle",message:i.bannerMessage}},customerId:{value:"",type:"select",help:{description:'You can add a new customer to the list if it\'s not available. Type the Customer Name and click on "Create new customer". The Work Order will be created as Ad-Hoc.'},props:{rules:[function(e){return!!e||f._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(f._s.tr("ifly.cms.form.customer")),clearable:!0,color:"primary","hide-bottom-space":!1,emitValue:!1,options:i.newCustumerAdHoc,readonly:o.value},loadOptions:{delayed:(0,m["default"])().getCustomerWithContract},label:f._s.tr("ifly.cms.form.customer")}}}));function s(){if(""!==i.customerName){var e="customer-".concat((0,d.c)().numberInRange(8e3,1e3));return i.newCustumerAdHoc=[{id:e,label:i.customerName,value:i.customerName}],i.bannerMessage=f._s.tr("ifly.cms.message.requestNewCustomer"),i.selectCustomers={id:e,value:i.customerName,label:i.customerName},a.value&&(n.value.customCustomerName=i.customerName),n.value.customerId=null,n.value.contractId=null,void(i.customerName="")}f.Qb.error({message:f._s.tr("ifly.cms.message.orderaddNewrecord")})}function u(){var e=null===i.selectCustomers||void 0===i.selectCustomers||""===i.selectCustomers?{}:i.selectCustomers;if(a.value){var t=e.label||null;n.value.customCustomerName=n.value.customerId?null:t}n.value.customerId=e.id||null,n.value.contractId=e.contractId||null;var r=null;Object.keys(e).length>0&&(r=n.value.contractId?"".concat(f._s.tr("ifly.cms.message.selectedCustomerWithContract")):f._s.tr("ifly.cms.message.selectedCustomerWithoutContract")),i.bannerMessage=e&&!n.value.contractId?r:null}function g(e){i.customerName=e||""}function y(){return p(this,void 0,Promise,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=(0,m["default"])().getCustomerWithContractLists().find((function(e){return n.value.customerId&&n.value.contractId?e.id==n.value.customerId&&e.contractId==n.value.contractId:n.value.customerId&&!n.value.contractId?e.id==n.value.customerId&&null==e.contractId:void 0}))||null,e&&e.label&&(i.selectCustomers=e),[4,u()];case 1:return t.sent(),[2]}}))}))}function b(){i.selectCustomers="",i.newCustumerAdHoc=[],i.bannerMessage=null,i.customerName=""}return(0,r.Kg)(n,(function(e,n){return p(t,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return e.sent(),[2]}}))}))}),{deep:!0}),(0,r.u2)((function(){return p(t,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return e.sent(),[2]}}))}))})),{fields:l,state:i,addCustumers:s,setCustomerName:g,setCustomer:u,reset:b}}var y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)};const b=(0,r._M)({props:{dataForm:{type:Object,default:{}},addNewOptions:{type:Boolean,default:function(){return!0}},readonly:{type:Boolean,default:function(){return!1}}},setup:function(e){return y({},g(e))}});var v=n(68716),w=n(99140),I=n(95252),D=n.n(I);const k=(0,v.c)(b,[["render",u]]),M=k;D()(b,"components",{QBtn:w.c})},6012:(e,t,n)=>{"use strict";n.d(t,{c:()=>Be});var r=n(92444);function a(e,t,n,a,o,i){const l=(0,r.E1)("stepper-ramp-form"),s=(0,r.E1)("simpleWorkOrders"),u=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.K2)(u,(0,r.Gu)({id:"formRampComponent",modelValue:o.show,"onUpdate:modelValue":t[3]||(t[3]=e=>o.show=e)},o.modalProps,{persistent:!0,loading:o.loading,onHide:i.clear,actions:i.actions,width:o.modalProps.width,maximized:e.$q.screen.lt.md}),{default:(0,r.Ql)((()=>[o.modalProps.update?((0,r.Wz)(),(0,r.Az)(l,{key:0,onSp:t[0]||(t[0]=e=>o.sp=e),onLoading:i.setLoading,ref:"stepper",steps:i.steppers,data:o.modalProps,onCloseModal:t[1]||(t[1]=e=>i.close(e)),onGetWorkOrders:i.getWorkOrders},null,8,["onLoading","steps","data","onGetWorkOrders"])):(0,r.g1)("",!0),o.modalProps.update?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(s,{key:1,ref:"simpleWorkOrder",onLoading:i.setLoading,onRefreshData:t[2]||(t[2]=t=>e.$emit("refresh-data"))},null,8,["onLoading"]))])),_:1},16,["modelValue","loading","onHide","actions","width","maximized"])])}const o={id:"stepComponent",class:"bg-white dynamicComponent stepper-modal"};function i(e,t,n,a,i,l){const s=(0,r.E1)("q-step"),u=(0,r.E1)("q-stepper");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.K2)(u,{modelValue:i.sp,"onUpdate:modelValue":t[2]||(t[2]=e=>i.sp=e),ref:"stepper","header-nav":"","alternative-labels":"",animated:"",contracted:e.$q.screen.lt.md,"keep-alive":"","active-icon":"none"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(n.steps,((e,n)=>((0,r.Wz)(),(0,r.Az)(s,{key:n,name:n+1,title:e.title,icon:e.icon,"active-color":i.error?"red":"primary",flat:""},{default:(0,r.Ql)((()=>[((0,r.Wz)(),(0,r.Az)((0,r.mk)(e.component),{ref_for:!0,ref:e.ref,onIsError:t[0]||(t[0]=e=>i.error=e),dataCompoment:e.form||null,readonly:i.readonly,onSendInfo:t[1]||(t[1]=e=>l.sendInfo())},null,40,["dataCompoment","readonly"]))])),_:2},1032,["name","title","icon","active-color"])))),128))])),_:1},8,["modelValue","contracted"])])}n(33368),n(35864);var l=n(42648),s=n(86284),u=n(30152),c=n(6472),d=n(12836),m=n(76719),f=n(8932),p=n(36852);const h={name:"stepperRampForm",components:{},mixins:[l.c],props:{steps:{},data:{}},emits:["sp","close","close-modal","loading","getWorkOrders"],data(){return{readonly:!1,form:{},error:!1,sp:1,STEP_FLIGHT:s.ey,STEP_SERVICE:s.uS,STEP_REMARKS:s.DF,STEP_SIGNATURE:s.YD,disabled:!1}},inject:["disabledReadonly"],mounted(){this.$nextTick((function(){this.init()}))},watch:{async sp(e,t){await this.saveFormData(t,!0),this.$emit("sp",e)}},computed:{isAppOffline(){return this.$store.state.qofflineMaster.isAppOffline},isPassenger(){return(0,u.c)().getIsPassenger()},filterBusinessUnit(){return this.isPassenger?s.GK:s.Ih},filterCompany(){return this.isPassenger?s.mI:s.wz},stepError:{get(){return this.error},set(e){this.error=e}}},methods:{init(){this.$emit("sp",this.sp)},parseDateOfflineWO(e){if(!e&&!e?.includes("T"))return e;const t=e.split(" "),[n,r]=t,a=new Date(n).toLocaleDateString("fr-CA");return`${a}T${r}`},async setData(){await this.saveFormData(this.sp)},async saveFormData(e,t=!1){switch(e){case s.ey:if(this.$refs.flight){if(t)return void this.$refs.flight[0].saveIndividual();const e=await this.$refs.flight[0].menssageValidate();await this.$refs.flight[0].saveInfo(e)}break;case s.YD:this.$refs.signature&&this.$refs.signature[0].saveInfo();break}},camelToSnakeCase(e){return e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`))},formatData(e){const t={};for(let n in e){const r=this.camelToSnakeCase(n);t[r]=e[n]}return t},async sendInfo(){try{const e=this.isPassenger?{businessUnitId:s.GK}:{},t=(0,m.c)().getForm(),n=await(0,c.c)().getServiceListSelected(),r=await(0,c.c)().filterServicesListByQuantity();if(r.length>0)return await this.setStep(s.uS),this.error=!0,(0,u.c)().hideLoading(),await this.setData(),void this.$alert.error({message:this.$tr("You have services to correct")});(0,u.c)().showLoading();const a=await this.validateAllFieldsRequiredByStep();if(a)return;const o=JSON.parse(JSON.stringify(this.$store.state.qrampApp)),i=(0,d.c)().payload();o.form.statusId=(0,u.c)().getStatusId();let l={...o.form,...i.cargo,...t,adHoc:1==o.form.adHoc,customCustomer:1==o.form.customCustomer,delay:i.delay,ourDelay:i.ourDelay,delayComment:i.delayComment,workOrderItems:[...n],...e};this.isAppOffline&&(l.titleOffline=this.$tr("ifly.cms.form.updateWorkOrder")),this.data.update&&(l.id=this.data.workOrderId);const f=await(0,c.c)().getServiceItems();return this.isPassenger&&0===f.length?this.$alert.warning({mode:"modal",message:"Surely you want to save the work order without services",actions:[{label:this.$tr("isite.cms.label.cancel"),color:"grey-8",handler:async()=>{(0,u.c)().hideLoading()}},{label:this.$tr("isite.cms.label.yes"),color:"primary",handler:async()=>{await this.sendWorkOrder(l)}}]}):await this.sendWorkOrder(l),l}catch(e){(0,u.c)().hideLoading(),console.log(e)}},clean(){(0,d.c)().reset(),this.$store.commit("qrampApp/SET_FORM_FLIGHT",{}),this.$emit("close",!1),(0,c.c)().setShowFavourite(!1)},async next(){await this.setData(),setTimeout((()=>{if(this.error){if(this.sp===s.uS){const e=this.validateFulldate();e||this.$alert.error({message:this.$tr("Dates must have this format: MM/DD/YYYY HH:mm")})}}else this.$refs.stepper.next()}),500)},previous(){this.$refs.stepper.previous()},async updateDataInCache(e,t){const n=structuredClone(t);n.offline=!0;const r=this.parseDateOfflineWO(n.inboundBlockIn),a=this.parseDateOfflineWO(n.inboundScheduledArrival),o=this.parseDateOfflineWO(n.outboundBlockOut),i=this.parseDateOfflineWO(n.outboundScheduledDeparture),l={...n,inboundBlockIn:r,inboundScheduledArrival:a,outboundBlockOut:o,outboundScheduledDeparture:i},s=Object.values(this.$helper.snakeToCamelCaseKeys(l.workOrderItems));l.workOrderItems=s,await f.a4.updateRecord(e,l,l?.id)},async sendWorkOrder(e){const t="apiRoutes.qramp.workOrders",n=(0,u.c)().getTitleOffline(),r={params:{titleOffline:n}};if(this.disabledReadonly)return this.$emit("close-modal",!1),void this.$emit("loading",!1);if(this.disabled)return;this.disabled=!0,this.$emit("loading",!0),await this.updateDataInCache(t,e);const a=this.data.update?this.$crud.update(t,this.data.workOrderId,e,r):this.$crud.create(t,e,r);await a.then((async t=>{this.clean(),this.$emit("close-modal",!1);const n=this.data.update?`${this.$tr("isite.cms.message.recordUpdated")}`:`${this.$tr("isite.cms.message.recordCreated")}`;this.$alert.info({message:n}),this.$emit("loading",!1),this.disabled=!1,(0,u.c)().hideLoading(),await this.$emit("getWorkOrders",e)})).catch((async t=>{(0,u.c)().hideLoading(),this.disabled=!1,this.$emit("loading",!1),this.$emit("close-modal",!1),await this.$emit("getWorkOrders",e),this.isAppOffline||(this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoUpdated")}`}),console.log("SEND INFO ERROR:",t))}))},validateFulldate(){return new Promise((async e=>{let t=!0;const n=await(0,c.c)().getServiceItems();return n.forEach((e=>{e.work_order_item_attributes.forEach((e=>{"fullDate"!==e.type||this.$moment(e.value,"MM/DD/YYYY HH:mm",!0).isValid()||(t=!1)}))})),e(t)}))},async validateAllFieldsRequiredByStep(){try{const e=this.$store.state.qrampApp.form;let t=this.isPassenger?s.Il:s.a;const n=this.isPassenger||e.operationTypeId==s.k0?s.KW:s.wD,r=this.isPassenger||e.operationTypeId==s.k0?s.yg:s.s9;this.isPassenger||e.operationTypeId==s.k0||(t=t.concat(["inboundBlockIn"])),e.customCustomerName||(t=t.concat(["customerId"]));const a=(0,p["default"])().getOperationTypeList().find((t=>t.id===Number(e.operationTypeId))),o=a?.options?.type;if(o){if("full"===o){const e=n.concat(r);t=t.concat(e)}"inbound"===o&&(t=t.concat(n)),"outbound"===o&&(t=t.concat(r))}const i=e.cancellationType;i&&(t=t.concat(["cancellationNoticeTime"]));const l=t.some((t=>null===e[t]||""===e[t]));if(l)return this.error=!0,await this.setStep(s.ey),(0,u.c)().hideLoading(),await this.setData(),this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),!0;const d=await this.validateFulldate(),m=await(0,c.c)().getServiceItems();return this.isPassenger||0!==m.length?d?(this.error=!1,!1):(this.$alert.error({message:this.$tr("Dates must have this format: MM/DD/YYYY HH:mm")}),await this.setStep(s.uS),this.error=!0,await this.setData(),(0,u.c)().hideLoading(),!0):(await this.setStep(s.uS),this.error=!0,(0,u.c)().hideLoading(),await this.setData(),this.$alert.error({message:this.$tr("Please at least select one service")}),!0)}catch(e){console.log(e),(0,u.c)().hideLoading()}},async setStep(e){this.sp=e},isError(e){this.stepError=e}}};var g=n(68716),y=n(41564),b=n(41128),v=n(58120),w=n(14288),I=n(95252),D=n.n(I);const k=(0,g.c)(h,[["render",i]]),M=k;D()(h,"components",{QStepper:y.c,QStep:b.c,QIcon:v.c,QForm:w.c});var A=n(74044);const x={key:0},T={class:"row cursor-pointer"},N={class:"q-pr-md"},S={class:"q-py-xs"},C={class:"cursor-pointer"},z={key:1};function O(e,t,n,a,o,i){const l=(0,r.E1)("table-flight"),s=(0,r.E1)("dynamic-field"),u=(0,r.E1)("q-btn"),c=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.K2)(l,{onCancel:t[0]||(t[0]=e=>o.dialog=e),dialog:o.dialog,dataTable:o.dataTable,onFlightSelect:t[1]||(t[1]=e=>i.setDataTable(e)),onValidateBound:i.addmanually},null,8,["dialog","dataTable","onValidateBound"]),(0,r.K2)(c,{ref:"formSimpleWorkOrders",id:"simpleWordOrder",class:"tw-px-8 tw-pt-8 tw-pb-10 tw-my-4 tw-mx-8 tw-mb-32 tw-border tw-border-gray-200 tw-rounded-lg"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.fields.form,((n,a)=>((0,r.Wz)(),(0,r.An)("div",{class:"col-12 col-md-6",key:a},["customerId"==a?((0,r.Wz)(),(0,r.An)("div",x,[o.bannerMessage?((0,r.Wz)(),(0,r.Az)(s,{key:0,class:"q-mb-md",field:e.fields.banner},null,8,["field"])):(0,r.g1)("",!0),(0,r.K2)(s,{field:n,modelValue:i.selectCustomerComputed,"onUpdate:modelValue":[t[3]||(t[3]=e=>i.selectCustomerComputed=e),e=>i.setCustomerForm(a)],onFilter:i.setCustomerName,ref_for:!0,ref:"customerId"},{"before-options":(0,r.Ql)((()=>[(0,r.QD)("div",{class:"q-py-md q-px-md",onClick:t[2]||(t[2]=(...e)=>i.addCustumers&&i.addCustumers(...e))},[(0,r.QD)("div",T,[(0,r.QD)("div",N,[(0,r.K2)(u,{push:"",color:"primary",round:"",icon:"fas fa-plus",size:"xs"})]),(0,r.QD)("div",S,[(0,r.QD)("label",C,(0,A.WA)(e.$tr("ifly.cms.label.createNewCustomer")),1)])])])])),_:2},1032,["field","modelValue","onUpdate:modelValue","onFilter"])])):((0,r.Wz)(),(0,r.An)("div",z,[((0,r.Wz)(),(0,r.Az)(s,{key:a,id:a,field:n,modelValue:o.form[a],"onUpdate:modelValue":[e=>o.form[a]=e,e=>i.zanetizeData(a)],onEnter:e=>i.search(n)},null,8,["id","field","modelValue","onUpdate:modelValue","onEnter"]))]))])))),128))])),_:1},512)])}var $=n(59788),Q=n(47348),L=n(34e3);const E={computed:{validateNoFligth(){return(0,u.c)().getTypeWorkOrder()===s.kl},isAppOffline(){return L.c.isAppOffline},isPassenger(){return(0,u.c)().getIsPassenger()},filterBusinessUnit(){return this.isPassenger?s.GK:s.Ih},filterCompany(){return this.isPassenger?s.mI:s.wz},allowContractName(){return this.$hasAccess("ramp.work-orders.see-contract-name")},manageResponsiblePermissions(){return this.$hasAccess("ramp.work-orders.manage-responsible")},filterStation(){return(0,p["default"])().getStationList().map((e=>({label:e.fullName,value:e.id})))},filterResponsible(){return(0,p["default"])().getResponsible().map((e=>({label:e.fullName,value:e.id})))},fields(){return{banner:{type:"banner",props:{color:"info",icon:"fas fa-exclamation-triangle",message:this.bannerMessage}},form:{customerId:{name:"customerId",value:"",type:"select",help:{description:'You can add a new customer to the list if it\'s not available. Type the Customer Name and click on "Create new customer". The Work Order will be created as Ad-Hoc.'},props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.disabledReadonly,borderless:!0,label:`*${this.$tr("ifly.cms.form.customer")}`,clearable:!0,color:"primary","hide-bottom-space":!1,emitValue:!1,options:this.newCustumerAdHoc},loadOptions:{delayed:this.getCustomerList}},preFlightNumber:{name:"preFlightNumber",value:"",type:"search",props:{rules:[e=>{if(!this.validateNoFligth)return!!e||this.$tr("isite.cms.message.fieldRequired")}],hint:"Enter the fight number and press enter or press the search icon",loading:this.loadingState,label:`*${this.$tr("ifly.cms.form.flight")}`,clearable:!0,maxlength:7,color:"primary"},label:this.$tr("ifly.cms.form.flight")},stationId:{name:"stationId",value:"",type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],selectByDefault:!0,label:`*${this.$tr("ifly.cms.form.station")}`,clearable:!0,color:"primary",options:this.filterStation}},responsibleId:{name:"responsibleId",value:"",type:"select",props:{vIf:this.manageResponsiblePermissions,label:"Responsible",clearable:!0,color:"primary",hint:"If you left this field empty, the responsible will be you automatically",options:this.isAppOffline?this.filterResponsible:[]},loadOptions:{apiRoute:this.isAppOffline?null:"apiRoutes.quser.users",select:{label:"fullName",id:"id"},filterByQuery:!this.isAppOffline,requestParams:{filter:{companyId:this.filterCompany}}}}}}}},methods:{getCustomerList(){return new Promise((async e=>{const t=this.isPassenger?{businessUnitId:s.GK}:{businessUnitId:s.Ih},n={params:{filter:{withoutContracts:!0,customerStatusId:1,companyId:this.filterCompany}},refresh:!1},r={params:{filter:{contractStatusId:1,...t}},refresh:!1},a=await Promise.all([this.$crud.index("apiRoutes.qramp.setupCustomers",n),this.$crud.index("apiRoutes.qramp.setupContracts",r)]),o=(0,Q.c)(a,this.allowContractName);return e(o)}))}}},F={components:{tableFlight:$.c},data(){return{newCustumerAdHoc:[],form:{customerId:null,contractId:null,preFlightNumber:null,stationId:null,adHoc:null,customCustomerName:null,customCustomer:null,faFlightId:null,statusId:s._G},bannerMessage:null,selectCustomers:"",customerName:null,loadingState:!1,dataTable:[],dialog:!1,loading:!1,acceptSchedule:!1}},mixins:[E],inject:["showWorkOrder","closeModal"],computed:{isAppOffline(){return this.$store.state.qofflineMaster.isAppOffline},selectCustomerComputed:{get(){return this.selectCustomers},set(e){this.selectCustomers=e}},disabledReadonly(){return(0,u.c)().disabledReadonly()},isPassenger(){return(0,u.c)().getIsPassenger()},filterBusinessUnit(){return this.isPassenger?s.GK:s.Ih},filterCompany(){return this.isPassenger?s.mI:s.wz}},methods:{zanetizeData(e){"preFlightNumber"===e&&(this.form[e]=this.form[e]?.toUpperCase()?.replace(/\s+/g,""))},addCustumers(){if(""!==this.customerName){const e=`customer-${(0,u.c)().numberInRange(8e3,1e3)}`;return this.newCustumerAdHoc=[{id:e,label:this.customerName}],this.form.adHoc=!0,this.form.customCustomer=!0,this.bannerMessage=this.$tr("ifly.cms.message.requestNewCustomer"),this.selectCustomerComputed={id:e,value:this.customerName,label:this.customerName},this.form.customCustomerName=this.customerName,this.form.customerId=null,this.form.contractId=null,void(this.customerName="")}this.$alert.error({message:this.$tr("ifly.cms.message.orderaddNewrecord")})},setCustomerForm(e){if("customerId"!==e)return;const t=null===this.selectCustomers||void 0===this.selectCustomers||""===this.selectCustomers?{}:this.selectCustomers;this.form.customerId=t.id||null;const n=t.label||null;this.form.customCustomerName=this.form.customerId?null:n,this.form.contractId=t.contractId||null;const r=this.form.contractId?`${this.$tr("ifly.cms.message.selectedCustomerWithContract")}`:this.$tr("ifly.cms.message.selectedCustomerWithoutContract");this.bannerMessage=t&&!this.form.contractId?r:null,this.form.adHoc=!this.form.contractId,this.form.customCustomer=!this.form.contractId},setCustomerName(e){this.customerName=e||""},saveSimpleWorkOrder(){this.$refs.formSimpleWorkOrders.validate().then((async e=>{if(e){if(this.isAppOffline||this.acceptSchedule||this.form.faFlightId)return void await this.messageWhenFlightIsNotChosen();if((!this.form.faFlightId||!this.acceptSchedule)&&!this.isAppOffline)return void this.search({type:"search"})}else this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),this.$emit("isError",!0)}))},async messageWhenFlightIsNotChosen(){this.acceptSchedule?this.$alert.warning({mode:"modal",message:`Are you sure to create this Work Order with an unscheduled flight number: ${this.form.preFlightNumber}?`,actions:[{label:"Ok",color:"positive",handler:async()=>{await this.orderConfirmationMessage(),this.acceptSchedule=!1}}]}):await this.orderConfirmationMessage()},async orderConfirmationMessage(){this.$emit("loading",!0);let e=await this.saveRequestSimpleWorkOrder();await this.$alert.info({mode:"modal",title:"",message:"What do you want to do?",modalWidth:"600px",actions:[{label:"Go out to the list",color:"grey-6",handler:async()=>{await this.closeModal()}},{label:"Continue editing",color:"light-blue-7",handler:async()=>{await this.showWorkOrder(e.data),this.acceptSchedule=!1,this.$emit("refreshData")}},{label:"Create a new one",color:"positive",handler:()=>{this.resetForm()}}]}),this.$emit("loading",!1)},search({type:e}){if(!this.isAppOffline){if("search"!=e&&(""!==this.form.preFlightNumber||null!==this.form.preFlightNumber))return;if(!this.form.preFlightNumber)return;const t={refresh:!0,params:{filter:{search:this.form?.preFlightNumber?.toUpperCase()}}};this.loadingState=!0,this.$crud.index("apiRoutes.qfly.flightaware",t).then((e=>{this.responseStatus(e)})).catch((e=>{this.loadingState=!1,this.$alert.error({message:this.$tr("ifly.cms.message.errorlookingForFlight")}),console.log(e)}))}},setDataTable({select:e,dialog:t}){this.form.faFlightId=e.faFlightId||null,this.dialog=t,this.acceptSchedule=!1},addmanually(){this.form.faFlightId=null,this.dialog=!1,this.acceptSchedule=!0},async saveRequestSimpleWorkOrder(){try{const t="apiRoutes.qramp.workOrders",n="apiRoutes.qramp.simpleWorkOrders";let r=null;(0,u.c)().showLoading();const a=this.isPassenger?{businessUnitId:s.GK}:{},o=(new Date).valueOf(),i={...this.form,offlineId:this.isAppOffline?o:null,titleOffline:(0,u.c)().getTitleOffline(),...a,type:(0,u.c)().getTypeWorkOrder(),operationTypeId:this.validateNoFligth?13:null};try{r=await this.$crud.create(n,i)}catch(e){console.log(e)}const l={...s.UF,adHoc:this.form.adHoc,stationId:Number(this.form.stationId),customerId:Number(this.form.customerId),inboundFlightNumber:this.form.preFlightNumber,outboundFlightNumber:this.form.preFlightNumber,offline:this.isAppOffline,id:this.isAppOffline?o:await(r?.data?.id)};return await f.a4.addNewRecord(t,l),this.isAppOffline||(0,p["default"])().getWorkOrders(!0,!0),(0,u.c)().hideLoading(),this.isAppOffline?{data:{...l}}:r}catch(t){(0,u.c)().hideLoading(),console.error(t)}},responseStatus(e){if(this.dataTable=[],this.acceptSchedule=!1,200==e.status&&(this.dataTable=(0,u.c)().getTableListOfFlights(e.data),this.dialog=!0),204==e.status){const e=this.$tr("ifly.cms.label.flightMessage").replace("#file_number",this.form.preFlightNumber);this.$alert.warning({mode:"modal",title:this.$tr("ifly.cms.form.flight"),message:e,actions:[{label:this.$tr("isite.cms.label.cancel"),color:"grey-8"},{label:this.$tr("isite.cms.label.yes"),color:"primary",handler:()=>{this.acceptSchedule=!0,this.form.faFlightId=null}}]})}this.loadingState=!1},resetForm(){this.form={customerId:null,contractId:null,preFlightNumber:null,stationId:null,adHoc:null,customCustomerName:null,customCustomer:null,faFlightId:null,statusId:s._G},this.newCustumerAdHoc=[],this.bannerMessage=null,this.selectCustomers="",this.customerName=null,this.loadingState=!1,this.dataTable=[],this.dialog=!1,this.loading=!1,this.acceptSchedule=!1,this.$refs.formSimpleWorkOrders.reset()}}};var W=n(99140);const Y=(0,g.c)(F,[["render",O]]),j=Y;D()(F,"components",{QForm:w.c,QBtn:W.c});var q=n(75836),R=(0,q.cB)({form:{operationTypeId:null,statusId:"",inboundCustomFlightNumber:"",outboundCustomFlightNumber:"",inboundFlightNumber:"",inboundOriginAirportId:"",outboundFlightNumber:"",outboundDestinationAirportId:"",customerId:"",customCustomer:"",adHoc:"",carrierId:"",stationId:"",inboundTailNumber:"",inboundBlockIn:"",inboundScheduledArrival:"",outboundTailNumber:"",outboundScheduledDeparture:"",outboundBlockOut:"",gateId:"",acTypeId:"",responsibleId:null,faFlightId:null,flightStatusId:null,preFlightNumber:null,date:"",sta:null,std:null,scheduleStatusId:null,estimatedOffUtc:null,estimatedOnUtc:null,comments:0,customerName:null,contractId:null,contractName:null,customCustomerName:null,cancellationNoticeTime:null,cancellationType:null},responsibles:{}});function P(){function e(){return R.form}function t(e){R.form.operationTypeId=e["operationTypeId"]?e["operationTypeId"].toString():null,R.form.statusId=e["statusId"]?e["statusId"].toString():"",R.form.inboundCustomFlightNumber=e["inboundCustomFlightNumber"]?e["inboundCustomFlightNumber"]:"",R.form.outboundCustomFlightNumber=e["outboundCustomFlightNumber"]?e["outboundCustomFlightNumber"]:"",R.form.inboundFlightNumber=e["inboundFlightNumber"]?e["inboundFlightNumber"].toString():"",R.form.inboundOriginAirportId=e["inboundOriginAirportId"]?e["inboundOriginAirportId"].toString():"",R.form.outboundFlightNumber=e["outboundFlightNumber"]?e["outboundFlightNumber"].toString():"",R.form.outboundDestinationAirportId=e["outboundDestinationAirportId"]?e["outboundDestinationAirportId"].toString():"",R.form.customerId=e["customerId"]?e["customerId"].toString():"",R.form.customCustomer=e["customCustomer"]?e["customCustomer"]:0,R.form.adHoc=e["adHoc"]?e["adHoc"]:0,R.form.carrierId=e["carrierId"]?e["carrierId"].toString():"",R.form.stationId=e["stationId"]?e["stationId"].toString():"",R.form.inboundTailNumber=e["inboundTailNumber"]?e["inboundTailNumber"].toString():"",R.form.inboundBlockIn=e["inboundBlockIn"]?e["inboundBlockIn"].toString():"",R.form.inboundScheduledArrival=e["inboundScheduledArrival"]?e["inboundScheduledArrival"].toString():"",R.form.outboundTailNumber=e["outboundTailNumber"]?e["outboundTailNumber"].toString():"",R.form.outboundScheduledDeparture=e["outboundScheduledDeparture"]?e["outboundScheduledDeparture"].toString():"",R.form.outboundBlockOut=e["outboundBlockOut"]?e["outboundBlockOut"].toString():"",R.form.gateId=e["gateId"]?e["gateId"].toString():"",R.form.acTypeId=e["acTypeId"]?e["acTypeId"].toString():"",R.form.responsibleId=e["responsibleId"]?e["responsibleId"]:null,R.form.faFlightId=e["faFlightId"]?e["faFlightId"]:null,R.form.flightStatusId=e["flightStatusId"]?e["flightStatusId"]:null,R.form.preFlightNumber=e["preFlightNumber"]?e["preFlightNumber"]:null,R.form.date=e["date"]?e["date"]:null,R.form.sta=e["sta"]?e["sta"]:null,R.form.std=e["std"]?e["std"]:null,R.form.scheduleStatusId=e["scheduleStatusId"]?e["scheduleStatusId"]:null,R.form.estimatedOffUtc=e["estimatedOffUtc"]?e["estimatedOffUtc"]:null,R.form.estimatedOnUtc=e["estimatedOnUtc"]?e["estimatedOnUtc"]:null,R.form.comments=e["comments"]?e["comments"]:0;var t=e.customer?e.customer.customerName:null,n=e.customCustomerName?e.customCustomerName:null;R.form.customCustomerName=n,R.form.customerName=t||n,R.form.contractId=e.contractId?e.contractId:null,R.form.contractName=e.contract?e.contract.contractName:null,R.form.cancellationNoticeTime=e.cancellationNoticeTime?e.cancellationNoticeTime:null,R.form.cancellationType=e.cancellationType?e.cancellationType:null,R.responsibles=(null===e||void 0===e?void 0:e.responsible)?[{value:e.responsible.id,label:e.responsible.fullName}]:[],(0,u.c)().getIsPassenger()&&(R.form.inboundGateArrival=e.inboundGateArrival||null,R.form.outboundGateDeparture=e.outboundGateDeparture||null)}function n(){return R.responsibles}function r(){}function a(){}return{getForm:e,setForm:t,reset:a,payload:r,getReponsible:n}}var U=n(264);const V={id:"formFlyStep",class:"tw-mt-6 tw-mb-20"},_={class:"col-12 col-md-6"},B={class:"row cursor-pointer"},K={class:"q-pr-md"},H={class:"q-py-xs"},G={class:"cursor-pointer"},Z={key:0,class:"col-5 text-right span q-pr-sm text-primary"},J={key:2,class:"label-container"},X={class:"col-12 col-md-6"},ee={key:0,class:"col-5 text-right span q-pr-sm text-primary"},te={key:0},ne={key:1,class:"label-container"},re={key:0,class:"col-12 col-md-6"},ae={key:0},oe={class:"tw-px-4"},ie={key:0,class:"col-5 text-right q-pr-sm text-primary"},le={key:1,class:"col-12 col-md-6"},se={key:0},ue={class:"tw-px-4"},ce={key:0,class:"col-5 text-right q-pr-sm text-primary"},de={class:"col-12"},me={class:"tw-font-semibold lg:tw-grid lg:tw-grid-cols-2 md:tw-grid-cols-2 tw-gap-5 tw-border tw-border-gray-200 tw-p-2 tw-rounded-md"},fe={class:"tw-col-span-2 tw-p-4 tw-border tw-border-gray-200 tw-mx-4 tw-text-center"};function pe(e,t,n,a,o,i){const l=(0,r.E1)("table-flight"),s=(0,r.E1)("dynamic-field"),u=(0,r.E1)("q-btn"),c=(0,r.E1)("collapse"),d=(0,r.E1)("q-form"),m=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",V,[(0,r.K2)(d,{onSubmit:(0,U.Y7)(i.saveInfo,["prevent","stop"]),ref:"myForm",id:"rowContainer",class:"row q-col-gutter-lg"},{default:(0,r.Ql)((()=>[(0,r.K2)(l,{onCancel:t[0]||(t[0]=e=>o.dialog=e),dialog:o.dialog,dataTable:o.dataTable,onFlightSelect:t[1]||(t[1]=e=>i.setDataTable(e)),onValidateBound:t[2]||(t[2]=e=>i.validateBound(i.flightNumberField))},null,8,["dialog","dataTable"]),(0,r.QD)("div",_,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.flyFormLeft,((a,l)=>((0,r.Wz)(),(0,r.An)("div",null,["customerId"==l?((0,r.Wz)(),(0,r.An)("label",{key:0,class:(0,A.WN)(""+(n.readonly?(e.responsive?"no-wrap":"justify-end")+" row items-center":""))},[o.bannerMessage?((0,r.Wz)(),(0,r.Az)(s,{key:0,class:"q-mb-md",field:i.formFields.banner},null,8,["field"])):(0,r.g1)("",!0),((0,r.Wz)(),(0,r.Az)(s,{key:l,id:l,field:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),style:(0,A.MN)(""+("input"===a.type||n.readonly?"padding-bottom:0px":"padding-bottom:7px")),modelValue:o.selectCustomers,"onUpdate:modelValue":[t[4]||(t[4]=e=>o.selectCustomers=e),i.setCustomerForm],onFilter:i.setCustomerName,ref_for:!0,ref:"customerId"},{"before-options":(0,r.Ql)((()=>[(0,r.QD)("div",{class:"q-py-md q-px-md",onClick:t[3]||(t[3]=(...e)=>i.addCustumers&&i.addCustumers(...e))},[(0,r.QD)("div",B,[(0,r.QD)("div",K,[(0,r.K2)(u,{push:"",color:"primary",round:"",icon:"fas fa-plus",size:"xs"})]),(0,r.QD)("div",H,[(0,r.QD)("label",G,(0,A.WA)(e.$tr("ifly.cms.label.createNewCustomer")),1)])])])])),_:2},1032,["id","field","class","style","modelValue","onUpdate:modelValue","onFilter"]))],2)):(0,r.g1)("",!0),"customerId"!=l&&"customCustomerName"!=l?((0,r.Wz)(),(0,r.An)("label",{key:1,class:(0,A.WN)(""+(n.readonly?(e.responsive?"no-wrap":"justify-end")+" row items-center":""))},[n.readonly?((0,r.Wz)(),(0,r.An)("span",Z,(0,A.WA)(a.label)+":",1)):(0,r.g1)("",!0),((0,r.Wz)(),(0,r.Az)(s,{key:l,id:l,field:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),style:(0,A.MN)(""+("input"===a.type||n.readonly?"padding-bottom:0px":"padding-bottom:7px")),modelValue:o.form[l],"onUpdate:modelValue":[e=>o.form[l]=e,e=>i.resetField(l)]},null,8,["id","field","class","style","modelValue","onUpdate:modelValue"]))],2)):(0,r.g1)("",!0),n.readonly?((0,r.Wz)(),(0,r.An)("hr",J)):(0,r.g1)("",!0)])))),256))]),(0,r.QD)("div",X,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.flyFormRight,((a,l)=>((0,r.Wz)(),(0,r.An)("div",{style:(0,A.MN)(""+(n.readonly?"height: 50px":"padding-bottom: 7px"))},[(0,r.QD)("label",{class:(0,A.WN)(""+(n.readonly?(e.responsive?"no-wrap":"justify-end")+" row items-center":""))},[n.readonly?((0,r.Wz)(),(0,r.An)("span",ee,(0,A.WA)(a.label)+":",1)):(0,r.g1)("",!0),"responsibleId"!==l?((0,r.Wz)(),(0,r.Az)(s,{key:l,id:l,field:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),style:(0,A.MN)(""+("input"===a.type||n.readonly?"padding-bottom:0px":"padding-bottom:1px")),modelValue:o.form[l],"onUpdate:modelValue":[e=>o.form[l]=e,t[5]||(t[5]=e=>i.resetField())]},null,8,["id","field","class","style","modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],2),"responsibleId"===l?((0,r.Wz)(),(0,r.An)("div",te,[((0,r.Wz)(),(0,r.Az)(s,{key:l,id:l,field:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),style:(0,A.MN)(""+("input"===a.type||n.readonly?"padding-bottom:0px":"padding-bottom:7px")),modelValue:o.form[l],"onUpdate:modelValue":e=>o.form[l]=e},null,8,["id","field","class","style","modelValue","onUpdate:modelValue"]))])):(0,r.g1)("",!0),n.readonly?((0,r.Wz)(),(0,r.An)("hr",ne)):(0,r.g1)("",!0)],4)))),256))]),i.isbound[0]&&!i.validateNoFligth?((0,r.Wz)(),(0,r.An)("div",re,[o.isCollapse?((0,r.Wz)(),(0,r.An)("div",ae,[(0,r.K2)(c,{title:e.$tr("isite.cms.label.inbound"),flightNumber:o.form.inboundFlightNumber,isComplete:o.completeFormInbound},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.inboundLeft,((t,a)=>((0,r.Wz)(),(0,r.An)("div",oe,[(0,r.QD)("div",{class:(0,A.WN)(""+(n.readonly?(e.responsive?"no-wrap":"justify-end")+" row items-center":""))},[n.readonly?((0,r.Wz)(),(0,r.An)("span",ie,(0,A.WA)(t.label)+":",1)):(0,r.g1)("",!0),((0,r.Wz)(),(0,r.Az)(s,{key:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),id:a,field:t,style:(0,A.MN)(""+("input"===t.type||n.readonly?"padding-bottom:8px":"origin"==a?"":"padding-bottom:8px")),modelValue:o.form[a],"onUpdate:modelValue":[e=>o.form[a]=e,e=>i.zanetizeData(a)],onEnter:e=>i.search(t),ref_for:!0,ref:`${a}`},null,8,["class","id","field","style","modelValue","onUpdate:modelValue","onEnter"]))],2)])))),256))])),_:1},8,["title","flightNumber","isComplete"])])):(0,r.g1)("",!0)])):(0,r.g1)("",!0),i.isbound[1]&!i.validateNoFligth?((0,r.Wz)(),(0,r.An)("div",le,[o.isCollapse?((0,r.Wz)(),(0,r.An)("div",se,[(0,r.K2)(c,{title:e.$tr("isite.cms.label.outbound"),flightNumber:o.form.outboundFlightNumber,isComplete:o.completedFormOutBound},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.outboundRight,((t,a)=>((0,r.Wz)(),(0,r.An)("div",ue,[(0,r.QD)("div",{class:(0,A.WN)(""+(n.readonly?(e.responsive?"no-wrap":"justify-end")+" row items-center":""))},[n.readonly?((0,r.Wz)(),(0,r.An)("span",ce,(0,A.WA)(t.label)+":",1)):(0,r.g1)("",!0),((0,r.Wz)(),(0,r.Az)(s,{key:a,class:(0,A.WN)(""+(n.readonly?"col-7":"")),id:a,field:t,style:(0,A.MN)(""+("input"===t.type||n.readonly?"padding-bottom:8px":"destination"==a?"":"padding-bottom:8px")),modelValue:o.form[a],"onUpdate:modelValue":[e=>o.form[a]=e,e=>i.zanetizeData(a)],onEnter:e=>i.search(t)},null,8,["class","id","field","style","modelValue","onUpdate:modelValue","onEnter"]))],2)])))),256))])),_:1},8,["title","flightNumber","isComplete"])])):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.QD)("div",de,[(0,r.QD)("div",me,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.dateBound,((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t},[(0,r.QD)("div",null,[((0,r.Wz)(),(0,r.Az)(s,{key:t,id:t,field:e,style:(0,A.MN)(""+("input"===e.type||n.readonly?"padding-bottom:8px":"origin"==t?"":"padding-bottom:8px")),modelValue:o.form[t],"onUpdate:modelValue":[e=>o.form[t]=e,t=>i.changeDate(e)]},null,8,["id","field","style","modelValue","onUpdate:modelValue"]))])])))),128)),(0,r.QD)("div",fe," Difference (hours): "+(0,A.WA)(o.differenceHour),1)])])])),_:1},8,["onSubmit"]),(0,r.K2)(m,{visible:!o.isCollapse},null,8,["visible"])])}n(23816);var he={class:"tw-w-full"},ge=(0,r.QD)("i",{class:"fa-solid fa-circle"},null,-1);function ye(e,t,n,a,o,i){var l=(0,r.E1)("q-expansion-item");return(0,r.Wz)(),(0,r.An)("div",{class:(0,A.WN)({"expandible-ramp-ctn":e.expandible})},[(0,r.K2)(l,{modelValue:e.expandible,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.expandible=t}),"header-class":"\n          text-primary \n          tw-rounded-t-md \n          tw-text-base \n          boundColor \n          tw-p-2 \n          text-center \n          text-weight-bold \n          tw-mb-4"},{header:(0,r.Ql)((function(){return[(0,r.QD)("div",he,[(0,r.QD)("p",null,(0,A.WA)(e.title),1),(0,r.QD)("div",null,[(0,r.QD)("p",null,"Flight Number: "+(0,A.WA)(e.flightNumber),1),(0,r.QD)("div",null,[(0,r.QD)("p",{class:(0,A.WN)({"tw-text-green-500":e.isComplete,"tw-text-orange-500":!e.isComplete})},[ge,(0,r.mY)(" "+(0,A.WA)(e.titleCompleted),1)],2)])])])]})),default:(0,r.Ql)((function(){return[(0,r.QD)("div",null,[(0,r.oF)(e.$slots,"default")])]})),_:3},8,["modelValue"])],2)}const be=(0,r._M)({props:{title:{type:String,default:function(){return""}},flightNumber:{type:String,default:function(){}},isComplete:{type:Boolean,default:function(){return!1}}},setup:function(e){var t=(0,q.IL)(!1),n=(0,r.S6)((function(){return e.flightNumber})),a=(0,r.S6)((function(){return e.isComplete})),o=(0,r.S6)((function(){return a.value?"Completed":"Not completed"}));return(0,r.u2)((function(){t.value=!e.isComplete})),(0,r.GE)((function(){t.value=!1})),{expandible:t,flightNumber:n,isComplete:a,titleCompleted:o}}});var ve=n(61656);const we=(0,g.c)(be,[["render",ye]]),Ie=we;D()(be,"components",{QExpansionItem:ve.c});var De=n(49456),ke=n.n(De),Me=(n(20240),n(47507)),Ae=n.n(Me);const xe={props:{readonly:!0,toolbar:{},dataCompoment:{type:Object,default:()=>{}}},emits:["isError"],components:{tableFlight:$.c,collapse:Ie},mixins:[l.c],created(){this.$nextTick((function(){(0,p["default"])().getOperationType()}))},mounted(){this.$nextTick((function(){document.querySelector(".master-dialog__body").addEventListener("scroll",this.handleScroll),this.init()}))},data(){return{form:{customCustomer:!1,adHoc:!1,operationTypeId:null,statusId:"1",date:"",inboundCustomFlightNumber:null,outboundCustomFlightNumber:null,inboundFlightNumber:null,outboundFlightNumber:null,inboundOriginAirportId:null,outboundDestinationAirportId:null,outboundBlockOut:null,stationId:null,cancellationType:null},refresh:1,selected:[],loadingState:!1,openAlert:!1,update:!1,dialog:!1,inOutBound:null,timeoutID:"",dataTable:[],mainData:[],selectCustomers:"",bannerMessage:null,customerName:"",newCustumerAdHoc:[],differenceHour:0,responsibleList:[],completeFormInbound:!1,completedFormOutBound:!1,isCollapse:!1}},watch:{"form.inboundFlightNumber"(e){e||(this.form.inboundFlightNumber=null,this.form.inboundOriginAirportId=null,this.form.inboundTailNumber=null,this.form.inboundScheduledArrival=null)},"form.outboundFlightNumber"(e){e||(this.form.outboundFlightNumber=null,this.form.outboundDestinationAirportId=null,this.form.outboundTailNumber=null,this.form.outboundScheduledDeparture=null)},"form.outboundDestinationAirportId"(e){this.form.inboundOriginAirportId?this.openAlert=!1:this.openAlert=!0},"form.inboundOriginAirportId"(e){this.form.outboundDestinationAirportId?this.openAlert=!1:this.openAlert=!0},"form.operationTypeId"(e){13==e?(0,u.c)().setTypeWorkOrder(s.kl):(0,u.c)().setTypeWorkOrder(s.Qt),(0,c.c)().init().then()}},computed:{validateNoFligth(){return(0,u.c)().getTypeWorkOrder()===s.kl},isAppOffline(){return this.$store.state.qofflineMaster.isAppOffline},operationTypeList(){return(0,p["default"])().getOperationTypeList()},disabledReadonly(){return(0,u.c)().disabledReadonly()},isDesktop(){return window.innerWidth>="900"},flightBoundFormStatus(){return(0,u.c)().getFlightBoundFormStatus()},flightNumberField(){return(0,u.c)().getFlightNumberField()},validateFutureDateTime(){return(e,t,n)=>(0,u.c)().validateFutureDateTime(e,t,n)},selectCustomerComputed:{get(){return this.selectCustomers},set(e){this.selectCustomers=e}},showLabel(){return!(!this.readonly||this.responsive)||(this.readonly&&this.responsive,!1)},isbound(){if(this.form.operationTypeId){const e=this.operationTypeList.find((e=>e.id===Number(this.form.operationTypeId))),t=e?.options?.type;if(t){if("full"===t)return[!0,!0];if("inbound"===t)return[!0,!1];if("outbound"===t)return[!1,!0]}}return[!1,!1]},validateCancellationNoticeTime(){return!!this.form.cancellationType},readStatus(){return!this.$hasAccess("ramp.work-orders.edit-status")||this.readonly||this.disabledReadonly},allowContractName(){return this.$hasAccess("ramp.work-orders.see-contract-name")},manageResponsiblePermissions(){return this.$hasAccess("ramp.work-orders.manage-responsible")&&!this.isPassenger},isPassenger(){return(0,u.c)().getIsPassenger()},filterCompany(){return this.isPassenger?s.GK:s.Ih},filterCompany(){return this.isPassenger?s.mI:s.wz},filterGates(){return(0,p["default"])().getGatesList().filter((e=>Number(e.stationId)===Number(this.form.stationId))).map((e=>({value:e.id,label:e.name})))},filterStation(){return(0,p["default"])().getStationList().map((e=>({label:e.fullName,value:e.id})))},filterAcType(){return(0,p["default"])().getACTypesList().map((e=>({label:e.model,value:e.id})))},filterFlyFormRight(){return(0,p["default"])().getAirlinesList().map((e=>({label:e.airlineName,value:e.id})))},filterResponsible(){return(0,p["default"])().getResponsible().map((e=>({label:e.fullName,value:e.id})))},validateRulesBlock(){const e=this.isPassenger?{}:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]};return e},validateRulesField(){return e=>!(!this.isPassenger&&this.form.operationTypeId!=s.k0)||(!!e||this.$tr("isite.cms.message.fieldRequired"))},timezoneAirport(){const e=(0,p["default"])().getStationList().find((e=>e.id==this.form.stationId)),t=e?.airportId,n=(0,p["default"])().getAirportsList().find((e=>e.id==t))||null;return n?Ae().tz(n.timezone).format("z"):""},formFields(){return{banner:{type:"banner",props:{color:"info",icon:"fas fa-exclamation-triangle",message:this.bannerMessage}},flyFormLeft:{customerId:{name:"customerId",value:null,type:this.readonly?"inputStandard":"select",help:{description:'You can add a new customer to the list if it\'s not available. Type the Customer Name and click on "Create new customer". The Work Order will be created as Ad-Hoc.'},props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.customer")}`,clearable:!0,color:"primary","hide-bottom-space":!1,emitValue:!1,options:this.newCustumerAdHoc,filterByQuery:!0},loadOptions:{delayed:this.getCustomerList},label:this.$tr("ifly.cms.form.customer")},customCustomerName:{name:"customCustomerName",value:null,type:this.readonly?"inputStandard":"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.customer")}`,clearable:!0,color:"primary","hide-bottom-space":!1},label:this.$tr("ifly.cms.form.customer")},stationId:{name:"stationId",value:null,type:this.readonly?"inputStandard":"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],selectByDefault:!0,readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.station")}`,clearable:!0,color:"primary",options:this.filterStation,suffix:this.timezoneAirport}},acTypeId:{name:"acTypeId",value:null,type:this.readonly?"inputStandard":"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.acType")}`,clearable:!0,color:"primary","hide-bottom-space":!1,options:this.filterAcType},label:this.$tr("ifly.cms.form.acType")},operationTypeId:{name:"operationTypeId",value:null,type:this.readonly?"inputStandard":"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.operation")}`,clearable:!0,color:"primary","hide-bottom-space":!1,options:this.operationTypeList},label:this.$tr("ifly.cms.form.operation")},cancellationType:{value:null,type:"select",props:{vIf:this.isPassenger&&!this.validateNoFligth,label:"Cancellation type",clearable:!0,color:"primary",options:[{label:"Cancelled Flight",value:"cancelledFlight"},{label:"Cancelled Flight W/Services",value:"cancelledFlightWServices"}]},label:this.$tr("ifly.cms.form.operation")},cancellationNoticeTime:{value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Cancellation Notice time entered in Hours",vIf:this.validateCancellationNoticeTime&&!this.validateNoFligth,type:"number"},label:this.$tr("ifly.cms.form.operation")}},flyFormRight:{carrierId:{name:"carrierId",value:null,type:this.readonly?"inputStandard":"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.carrier")}`,clearable:!0,color:"primary","hide-bottom-space":!1,options:this.filterFlyFormRight},label:this.$tr("ifly.cms.form.carrier")},gateId:{name:"gateId",value:null,type:this.readonly?"inputStandard":"select",props:{vIf:!this.isPassenger,rules:[e=>this.validateSpecialCharacters(e)],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.gate")}`,clearable:!0,color:"primary",options:this.filterGates},label:this.$tr("ifly.cms.form.gate")},statusId:{name:"statusId",value:1,type:this.readonly?"inputStandard":"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readStatus,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.status")}`,clearable:!0,color:"primary","hide-bottom-space":!1,options:(0,p["default"])().getWorkOrderStatusesList().map((e=>({label:e.statusName,value:e.id})))},label:this.$tr("ifly.cms.form.status")},responsibleId:{name:"responsibleId",value:null,type:"select",props:{vIf:this.manageResponsiblePermissions,selectByDefault:!0,readonly:this.disabledReadonly,label:"*Responsible",clearable:!0,color:"primary",options:this.isAppOffline?this.filterResponsible:[]},loadOptions:{apiRoute:this.isAppOffline?null:"apiRoutes.quser.users",select:{label:"fullName",id:"id"},filterByQuery:!this.isAppOffline,requestParams:{filter:{companyId:this.filterCompany}}}}},inboundLeft:{inboundFlightNumber:{name:"inboundFlightNumber",value:"",type:this.readonly?"inputStandard":"search",props:{rules:[e=>this.validateRulesField(e)],hint:"Enter the fight number and press enter or press the search icon",loading:this.loadingState,readonly:this.readonly||this.disabledReadonly||this.loadingState,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.flight")}`,clearable:!0,maxlength:7,color:"primary"},label:this.$tr("ifly.cms.form.flight")},inboundOriginAirportId:{name:"inboundOriginAirportId",value:"",type:this.readonly?"inputStandard":"select",props:{readonly:!this.isPassenger&&(this.disabledReadonly||this.flightBoundFormStatus.boundOriginAirportId),outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`${this.$tr("ifly.cms.form.origin")}`,clearable:!0,color:"primary",suffix:this.timezoneAirport},loadOptions:{apiRoute:"apiRoutes.qfly.airports",select:{label:"fullName",id:"id"},requestParams:{filter:{status:this.refresh,companyId:this.filterCompany}}},label:this.$tr("ifly.cms.form.origin")},inboundTailNumber:{name:"inboundTailNumber",value:"",type:this.readonly?"inputStandard":"input",props:{readonly:this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`${this.$tr("ifly.cms.form.tail")}`,clearable:!0,color:"primary"},label:this.$tr("ifly.cms.form.tail")},inboundScheduledArrival:{name:"inboundScheduledArrival",value:"",type:this.readonly?"inputStandard":"fullDate",props:{rules:[e=>this.validateRulesField(e)],hint:"Format: MM/DD/YYYY HH:mm",mask:"MM/DD/YYYY HH:mm","place-holder":"MM/DD/YYYY HH:mm",outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.scheduledArrival")}`,clearable:!0,color:"primary",format24h:!0,suffix:this.timezoneAirport},label:this.$tr("ifly.cms.form.scheduledArrival")},inboundGateArrival:{name:"inboundGateArrival",value:"",type:"input",props:{vIf:this.isPassenger,label:"Inbound Gate Arrival",clearable:!0,color:"primary"},label:"Inbound Gate Arrival"}},outboundRight:{outboundFlightNumber:{name:"outboundFlightNumber",value:"",type:this.readonly?"inputStandard":"search",props:{rules:[e=>this.validateRulesField(e)],hint:"Enter the fight number and press enter or press the search icon",loading:this.loadingState,readonly:this.readonly||this.disabledReadonly||this.loadingState,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.flight")}`,clearable:!0,maxlength:7,color:"primary"},label:this.$tr("ifly.cms.form.flight")},outboundDestinationAirportId:{name:"outboundDestinationAirportId",value:"",type:this.readonly?"inputStandard":"select",props:{readonly:!this.isPassenger&&(this.disabledReadonly||this.flightBoundFormStatus.boundDestinationAirport),outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`${this.$tr("ifly.cms.form.destination")}`,clearable:!0,color:"primary",suffix:this.timezoneAirport},loadOptions:{apiRoute:"apiRoutes.qfly.airports",select:{label:"fullName",id:"id"},requestParams:{filter:{status:this.refresh,companyId:this.filterCompany}}},label:this.$tr("ifly.cms.form.destination")},outboundTailNumber:{name:"outboundTailNumber",value:"",type:this.readonly?"inputStandard":"input",props:{readonly:this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`${this.$tr("ifly.cms.form.tail")}`,clearable:!0,color:"primary"},label:this.$tr("ifly.cms.form.tail")},outboundScheduledDeparture:{name:"outboundScheduledDeparture",value:"",type:this.readonly?"inputStandard":"fullDate",props:{rules:[e=>this.validateRulesField(e)],hint:"Format: MM/DD/YYYY HH:mm",mask:"MM/DD/YYYY HH:mm","place-holder":"MM/DD/YYYY HH:mm",outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.scheduledDeparture")}`,clearable:!0,color:"primary",format24h:!0,suffix:this.timezoneAirport},label:this.$tr("ifly.cms.form.scheduledDeparture")},outboundGateDeparture:{name:"outboundGateDeparture",value:"",type:"input",props:{vIf:this.isPassenger,label:"Outbound Gate Departure",clearable:!0,color:"primary"},label:"Outbound Gate Departure"}},dateBound:{inboundBlockIn:{name:"inboundBlockIn",value:"",type:this.readonly?"inputStandard":"fullDate",props:{...this.validateRulesBlock,hint:"Format: MM/DD/YYYY HH:mm",mask:"MM/DD/YYYY HH:mm","place-holder":"MM/DD/YYYY HH:mm",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:""+(this.isPassenger?"Actual In":`*${this.$tr("ifly.cms.form.blockIn")}`),clearable:!0,color:"primary",format24h:!0,options:(e,t)=>this.validateFutureDateTime(e,t,this.form.inboundBlockIn),suffix:this.timezoneAirport},label:""+(this.isPassenger?"Actual In":`${this.$tr("ifly.cms.form.blockIn")}`)},outboundBlockOut:{name:"outboundBlockOut",value:"",type:this.readonly?"inputStandard":"fullDate",props:{hint:"Format: MM/DD/YYYY HH:mm",mask:"MM/DD/YYYY HH:mm","place-holder":"MM/DD/YYYY HH:mm",readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:""+(this.isPassenger?"Actual Out":`${this.$tr("ifly.cms.form.blockOut")}`),clearable:!0,color:"primary",format24h:!0,options:this.validateDateOutboundBlockOut,suffix:this.timezoneAirport},label:""+(this.isPassenger?"Actual Out":`${this.$tr("ifly.cms.form.blockOut")}`)}},customerField:{customCustomerName:{name:"customCustomerName",value:"",type:this.readonly?"inputStandard":"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,borderless:this.readonly,label:this.readonly?"":`*${this.$tr("ifly.cms.form.customCustomerName")}`,clearable:!0,color:"primary"},label:this.$tr("ifly.cms.form.gate")}}}}},methods:{showInputs(e){return"customCustomer"==e&&this.form.adHoc||"adHoc"==e},init(){this.currentDate(),this.updateData(),this.form.stationId=this.dataCompoment.stationId},async updateData(){if(this.dataCompoment&&Object.keys(this.dataCompoment).length>0){this.isCollapse=!1,this.update=!0;const e=this.$clone(this.dataCompoment);if(this.form.statusId=e.statusId,this.form.stationId=e.stationId,this.form.acTypeId=e.acTypeId,this.form.adHoc=e.adHoc,this.form.carrierId=e.carrierId,this.form.customCustomer=e.customCustomer,this.form.customerId=e.customerId,e.customCustomerName){const t=`customer-${this.numberInRange(8e3,1e3)}`,n={id:t,label:e.customCustomerName,value:e.customCustomerName};this.newCustumerAdHoc=[{...n}],this.selectCustomerComputed={...n}}else{const t=await(0,p["default"])().getCustomerWithContractLists().find((t=>e.customerId&&e.contractId?t.id==e.customerId&&t.contractId==e.contractId:e.customerId&&!e.contractId?t.id==e.customerId&&null==t.contractId:void 0))||null;t&&t.label&&(this.selectCustomerComputed=t)}await this.setCustomerForm(),this.form.date=e.date,this.form.gateId=e.gateId,this.form.operationTypeId=e.operationTypeId,setTimeout((()=>{this.form.date=this.dateFormatterFull(e.date),this.update=!1,this.form.responsibleId=e.responsibleId,this.form.inboundFlightNumber=e.inboundFlightNumber,this.form.outboundFlightNumber=e.outboundFlightNumber,this.form.inboundOriginAirportId=e.inboundOriginAirportId,this.form.inboundTailNumber=e.inboundTailNumber,this.flightBoundFormStatus.boundTailNumber=this.checkIfDataArrives(e.inboundTailNumber),this.flightBoundFormStatus.outboundTailNumber=this.checkIfDataArrives(e.outboundTailNumber),this.flightBoundFormStatus.boundScheduled=this.checkIfDataArrives(e.inboundScheduledArrival),this.flightBoundFormStatus.boundScheduledDeparture=this.checkIfDataArrives(e.outboundScheduledDeparture),this.flightBoundFormStatus.boundOriginAirportId=this.checkIfDataArrives(e.inboundOriginAirportId),this.flightBoundFormStatus.boundDestinationAirport=this.checkIfDataArrives(e.outboundDestinationAirportId),this.isPassenger&&(this.form.inboundGateArrival=e.inboundGateArrival,this.form.outboundGateDeparture=e.outboundGateDeparture,this.flightBoundFormStatus.inboundGateArrival=this.checkIfDataArrives(e.inboundGateArrival),this.flightBoundFormStatus.outboundGateDeparture=this.checkIfDataArrives(e.outboundGateDeparture)),this.form.inboundBlockIn=this.dateFormatterFull(e.inboundBlockIn),this.form.inboundScheduledArrival=this.dateFormatterFull(e.inboundScheduledArrival),this.form.outboundDestinationAirportId=e.outboundDestinationAirportId,this.form.outboundTailNumber=e.outboundTailNumber,this.form.outboundScheduledDeparture=this.dateFormatterFull(e.outboundScheduledDeparture),this.form.outboundBlockOut=this.dateFormatterFull(e.outboundBlockOut),this.form.faFlightId=e.faFlightId,this.form.inboundBlockIn&&this.form.outboundBlockOut&&(this.differenceHour=(0,u.c)().getDifferenceInHours(this.form.inboundBlockIn,this.form.outboundBlockOut)),this.completeFormInbound=this.validateInbound("inboundLeft"),this.completedFormOutBound=this.validateInbound("outboundRight"),this.form.cancellationNoticeTime=e.cancellationNoticeTime,this.form.cancellationType=e.cancellationType,this.isCollapse=!0}),1e3)}},checkIfDataArrives(e){return null!==e&&""!==e},saveInfo(e){this.$refs.myForm.validate().then((async t=>{t?(this.saveIndividual(),this.$emit("isError",e)):this.$emit("isError",!0)}))},saveIndividual(){this.$store.commit("qrampApp/SET_FORM_FLIGHT",this.$clone(this.form)),(0,u.c)().setDateInboundBlockIn(this.form.inboundBlockIn),(0,u.c)().setDateOutboundBlockOut(this.form.outboundBlockOut),(0,u.c)().setDateOutboundScheduledDeparture(this.form.outboundScheduledDeparture),(0,u.c)().setDateinboundScheduledArrival(this.form.inboundScheduledArrival)},async menssageValidate(){let e=!1;if("3"===this.form.operationTypeId&&this.form.inboundFlightNumber&&this.form.inboundOriginAirportId&&this.form.inboundTailNumber&&this.form.inboundScheduledArrival&&this.form.inboundBlockIn&&(""===this.form.outboundBlockOut||null===this.form.outboundBlockOut))if(await new Promise((e=>this.$q.dialog({ok:this.$tr("isite.cms.label.yes"),message:"Are you sure there is no data for block out?",cancel:!0,persistent:!0}).onOk((()=>e(!0))).onCancel((()=>e(!1))))))e=!1;else{e=!0;const t=this.$refs.outboundBlockOut[0];t&&t.$refs.outboundBlockOutInboundLeft.focus()}return e},currentDate(){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString().slice(0,-1);this.form.date=this.dateFormatterFull(t)},search({type:e,name:t},n=null){if(this.isAppOffline)return;if("search"!=e)return;this.timeoutID&&clearTimeout(this.timeoutID),this.refresh=0,this.dataTable=[];const r=this;this.timeoutID=setTimeout((function(){if(n="inboundFlightNumber"==t?r.form.inboundFlightNumber:r.form.outboundFlightNumber,!n||n.length<3)return;const e={refresh:!0,params:{filter:{search:n.toUpperCase()}}};r.loadingState=!0,r.inOutBound=["3","4"].includes(r.form.operationTypeId),r.$crud.index("apiRoutes.qfly.flightaware",e).then((e=>{if(r.loadingState=!1,r.name=t,200==e.status)r.form.outboundCustomFlightNumber=!1,r.form.inboundCustomFlightNumber=!1,r.refresh=1,r.mainData=e.data,r.loadingState=!1,r.setTable(e.data),r.dialog=!0,(0,u.c)().setFlightNumberField(t);else if(204==e.status){const e=r.$tr("ifly.cms.label.flightMessage").replace("#file_number",n);r.$alert.warning({mode:"modal",title:r.$tr("ifly.cms.form.flight"),message:e,actions:[{label:r.$tr("isite.cms.label.cancel"),color:"grey-8"},{label:r.$tr("isite.cms.label.yes"),color:"primary",handler:()=>{r.validateBound(t)}}]})}})).catch((e=>{r.resetBound(),this.loadingState=!1,this.$alert.error({message:this.$tr("ifly.cms.message.errorlookingForFlight")}),console.log("error",e)}))}),1500)},validateBound(e){e&&(this.form.outboundCustomFlightNumber=!0,(0,u.c)().showFielFlightBoundFormStatus(),this.form.inboundCustomFlightNumber=!0,this.dialog=!1)},setForm(e){this.refresh=0;const{ident:t,destinationAirport:n,estimatedOff:r,registration:a,originAirport:o,estimatedOn:i,gateDestination:l,gateOrigin:s,actualIn:c,actualOut:d}=e;if(!this.isbound[0]&&this.isbound[1]){const e=n?.id||null;this.form.outboundFlightNumber=t,this.form.outboundDestinationAirportId=e,this.form.outboundScheduledDeparture=this.dateFormatterFull(r),this.form.outboundTailNumber=a,this.isPassenger&&(this.form.inboundGateArrival=l)}if(this.isbound[0]&&!this.isbound[1]){this.form.inboundFlightNumber=t;const e=o?.id||null;this.form.inboundOriginAirportId=e,this.form.inboundScheduledArrival=this.dateFormatterFull(i),this.form.inboundTailNumber=a,this.form.outboundTailNumber&&(this.form.outboundTailNumber=a),this.isPassenger&&(this.form.outboundGateDeparture=s)}if(this.isbound[0]&&this.isbound[1])if(this.name.includes("inboundFlightNumber")){const e=n?.id||null;this.form.outboundFlightNumber=t,this.form.outboundDestinationAirportId=e,this.form.outboundScheduledDeparture=this.dateFormatterFull(r),this.form.outboundTailNumber=a,this.isPassenger&&(this.form.outboundGateDeparture=s),this.isPassenger&&(this.form.inboundGateArrival=l),this.form.inboundFlightNumber=t;const u=o?.id||null;this.form.inboundOriginAirportId=u,this.form.inboundScheduledArrival=this.dateFormatterFull(i),this.form.inboundTailNumber=a,this.form.outboundTailNumber&&(this.form.outboundTailNumber=a)}else{const e=n?.id||null;this.form.outboundFlightNumber=t,this.form.outboundDestinationAirportId=e,this.form.outboundScheduledDeparture=this.dateFormatterFull(r),this.form.outboundTailNumber=a,this.isPassenger&&(this.form.inboundGateArrival=l)}this.isPassenger&&(this.form.inboundBlockIn=this.dateFormatterFull(c),this.form.outboundBlockOut=this.dateFormatterFull(d),this.changeDate({name:"outboundBlockOut"})),(0,u.c)().validateStatusSelectedFlight(e)},setDataTable({select:e,dialog:t}){this.dialog=t,this.form.faFlightId=e.faFlightId||null,this.setForm(this.mainData.find(((t,n)=>n===e.index)))},dateFormatterFull(e){return e?ke()(e).format("MM/DD/YYYY HH:mm"):null},setTable(e){try{this.dataTable=(0,u.c)().getTableListOfFlights(e)}catch(t){this.dataTable=[],console.log(t)}},validateSpecialCharacters(e){return/[^a-zA-Z0-9-]/.test(e)?this.$tr("isite.cms.message.specialCharactersAreNotAllowed"):!!e||this.$tr("isite.cms.message.fieldRequired")},setCustomerForm(){const e=null===this.selectCustomers||void 0===this.selectCustomers||""===this.selectCustomers?{}:this.selectCustomers;this.form.customerId=isNaN(e.id)?null:e.id;const t=e.label||null;this.form.customCustomerName=this.form.customerId?null:t,this.form.contractId=e.contractId||null,(0,u.c)().setContractId(this.form.contractId);const n=this.form.contractId?`${this.$tr("ifly.cms.message.selectedCustomerWithContract")}`:this.$tr("ifly.cms.message.selectedCustomerWithoutContract");this.bannerMessage=e&&null!==this.form.customerId&&!this.form.contractId?n:null,this.form.adHoc=!this.form.contractId,this.form.customCustomer=!this.form.contractId},setCustomerName(e){this.customerName=""!==e?e:""},addCustumers(){if(""!==this.customerName){const e=`customer-${this.numberInRange(8e3,1e3)}`;return this.newCustumerAdHoc=[{id:e,label:this.customerName,value:this.customerName}],this.form.adHoc=!0,this.form.customCustomer=!0,this.bannerMessage=this.$tr("ifly.cms.message.requestNewCustomer"),this.selectCustomerComputed={id:e,value:this.customerName,label:this.customerName},this.form.customCustomerName=this.customerName,this.form.customerId=null,this.form.contractId=null,void(this.customerName="")}this.$alert.error({message:this.$tr("ifly.cms.message.orderaddNewrecord")})},numberInRange(e,t){return Math.floor(Math.random()*(e-t+1)+t)},getCustomerList(){return new Promise((async e=>{const t=await(0,p["default"])().getCustomerWithContract();return e(t)}))},handleScroll(e){(this.$refs.customerId||this.$refs.customerId.length>0)&&this.$refs.customerId.some((e=>e.tooltip))&&(this.$refs.customerId[0].tooltip=!1)},resetBound(){this.form.outboundCustomFlightNumber=!1,this.form.inboundCustomFlightNumber=!1},resetField(e=""){if("stationId"===e)return this.timezoneAirport,void(this.form.gateId=null);if(!this.form.operationTypeId)return;this.$refs.myForm.reset();const t={destinationAirport:{id:this.form.inboundOriginAirportId},registration:this.form.inboundTailNumber,outRegistration:this.form.outboundTailNumber,originAirport:{id:this.form.outboundDestinationAirportId},estimatedOff:this.form.outboundScheduledDeparture,estimatedOn:this.form.inboundScheduledArrival};(0,u.c)().validateStatusSelectedFlight(t),this.resetBound(),this.$store.commit("qrampApp/SET_FORM_FLIGHT",this.$clone(this.form))},validateDate(e,t=null){const n=this.form.inboundScheduledArrival?this.$moment(this.form.inboundScheduledArrival):this.$moment(),r=n.format("YYYY/MM/DD"),a=n.format("H"),o=n.format("mm"),i=r===this.$moment(this.form.inboundBlockIn).format("YYYY/MM/DD");return isNaN(e)?e<=this.$moment().format("YYYY/MM/DD")&&e>=r:t?!i||Number(t)<=o:!i||e<=a},validateDateOutboundBlockOut(e,t=null){const n=this.form.outboundBlockOut?this.$moment(this.form.outboundBlockOut):this.$moment(),r=n.format("YYYY/MM/DD"),a=this.form.inboundBlockIn?this.$moment(this.form.inboundBlockIn):this.$moment(),o=a.format("YYYY/MM/DD"),i=a.format("H"),l=a.format("mm"),s=r===o;return isNaN(e)?this.form.inboundBlockIn?e<=this.$moment().format("YYYY/MM/DD")&&e>=o:e<=this.$moment().format("YYYY/MM/DD")&&e>=r:t?!s||Number(t)>=Number(l):!s||Number(e)>=Number(i)},changeDate(e){"outboundBlockOut"===e.name&&null!==this.form.outboundBlockOut&&(this.differenceHour=(0,u.c)().getDifferenceInHours(this.form.inboundBlockIn,this.form.outboundBlockOut))},optionResponsible(e){return e?[{id:String(e.id),label:e.fullName,value:e.id}]:[]},zanetizeData(e){this.completeFormInbound=this.validateInbound("inboundLeft"),this.completedFormOutBound=this.validateInbound("outboundRight"),"inboundFlightNumber"!==e&&"outboundFlightNumber"!==e||this.form[e]&&(this.form[e]=this.form[e].toUpperCase().replace(/\s+/g,"")),this.$store.commit("qrampApp/SET_FORM_FLIGHT",this.$clone(this.form))},validateInbound(e){const t=[];return Object.keys(this.formFields[e]).forEach((e=>{t.push(this.checkIfDataArrives(this.form[e]))})),this.isPassenger||t.pop(),t.every((e=>!0===e))}}},Te=(0,g.c)(xe,[["render",pe],["__scopeId","data-v-a2157ce0"]]),Ne=Te;D()(xe,"components",{QForm:w.c,QBtn:W.c});var Se=n(38880);const Ce={id:"signatureForm"},ze={id:"signatureContainer",class:"q-pa-md tw-mb-12"},Oe={class:"row"},$e={class:"col-12 col-md-6"},Qe={class:"row"},Le={class:"row"},Ee={class:"col-12 col-md-6"},Fe={class:"row"},We={class:"row"};function Ye(e,t,n,a,o,i){const l=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",Ce,[(0,r.QD)("div",ze,[(0,r.QD)("div",{id:"disableSignature",class:(0,A.WN)(n.readonly?"disableEdit":"")},null,2),(0,r.QD)("div",Oe,[(0,r.QD)("div",$e,[(0,r.QD)("div",Qe,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formField.customer,((e,n)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:n},["signature"===e.type?((0,r.Wz)(),(0,r.Az)(l,{key:0,id:"sig1",field:e,class:"col-12 q-px-sm",modelValue:o.form[e.name||n],"onUpdate:modelValue":t=>o.form[e.name||n]=t,onFullscreenAction:t[0]||(t[0]=e=>o.isFull?i.cancelFullScreen("sig1"):i.launchFullScreen("sig1"))},null,8,["field","modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],64)))),128))]),(0,r.QD)("div",Le,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formField.customer,((e,t)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:t},["signature"!==e.type?((0,r.Wz)(),(0,r.Az)(l,{key:0,field:e,class:(0,A.WN)(["q-mt-sm q-pa-sm",{"col-12":!i.isDesktop,"col-6":i.isDesktop}]),modelValue:o.form[e.name||t],"onUpdate:modelValue":n=>o.form[e.name||t]=n},null,8,["field","class","modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],64)))),128))])]),(0,r.QD)("div",Ee,[(0,r.QD)("div",Fe,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formField.representative,((e,n)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:n},["signature"===e.type?((0,r.Wz)(),(0,r.Az)(l,{key:0,id:"sig2",class:"col-12 q-px-sm",field:e,modelValue:o.form[e.name||n],"onUpdate:modelValue":t=>o.form[e.name||n]=t,onFullscreenAction:t[1]||(t[1]=e=>o.isFull?i.cancelFullScreen("sig2"):i.launchFullScreen("sig2"))},null,8,["field","modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],64)))),128))]),(0,r.QD)("div",We,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formField.representative,((e,t)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:t},["signature"!==e.type?((0,r.Wz)(),(0,r.Az)(l,{key:0,field:e,class:(0,A.WN)(["q-mt-sm q-pa-sm",{"col-12":!i.isDesktop,"col-6":i.isDesktop}]),modelValue:o.form[e.name||t],"onUpdate:modelValue":n=>o.form[e.name||t]=n},null,8,["field","class","modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],64)))),128))])])])])])}const je={props:{readonly:!0,toolbar:{},dataCompoment:{}},inject:["disabledReadonly"],mixins:[l.c],data(){return{form:{},isFull:!1}},mounted(){this.$nextTick((function(){this.init()}))},computed:{isDesktop(){return window.innerWidth>="900"},formField(){return{customer:{customer:{value:"",name:"customerSignature",type:"signature",props:{btnFullscreen:!0,btnFullscreenIcon:this.isFull?"zoom_in_map":"zoom_out_map",readonly:this.readonly||this.disabledReadonly,label:this.$tr("ifly.cms.form.customerRepresentativeSignature")}},printName:{name:"customerName",value:"",type:this.readonly?"inputStandard":"input","icon-right":"fas fa-user",props:{readonly:this.readonly||this.disabledReadonly,label:`${this.$tr("isite.cms.form.printName")}`}},title:{name:"customerTitle",value:"",type:this.readonly?"inputStandard":"input","icon-right":"fas fa-user",props:{readonly:this.readonly||this.disabledReadonly,label:`${this.$tr("isite.cms.form.title")}`}}},representative:{representative:{value:"",name:"representativeSignature",type:"signature",props:{btnFullscreen:!0,btnFullscreenIcon:this.isFull?"zoom_in_map":"zoom_out_map",readonly:this.readonly||this.disabledReadonly,label:this.$tr("ifly.cms.form.AgiRepresentativeSignature")}},printName:{name:"representativeName",value:"",type:this.readonly?"inputStandard":"input","icon-right":"fas fa-user",props:{readonly:this.readonly||this.disabledReadonly,label:`${this.$tr("isite.cms.form.printName")}`}},title:{name:"representativeTitle",value:"",type:this.readonly?"inputStandard":"input","icon-right":"fas fa-user",props:{readonly:this.readonly||this.disabledReadonly,label:`${this.$tr("isite.cms.form.title")}`}}}}}},methods:{init(){Object.keys(this.dataCompoment).length>0&&(this.form=this.dataCompoment)},launchFullScreen(e){const t=document.getElementById(e);t.requestFullScreen?(t.style.background="#fff",this.isFull=!0,t.requestFullScreen()):t.mozRequestFullScreen?(t.style.background="#fff",this.isFull=!0,t.mozRequestFullScreen()):t.webkitRequestFullScreen&&(t.style.background="#fff",this.isFull=!0,t.webkitRequestFullScreen())},cancelFullScreen(e){const t=document.getElementById(e);document.cancelFullScreen?(t.style.background="initial",this.isFull=!1,document.cancelFullScreen()):document.mozCancelFullScreen?(t.style.background="initial",this.isFull=!1,document.mozCancelFullScreen()):document.webkitCancelFullScreen&&(t.style.background="initial",this.isFull=!1,document.webkitCancelFullScreen())},saveInfo(){this.$store.commit("qrampApp/SET_FORM_SIGNATURE",this.form)}}},qe=(0,g.c)(je,[["render",Ye]]),Re=qe;var Pe=n(78792),Ue=n(62520);const Ve={emits:["getWorkOrderFilter","refresh-data"],components:{stepperRampForm:M,simpleWorkOrders:j},mixins:[l.c],data(){return{show:!1,loading:!1,modalProps:{},sp:null,flight:{},remark:[],signature:[],statusId:s._G,needToBePosted:!1,STATUS_DRAFT:s._G,STATUS_POSTED:s.lC,STATUS_SUBMITTED:s._y}},provide(){return{disabledReadonly:(0,r.S6)((()=>(0,u.c)().disabledReadonly())),closeModal:this.close}},computed:{isAppOffline(){return this.$store.state.qofflineMaster.isAppOffline},isPassenger(){return(0,u.c)().getIsPassenger()},steppers(){let e=[{ref:"flight",title:"Flight",icon:"fa-regular fa-plane",step:s.ey,form:this.flight,component:Ne},{ref:"services",title:"Services",icon:"fa-regular fa-briefcase-blank",step:s.uS,component:Pe.c},{ref:"remark",title:"Remark",icon:"fa-regular fa-comment-dots",step:s.DF,form:this.remark,component:Se.c},{ref:"signature",title:this.$tr("ifly.cms.label.signature"),icon:"fa-solid fa-pen-line",step:s.YD,form:this.signature,component:Re}].filter((e=>this.isPassenger?e.step!==s.YD:e));if(this.isPassenger){const t={ref:"delay",title:"Delay",icon:"fa-light fa-clock",step:8,component:Ue.c};e.splice(2,0,t)}return e},nextLabel(){return this.sp===this.steppers.length?"Save to Draft":this.$tr("isite.cms.label.next")},loadingComputed(){return(0,u.c)().getLoading()},actions(){return(0,u.c)().getIsblank()?[]:this.modalProps.update?this.actionsStepperButtom:this.actionSimpleWorkOrder},actionSimpleWorkOrder(){return[{props:{vIf:!this.modalProps.update,color:"primary",label:this.$tr("isite.cms.label.save")},action:async()=>{await this.setLoading(!0),await this.$refs.simpleWorkOrder.saveSimpleWorkOrder(),await this.setLoading(!1)}}]},editPermissionseSubmitted(){return(0,u.c)().editPermissionseSubmitted()},actionsStepperButtom(){const e=(0,u.c)().getStatusId(),t=[{props:{vIf:this.$hasAccess("ramp.work-orders.destroy"),class:"btn-action-form-orders",label:this.$q.screen.lt.sm?null:this.$tr("isite.cms.label.delete"),icon:"fa-regular fa-trash"},action:async()=>{await this.$crud.delete("apiRoutes.qramp.workOrders",this.modalProps.workOrderId),await this.getWorkOrders(),this.clear(),this.$emit("refresh-data"),await(0,u.c)().hideLoading()}},{props:{icon:"fa-regular fa-floppy-disk",class:"btn-action-form-orders",label:this.$q.screen.lt.sm?null:"Save to Draft",vIf:e==s._G||e==s.g1||e==s.kz,loading:this.loadingComputed},action:async()=>{(0,u.c)().setStatusId(s._G),await this.$refs.stepper.setData(),setTimeout((async()=>{const e=await this.$refs.stepper.sendInfo();await this.getWorkOrders(e)}),1e3),this.isAppOffline||await(0,p["default"])().getWorkOrders(!0),(0,u.c)().hideLoading()}},{props:{color:"white",icon:"fal fa-check","text-color":"positive",label:this.$tr("isite.cms.label.closeFlight"),vIf:e==s._G||e==s.g1||e==s.kz,loading:this.loadingComputed},action:async()=>{await(0,u.c)().setStatusId(s.g1),await this.$refs.stepper.setData(),setTimeout((async()=>{const e=await(this.$refs.stepper?.sendInfo());await this.getWorkOrders(e)}),1e3),this.isAppOffline||await(0,p["default"])().getWorkOrders(!0),(0,u.c)().hideLoading()}},{props:{color:"primary","icon-right":"fa-thin fa-floppy-disk",label:this.$tr("isite.cms.label.save"),vIf:null==e||e==s.lC||e==s._y&&this.editPermissionseSubmitted,loading:this.loadingComputed},action:async()=>{await this.$refs.stepper.setData();const e=this.$store.state.qrampApp;await(0,u.c)().setStatusId(e.form.statusId),await this.$refs.stepper.sendInfo(),await(0,u.c)().setStatusId(null),this.isAppOffline||(0,p["default"])().getWorkOrders(!0),(0,u.c)().hideLoading()}},{props:{vIf:this.sp>1,color:"white","text-color":"primary",class:"tw-text-xs",icon:"fas fa-arrow-left"},action:()=>{this.$refs.stepper.previous()}},{props:{vIf:this.sp!==this.steppers.length,"text-color":"white",color:"primary","icon-right":"fas fa-arrow-right",class:"tw-text-xs"},action:()=>{this.$refs.stepper.next()}}];return t}},methods:{close(e){this.show=e,this.$emit("refresh-data"),this.services=[],(0,c.c)().setShowFavourite(!1),(0,c.c)().setErrorList([])},async loadform(e){try{(0,u.c)().showLoading();const t=this.$clone(e);if(this.show=!0,this.modalProps=t.modalProps,this.flight={},this.remark={},this.signature={},this.statusId=s._G,this.needToBePosted=!1,(0,u.c)().setWorkOrderItems([]),(0,u.c)().setStatusId(this.statusId),(0,u.c)().setNeedToBePosted(this.needToBePosted),!t.data)return void(0,u.c)().hideLoading();(0,u.c)().setTypeWorkOrder(t.data.type||null),this.statusId=t.data["statusId"]?t.data["statusId"].toString():"1",this.needToBePosted=t.data["needToBePosted"]||!1,(0,u.c)().setStatusId(this.statusId),(0,u.c)().setNeedToBePosted(this.needToBePosted),P().setForm(t.data),this.flight=P().getForm(),(0,u.c)().setResponsible(t.data["responsible"]),(0,d.c)().setForm(t.data),(0,d.c)().setDelayList(t.data),(0,d.c)().setDelayComment(t.data.delayComment||null),(0,d.c)().setOurDelay(t.data.ourDelay||null),(0,u.c)().setWorkOrderItems(t.data["workOrderItems"]),await(0,c.c)().init(),(0,m.c)().setForm(t.data),this.signature.customerName=t.data["customerName"],this.signature.customerTitle=t.data["customerTitle"],this.signature.representativeName=t.data["representativeName"],this.signature.representativeTitle=t.data["representativeTitle"],this.signature.customerSignature=t.data["customerSignature"],this.signature.representativeSignature=t.data["representativeSignature"],this.$store.commit("qrampApp/SET_FORM_FLIGHT",this.flight),this.$store.commit("qrampApp/SET_FORM_SIGNATURE",this.signature),(0,u.c)().hideLoading()}catch(t){this.loading=!1,(0,u.c)().hideLoading(),console.log(t)}},clear(){this.modalProps={},this.show=!1,this.services=[],(0,d.c)().reset(),(0,m.c)().reset(),(0,c.c)().setShowFavourite(!1),(0,c.c)().setErrorList([])},setLoading(e){this.loading=e},async getWorkOrders(e=null){this.$emit("getWorkOrderFilter",e)}}},_e=(0,g.c)(Ve,[["render",a]]),Be=_e;D()(Ve,"components",{QBtn:W.c,QIcon:v.c})},96332:(e,t,n)=>{"use strict";n.d(t,{c:()=>h});var r=n(92444);const a={key:1},o=(0,r.QD)("div",{class:"tw-py-4 tw-text-xl tw-border tw-shadow-lg tw-p-4 tw-mx-4 tw-rounded-md tw-text-center"},[(0,r.QD)("div",{class:"tw-py-3"},[(0,r.QD)("i",{class:"fa-light fa-plane-circle-xmark tw-text-6xl tw-text-blue-900"})]),(0,r.QD)("div",null," The date of this flight is more than 10 days, we do not have statistics for flights longer than 10 days ")],-1),i=[o];function l(e,t,n,o,l,s){const u=(0,r.E1)("searchFlights"),c=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(c,(0,r.Gu)({modelValue:s.visibleMapModal,"onUpdate:modelValue":t[0]||(t[0]=e=>s.visibleMapModal=e)},s.modalProps,{persistent:!0,loading:s.loading,onHide:s.close}),{default:(0,r.Ql)((()=>[s.differenceInDays?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(u,{key:0,workOrderData:s.workOrder,isSearch:!1},null,8,["workOrderData"])),s.differenceInDays?((0,r.Wz)(),(0,r.An)("div",a,i)):(0,r.g1)("",!0)])),_:1},16,["modelValue","loading","onHide"])}var s=n(30152),u=n(88006),c=n(49456),d=n.n(c);const m={components:{searchFlights:u["default"]},data(){return{}},computed:{rightThumbColor(){return this.standard.max>=100?"tw-right-thumb tw-hidden":"tw-right-thumb"},visibleMapModal:{get(){return(0,s.c)().getVisibleMapModal()},set(e){(0,s.c)().setVisibleMapModal(e)}},loading(){return(0,s.c)().getLoadingModalMap()},workOrder(){return(0,s.c)().getWorkOrder()},modalProps(){return{width:"90vw",title:`Flight Map : ${this.workOrder.workOrderId}`}},differenceInDays(){const e=d()(),t=d()(this.workOrder.boundScheduleDate),n=t.diff(e,"days");return n>10}},methods:{close(){this.visibleMapModal=!1,(0,s.c)().setFlightMap(null),(0,s.c)().setFlightId(null)}}};var f=n(68716);const p=(0,f.c)(m,[["render",l]]),h=p},59788:(e,t,n)=>{"use strict";n.d(t,{c:()=>D});var r=n(92444),a=n(74044);function o(e,t,n,o,i,l){const s=(0,r.E1)("q-icon"),u=(0,r.E1)("q-input"),c=(0,r.E1)("q-checkbox"),d=(0,r.E1)("q-td"),m=(0,r.E1)("q-tr"),f=(0,r.E1)("q-table"),p=(0,r.E1)("q-card-section"),h=(0,r.E1)("q-btn"),g=(0,r.E1)("q-card-actions"),y=(0,r.E1)("q-card"),b=(0,r.E1)("q-dialog");return(0,r.Wz)(),(0,r.Az)(b,{modelValue:l.dialogModel,"onUpdate:modelValue":t[5]||(t[5]=e=>l.dialogModel=e),persistent:"","full-width":"","transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,r.Ql)((()=>[(0,r.K2)(y,{flat:""},{default:(0,r.Ql)((()=>[(0,r.K2)(p,{class:(0,a.WN)({cardResponsive:l.responsive})},{default:(0,r.Ql)((()=>[(0,r.K2)(f,{rows:n.dataTable,columns:i.columns,"row-key":"index",selection:"single",grid:l.responsive,filter:i.filter,class:"my-sticky-header-column-table",selected:i.selected,"onUpdate:selected":t[1]||(t[1]=e=>i.selected=e)},{"top-left":(0,r.Ql)((()=>[(0,r.K2)(u,{borderless:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filter=e),placeholder:"Search"},{append:(0,r.Ql)((()=>[(0,r.K2)(s,{name:"fas fa-search"})])),_:1},8,["modelValue"])])),body:(0,r.Ql)((e=>[(0,r.K2)(m,{props:e,class:(0,a.WN)({"tw-bg-red-500":e.row.cancelled})},{default:(0,r.Ql)((()=>[(0,r.K2)(d,{"auto-width":""},{default:(0,r.Ql)((()=>[(0,r.K2)(c,{dense:"",modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,label:e.row.name,disable:e.row.cancelled},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1024),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.cols,(t=>((0,r.Wz)(),(0,r.Az)(d,{key:t.name,props:e},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(t.value),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props","class"])])),_:1},8,["rows","columns","grid","filter","selected"])])),_:1},8,["class"]),(0,r.K2)(g,{align:"right",class:"q-mr-sm"},{default:(0,r.Ql)((()=>[n.manually?((0,r.Wz)(),(0,r.Az)(h,{key:0,rounded:"",label:"Add manually",class:"q-ml-sm text-capitalize",color:"grey-6",onClick:t[2]||(t[2]=t=>e.$emit("validateBound"))})):(0,r.g1)("",!0),(0,r.K2)(h,{rounded:"",label:"cancel",color:"grey-6",class:"text-capitalize",onClick:t[3]||(t[3]=t=>e.$emit("cancel",!1))}),(0,r.K2)(h,{rounded:"",label:"select",class:"q-ml-sm text-capitalize",color:"primary",onClick:t[4]||(t[4]=e=>l.setForm())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}const i={props:{dataTable:{type:Array,default:()=>[]},dialog:{type:Boolean,default:!1},manually:{type:Boolean,default:!0}},emits:["validateBound","cancel","flightSelect"],data(){return{selected:[],filter:"",columns:[{name:"tailNumber",label:"Tail Number",field:"registration",sortable:!0,align:"left"},{name:"outbound",label:"Departure",field:"outbound",align:"left"},{name:"inbound",label:"Arrival ",field:"inbound",align:"left"},{name:"aircraftType",label:"Aircraft",field:"aircraftType",align:"left"}]}},computed:{dialogModel:{get(){return this.dialog},set(e){this.dialog=e}},responsive(){return"mobile"==this.windowSize},windowSize(){return this.windowWith>="450"?"desktop":"mobile"},windowWith(){return window.innerWidth}},methods:{setForm(){this.selected.length>0?(this.$emit("flightSelect",{select:this.selected[0],dialog:!1}),setTimeout((()=>{this.selected=[]}),1e3)):this.$alert.error({message:this.$tr("ifly.cms.label.errorFlightSelected")})}}};var l=n(68716),s=n(30852),u=n(70608),c=n(71008),d=n(40792),m=n(20540),f=n(58120),p=n(45144),h=n(50213),g=n(78488),y=n(66480),b=n(99140),v=n(95252),w=n.n(v);const I=(0,l.c)(i,[["render",o]]),D=I;w()(i,"components",{QDialog:s.c,QCard:u.c,QCardSection:c.c,QTable:d.c,QInput:m.c,QIcon:f.c,QTr:p.c,QTd:h.c,QCheckbox:g.c,QCardActions:y.c,QBtn:b.c})},38880:(e,t,n)=>{"use strict";n.d(t,{c:()=>m});var r=n(92444);const a={class:"tw-p-5 row tw-mb-10"};function o(e,t,n,o,i,l){const s=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.QD)("div",a,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(l.formFields,((e,t)=>((0,r.Wz)(),(0,r.Az)(s,{class:"col-12 col-md-6 tw-p-1",key:t,field:e,modelValue:l.form[e.name||t],"onUpdate:modelValue":n=>l.form[e.name||t]=n},null,8,["field","modelValue","onUpdate:modelValue"])))),128))])])}var i=n(42648),l=n(76719),s=n(30152);const u={props:{readonly:!0,toolbar:{}},mixins:[i.c],computed:{form(){return(0,l.c)().getForm()},disabledReadonly(){return(0,s.c)().disabledReadonly()},formFields(){return{remark:{value:"",type:this.readonly?"inputStandard":"input",props:{readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,label:this.$tr("ifly.cms.form.remark"),type:"textarea",rows:"12",debounce:1500}},safetyMessage:{value:"",type:this.readonly?"inputStandard":"input",props:{readonly:this.readonly||this.disabledReadonly,outlined:!this.readonly,label:this.$tr("ifly.cms.form.safetyMessage"),type:"textarea",rows:"12",debounce:1500}}}}}};var c=n(68716);const d=(0,c.c)(u,[["render",o]]),m=d},92212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xi});var r=n(92444);function a(e,t,n,a,o,i){var l=(0,r.E1)("kanbanBoard");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.K2)(l)])}var o={class:"kanbanBoardCtn"},i={class:"tw-flex"},l={class:"tw-flex-none tw-py-4 tw-border-b tw-border-gray-200 tw-space-y-4 tw-hidden"},s={key:0,class:"tw-flex-1 tw-h-auto tw-flex tw-overflow-x-auto"};function u(e,t,n,a,u,c){var d=(0,r.E1)("page-actions"),m=(0,r.E1)("filters"),f=((0,r.E1)("filtersBar"),(0,r.E1)("actionBar")),p=(0,r.E1)("q-btn-toggle"),h=(0,r.E1)("q-date"),g=(0,r.E1)("dynamic-field"),y=(0,r.E1)("kanbanColumn"),b=(0,r.E1)("modalSchedule"),v=(0,r.E1)("formOrders"),w=(0,r.E1)("modalStation"),I=(0,r.E1)("selectFlightNumberModal"),D=(0,r.E1)("flightDetail"),k=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.K2)(d,{ref:"pageActions",title:e.title,multipleRefresh:"","extra-actions":e.extraPageActions,class:"q-mb-md",onRefresh:t[0]||(t[0]=function(t){return e.buildKanbanStructure(!0)})},null,8,["title","extra-actions"]),e.storeFilter.showModal?((0,r.Wz)(),(0,r.Az)(m,{key:0})):(0,r.g1)("",!0),(0,r.g1)("",!0),(0,r.K2)(f),(0,r.QD)("div",i,[(0,r.QD)("div",l,[(0,r.K2)(p,{modelValue:e.scheduleType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.scheduleType=t}),rounded:"","no-caps":"",unelevated:"","toggle-color":"blue-grey",color:"grey-2","text-color":"blue-grey",options:e.scheduleTypeOptions,id:"btnCalendarType",size:"14px",spread:"",class:"tw-py-2"},null,8,["modelValue","options"]),(0,r.K2)(h,{modelValue:e.selectedDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedDate=t}),minimal:"",size:"sm"},null,8,["modelValue"]),(0,r.K2)(g,{modelValue:e.filterTime,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filterTime=t}),field:e.dynamicFieldTime},null,8,["modelValue","field"])]),e.columns.length>0?((0,r.Wz)(),(0,r.An)("div",s,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.columns,(function(t,n){return(0,r.Wz)(),(0,r.Az)(y,{key:n,column:t,groupOptions:e.groupOptions,class:"tw-flex-none tw-space-y-0 tw-h-auto tw-rounded-lg tw-mb-4"},null,8,["column","groupOptions"])})),128))])):(0,r.g1)("",!0)]),(0,r.K2)(b),(0,r.K2)(v,{ref:"refFormOrders",onGetWorkOrderFilter:e.individualRefreshByColumns},null,8,["onGetWorkOrderFilter"]),(0,r.K2)(w),(0,r.K2)(I),(0,r.K2)(D),(0,r.K2)(k,{visible:e.loadingMain},null,8,["visible"])])}var c=n(74044),d=n(264),m={class:"tw-border-b-2 tw-border-gray-200 tw-pb-1 tw-text-sm"},f={class:"tw-flex tw-items-center tw-space-x-2 tw-justify-center"},p={class:"q-mb-md tw-font-semibold text-column tw-uppercase"},h={class:"tw-font-semibold"},g={key:0,class:"tw-flex tw-justify-center tw-absolute tw-inset-0 tw-pt-48 tw-bg-white tw-bg-opacity-75 tw-z-20"},y={key:0,ref:"refTrigger",class:"tw-flex tw-absolute tw-justify-center tw-inset-0 tw-mt-80"},b=(0,r.QD)("i",{class:"fa-thin fa-cards-blank tw-text-7xl tw-text-gray-300"},null,-1),v=[b],w=["id"];function I(e,t,n,a,o,i){var l=(0,r.E1)("completed-schedule"),s=(0,r.E1)("q-spinner"),u=(0,r.E1)("draggable");return(0,r.Wz)(),(0,r.An)("div",{class:(0,c.WN)(["tw-relative columnCtn q-col tw-w-full",{columnCtnFull:!e.isWeekAgenda}])},[(0,r.QD)("div",{ref:"refKanbanColumn",class:(0,c.WN)(["tw-py-3","cardCtn-".concat(e.date)]),onDragover:t[2]||(t[2]=(0,d.Y7)((function(t){return e.setDrag(!0)}),["prevent"])),onDrop:t[3]||(t[3]=(0,d.Y7)((function(t){return e.setDrag(!1)}),["prevent"]))},[(0,r.QD)("div",m,[(0,r.QD)("div",f,[(0,r.QD)("p",p,(0,c.WA)(e.date.format("dddd")),1),(0,r.QD)("button",{class:(0,c.WN)(["tw-rounded-full tw-w-7 tw-h-7 tw--mt-4 tw-text-slate-500 dayGray",{"buttom-day":e.selectedDate===e.date.format("YYYY/MM/DD"),"tw-border tw-border-blue-500":e.$moment().format("YYYY/MM/DD")===e.date.format("YYYY/MM/DD")}]),onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.showKanbanDay&&e.showKanbanDay.apply(e,t)})},[(0,r.QD)("span",h,(0,c.WA)(e.date.format("D")),1)],2)])]),(0,r.K2)(l,{column:e.column,onRefresh:e.singleRefreshment,isWeekAgenda:e.isWeekAgenda},null,8,["column","onRefresh","isWeekAgenda"]),e.column.loading?((0,r.Wz)(),(0,r.An)("div",g,[(0,r.K2)(s,{color:"primary",size:"2em"})])):(0,r.g1)("",!0),(0,r.QD)("div",{class:(0,c.WN)(["h-200 bg-blue-gray-1000 tw-px-2 tw-pt-4",{"tw-border tw-border-gray-300 ":e.column.isDrag,"h-201-black":e.isBlank}])},[e.column.isDrag?((0,r.Wz)(),(0,r.An)("div",y,v,512)):(0,r.g1)("",!0),(0,r.K2)(u,{id:e.date.format("YYYY-MM-DD"),modelValue:e.cards,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.cards=t}),animation:200,group:"cards","ghost-class":"ghostCard","drag-class":"dragCard",filter:".ignoreItem",class:"scrollbar tw-overflow-y-auto tw-overflow-x-hidden tw-mb-4 tw-h-full tw-px-2",handle:".dot-vertical",onEnd:e.changeDate,disabled:!0,"item-key":"id"},{item:(0,r.Ql)((function(t){var n,a=t.element;return[((0,r.Wz)(),(0,r.An)("div",{id:null===a||void 0===a?void 0:a.id,key:null===a||void 0===a?void 0:a.id},[((0,r.Wz)(),(0,r.Az)((0,r.mk)((null===a||void 0===a?void 0:a.editable)?"inlineSchedule":e.cardComponentName),{isWeekAgenda:e.isWeekAgenda,card:a,dateColumn:e.column.date.format("YYYY-MM-DD"),class:(0,c.WN)({hidden:null===(n=e.column)||void 0===n?void 0:n.isDrag})},null,8,["isWeekAgenda","card","dateColumn","class"]))],8,w))]})),footer:(0,r.Ql)((function(){return[(0,r.wt)((0,r.QD)("div",{ref:"refTrigger",class:(0,c.WN)(["tw-text-center tw-h-5 tw-flex tw-justify-center","trigger-".concat(e.date)])},[e.isLoading?((0,r.Wz)(),(0,r.Az)(s,{key:0,color:"primary",size:"1.3em"})):(0,r.g1)("",!0)],2),[[d.Ub,!e.column.isDrag]])]})),_:1},8,["id","modelValue","onEnd"])],2)],34)],2)}var D=n(10328),k=n.n(D),M=n(63984),A=n.n(M),x=n(80092),T=n.n(x),N=function(e){return(0,r.ED)("data-v-709d1ca6"),e=e(),(0,r.ii)(),e},S={class:"tw-py-3 tw-pl-2 tw-w-full"},C={class:"tw-flex tw-pb-1"},z={class:"tw-w-10/12"},O=N((function(){return(0,r.QD)("i",{class:"fa-solid fa-grip-dots-vertical tw-text-lg"},null,-1)})),$=[O],Q={class:"tw-font-semibold tw-text-xs tw-space-y-1"},L={class:"tw-flex tw-space-x-2 arrival-text"},E={key:0},F=N((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-down-right"},null,-1)})),W={key:1},Y=N((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-up-right"},null,-1)})),j={class:"tw-flex tw-space-x-1"},q={key:0,class:"ac-type-text tw-truncate tw-w-28"},R=N((function(){return(0,r.QD)("i",{class:"fa-solid fa-plane"},null,-1)})),P={key:1,class:"tw-flex tw-items-center tw-truncate"},U={key:0,src:A(),class:"tw-pr-1",alt:"",srcset:""},V={key:1,src:T(),class:"tw-pr-1",alt:"",srcset:""},_={class:"tw-py-1 tw-flex tw-items-center tw-pr-3"},B={class:"tw-uppercase tw-font-extrabold text-status"},K={class:"tw-ml-1"},H={class:"tw-flex tw-left-0 tw-h-7 tw-px-2 tw--mt-5"},G={key:1,class:"tw-absolute tw-inset-0 tw-bg-opacity-75 tw-pt-12 tw-bg-white tw-flex tw-justify-center"};function Z(e,t,n,a,o,i){var l=(0,r.E1)("chipServices"),s=(0,r.E1)("q-tooltip"),u=(0,r.E1)("lastComments"),d=(0,r.E1)("kanbanCardActions"),m=(0,r.E1)("q-spinner");return(0,r.Wz)(),(0,r.An)("div",null,[e.card.editable?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["tw-relative tw-rounded-lg card-h tw-my-2 tw-border-l-8 showCard tw-bg-white",e.colorCheckSchedule])},[(0,r.QD)("div",null,[(0,r.K2)(l,{workOrderItemsTotal:e.card.workOrderItemsTotal,workOrderId:e.card.id,class:"tw-absolute tw-right-2 tw--mt-2.5"},null,8,["workOrderItemsTotal","workOrderId"]),(0,r.QD)("div",S,[(0,r.QD)("div",C,[(0,r.QD)("div",z,[(0,r.QD)("p",{class:"text-kanban-card tw--mt-0.5 tw-cursor-pointer tw-truncate",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},(0,c.WA)(e.card.calendar.title),1)]),e.isWeekAgenda?((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["tw-flex tw-items-center tw-space-x-2 tw-px-3 tw--mt-2 tw-text-gray-500 dot-vertical tw-hidden",{"tw-cursor-move":!e.isBlank}])},$,2)):(0,r.g1)("",!0)]),(0,r.QD)("div",Q,[(0,r.QD)("div",L,[e.card.calendar.sta?((0,r.Wz)(),(0,r.An)("div",E,[F,(0,r.mY)(" STA: "+(0,c.WA)(e.card.calendar.sta?e.$moment(e.card.calendar.sta,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0),e.card.calendar.std?((0,r.Wz)(),(0,r.An)("div",W,[Y,(0,r.mY)(" STD: "+(0,c.WA)(e.card.calendar.std?e.$moment(e.card.calendar.std,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0)]),(0,r.QD)("div",j,[e.actypes?((0,r.Wz)(),(0,r.An)("div",q,[R,(0,r.mY)(" A/C#: "+(0,c.WA)(e.actypes)+" ",1),e.actypes?((0,r.Wz)(),(0,r.Az)(s,{key:0},{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.actypes),1)]})),_:1})):(0,r.g1)("",!0)])):(0,r.g1)("",!0),e.gates?((0,r.Wz)(),(0,r.An)("div",P,[e.isPassenger?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("img",U)),e.isPassenger?((0,r.Wz)(),(0,r.An)("img",V)):(0,r.g1)("",!0),(0,r.mY)(" "+(0,c.WA)(e.gates),1)])):(0,r.g1)("",!0)]),(0,r.QD)("div",_,[(0,r.QD)("span",B,(0,c.WA)(e.titleStatus),1),e.storeKanban.isAppOffline?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(u,{key:0,card:e.card,class:"tw-pl-2"},null,8,["card"]))])])])]),e.flightStatuses?((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["bg-gray-c-100 tw-absolute tw-bottom-0 tw-left-0 tw-w-full tw-h-7 tw-py-1 tw-px-2 text-x2 tw-space-x-1 tw-font-extrabold tw-rounded-br-lg tw-uppercase",e.flightStatuses.color])},[(0,r.QD)("div",{onClick:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSelectFlightNumber&&e.openModalSelectFlightNumber.apply(e,t)}),class:"tw-cursor-pointer"},[(0,r.QD)("i",{class:(0,c.WN)(e.flightStatuses.icon)},null,2),(0,r.QD)("span",K,(0,c.WA)(e.flightStatuses.name),1)]),(0,r.QD)("div",H,[((0,r.Wz)(),(0,r.Az)(d,{id:e.card.id,key:e.card.id,card:e.card,dateColumn:e.dateColumn},null,8,["id","card","dateColumn"]))])],2)):(0,r.g1)("",!0),e.card.loading?((0,r.Wz)(),(0,r.An)("div",G,[(0,r.K2)(m,{color:"primary",size:"2em"})])):(0,r.g1)("",!0)],2))])}var J=n(34e3),X=n(86284),ee=n(36852),te=n(30152),ne=n(20240),re=n(8932),ae=n(20584),oe=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ie=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function le(e){return oe(this,void 0,Promise,(function(){var t,n,r;return ie(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),t="apiRoutes.qramp.workOrders",J.c.isAppOffline?[3,2]:[4,ae.c.show(t,e,{refresh:!0,include:"customer,workOrderStatus,operationType,station,contract,responsible,flightStatus,scheduleStatus,gate"})];case 1:return[2,a.sent()];case 2:return[4,re.a4.getItemById(e,t)];case 3:return n=a.sent(),[2,{data:n}];case 4:return r=a.sent(),console.log(r),[2,{data:{}}];case 5:return[2]}}))}))}var se=n(72204),ue=n(49456),ce=n.n(ue),de={date:ce()(),cards:[],page:1,loading:!1,total:0,isDrag:!1,completed:0,uncompleted:0};function me(){try{var e=J.c.columns.find((function(e){return e.date.format("YYYY/MM/DD")===se.c.selectedDate}))||de;return e}catch(t){return console.log(t),de}}var fe=function(){return fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fe.apply(this,arguments)};function pe(e,t){try{var n=me();n.cards=null===n||void 0===n?void 0:n.cards.map((function(n){return n.id===e?fe(fe({},n),{editable:t}):n}))}catch(r){console.log(r)}}var he=function(){return he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},he.apply(this,arguments)},ge=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ye=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function be(e){return ge(this,void 0,Promise,(function(){var t,n;return ye(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,le(e.card.id)];case 1:return t=r.sent(),ne.c.isEdit=!0,ne.c.showInline=!0,ne.c.form=he({},t.data),pe(e.card.id,!0),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}var ve=n(90172),we=n(75836),Ie=(0,we.cB)({showModal:!1,title:"Track flight details",flightNumbers:[],loading:!1}),De=(0,r.S6)((function(){return{get showModal(){return Ie.showModal},set showModal(e){Ie.showModal=e},get loading(){return Ie.loading},set loading(e){Ie.loading=e},get title(){return Ie.title},set title(e){Ie.title=e},get flightNumbers(){return Ie.flightNumbers},set flightNumbers(e){var t=e.faFlightId?e.faFlightId.split("-")[0]:null,n=e.outboundFaFlightId?e.outboundFaFlightId.split("-")[0]:null,r={workOrderId:e.id,faFlightId:e.faFlightId,flightNumber:t||e.inboundFlightNumber,boundScheduleDate:e.inboundScheduleArrival||ce()().format("YYYY-MM-DDTHH:mm:ss"),type:"inbound"},a={workOrderId:e.id,faFlightId:e.outboundFaFlightId,flightNumber:n||e.outboundFlightNumber,boundScheduleDate:e.outboundScheduledDeparture||ce()().format("YYYY-MM-DDTHH:mm:ss"),type:"outbound"};e.inboundFlightNumber&&e.outboundFlightNumber?Ie.flightNumbers=[r,a]:!e.inboundFlightNumber||e.outboundFlightNumber?e.inboundFlightNumber||!e.outboundFlightNumber||(Ie.flightNumbers=[a]):Ie.flightNumbers=[r]},close:function(){Ie.showModal=!1}}})).value;const ke=De;var Me=(0,r.S6)((function(){return function(e){var t;if(e){var n=(0,ee["default"])().getOperationTypeList().find((function(t){return t.id===Number(e)})),r=null===(t=null===n||void 0===n?void 0:n.options)||void 0===t?void 0:t.type;if(r){if("full"===r)return{inbound:!0,outbound:!0};if("inbound"===r)return{inbound:!0,outbound:!1};if("outbound"===r)return{inbound:!1,outbound:!0}}}return{inbound:!1,outbound:!1}}}));const Ae=Me.value;var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},xe.apply(this,arguments)},Te=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Se(e){void 0===e&&(e={});var t=(0,r.uU)("refFormOrders"),n=(0,r.S6)((function(){return J.c.isBlank})),a=(0,r.S6)((function(){return(0,te.c)().getIsPassenger()})),o=(0,r.S6)((function(){return J.c.scheduleType==ve.c[0].value})),i=(0,r.S6)((function(){var t,n=null===(t=(0,ee["default"])().getWorkOrderStatusesList().find((function(t){return t.id===Number(e.card.statusId)})))||void 0===t?void 0:t.color,r=n?"tw-border-".concat(n):"tw-border-gray-200";return r})),l=(0,r.S6)((function(){var t=(0,ee["default"])().getFlightStatusesList().find((function(t){return t.id===Number(e.card.flightStatusId)})),n=t?"tw-text-".concat(t.color):"tw-text-gray-400",r=(null===t||void 0===t?void 0:t.icon)||"fa-solid fa-circle-question";return t?{name:t.name,color:n,icon:r}:{name:"Unknown",color:n,icon:"fa-solid fa-circle-question"}})),s=(0,r.S6)((function(){var t=(0,ee["default"])().getACTypesList().find((function(t){return t.id===Number(e.card.acTypeId)}));return t?t.fullName:""})),u=(0,r.S6)((function(){var t;if((null===(t=e.card.calendar)||void 0===t?void 0:t.gate)&&a.value&&0!==e.card.calendar.gate.trim().length)return e.card.calendar.gate;var n=(0,ee["default"])().getGatesList().find((function(t){return t.id===Number(e.card.gateId)}));return n?"".concat(n.name):null})),c=(0,r.S6)((function(){var t,n=(t={},t[X._G]="Draft",t[X.g1]="Closed",t[X.lC]="Posted",t[X._y]="Submitted",t[X.kz]="Scheduled",t);return n[e.card.statusId]||""}));function d(){return Te(this,void 0,void 0,(function(){var n,r;return Ne(this,(function(i){switch(i.label){case 0:return!o.value&&ne.c.showInline?[2]:o.value||e.card.statusId!==X.kz||a.value?(ne.c.titleModal="Edit schedule Id: ".concat(e.card.id),ne.c.seletedDateColumn=e.dateColumn,e.card.statusId!==X.kz||a.value?(n=re._s.tr("ifly.cms.form.updateWorkOrder")+(e.card.id?" Id: ".concat(e.card.id):""),[4,le(e.card.id)]):[3,3]):(be(e),[2]);case 1:return r=i.sent(),[4,t.value.loadform({modalProps:{title:n,update:!0,workOrderId:r.data.id,width:"90vw"},data:r.data})];case 2:return i.sent(),[2];case 3:return ne.c.isEdit=!0,ne.c.showModal=!0,ne.c.form=xe({},e.card),[2]}}))}))}function m(){var t=null,n=Ae(e.card.operationTypeId);if(n.inbound&&n.outbound)return ke.showModal=!0,void(ke.flightNumbers=e.card);if(n.inbound&&!n.outbound){var r=e.card.faFlightId?e.card.faFlightId.split("-")[0]:null;t={workOrderId:e.card.id,faFlightId:e.card.faFlightId,flightNumber:r||e.card.inboundFlightNumber,boundScheduleDate:e.card.inboundScheduleArrival||ce()().format("YYYY-MM-DDTHH:mm:ss"),type:"inbound"}}if(!n.inbound&&n.outbound){var a=e.card.outboundFaFlightId?e.card.outboundFaFlightId.split("-")[0]:null;t={workOrderId:e.card.id,faFlightId:e.card.outboundFaFlightId,flightNumber:a||e.card.outboundFlightNumber,boundScheduleDate:e.card.outboundScheduledDeparture||ce()().format("YYYY-MM-DDTHH:mm:ss"),type:"outbound"}}(0,te.c)().setWorkOrder(t),(0,te.c)().showVisibleMapModal()}return{colorCheckSchedule:i,titleStatus:c,flightStatuses:l,actypes:s,gates:u,openModalSchedule:d,isBlank:n,isPassenger:a,storeKanban:J.c,openModalSelectFlightNumber:m}}var Ce={key:0,class:"tw-flex tw-items-center tw-space-x-1 tw-border-l tw-border-gray-200 tw-px-2 tw-text-gray-400"},ze=(0,r.QD)("i",{class:"fa-solid fa-comment"},null,-1),Oe={class:"tw-font-bold tw-text-sm"},$e={key:0,class:"tw-py-2"},Qe=(0,r.QD)("i",{class:"fa-thin fa-spinner-third fa-spin fa-pulse tw-text-2xl"},null,-1),Le=[Qe],Ee={key:1},Fe=(0,r.QD)("p",{class:"tw-text-sm tw-font-semibold"},"Last comment",-1),We=["innerHTML"];function Ye(e,t,n,a,o,i){var l=(0,r.E1)("q-tooltip");return(0,r.Wz)(),(0,r.An)("div",null,[e.permisionComments&&e.card.comments&&e.card.comments>0?((0,r.Wz)(),(0,r.An)("div",Ce,[ze,(0,r.QD)("span",Oe,(0,c.WA)(e.card.comments),1),(0,r.K2)(l,{modelValue:e.showTooltip,"onUpdate:modelValue":[t[0]||(t[0]=function(t){return e.showTooltip=t}),t[1]||(t[1]=function(t){return e.changeLastComment(e.card)})],"content-class":{tooltipComments:!0,"tw-text-center":e.loadingComment},offset:[10,10]},{default:(0,r.Ql)((function(){return[e.loadingComment?((0,r.Wz)(),(0,r.An)("div",$e,Le)):((0,r.Wz)(),(0,r.An)("div",Ee,[Fe,(0,r.QD)("div",{class:"tw-text-sm",innerHTML:e.lastComment},null,8,We)]))]})),_:1},8,["modelValue","content-class"])])):(0,r.g1)("",!0)])}var je=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},qe=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Re=(0,we.cB)({lastComment:"",loading:!1});function Pe(e){return je(this,void 0,Promise,(function(){var t,n,r,a;return qe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),_e(""),Re.loading=!0,t={refresh:!0,params:{filter:{order:{field:"id",way:"desc"},commentableType:"Modules\\Ramp\\Entities\\WorkOrder",commentableId:e},page:1,take:1}},[4,ae.c.index("apiRoutes.qramp.comments",t)];case 1:return n=o.sent(),r=n.data.length>0?n.data[0].comment:"",_e(r),setTimeout((function(){Re.loading=!1}),100),[3,3];case 2:return a=o.sent(),_e(""),Re.loading=!1,console.log("getCommentsFilter::",a),[3,3];case 3:return[2]}}))}))}function Ue(){return Re.lastComment}function Ve(){return Re.loading}function _e(e){Re.lastComment=e}var Be=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ke=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function He(e){var t=(0,we.IL)(!1),n=(0,r.S6)((function(){return Ve()})),a=(0,r.S6)((function(){return e.card})),o=(0,r.S6)((function(){return e.sizeBadge})),i=(0,r.S6)((function(){return e.iconClass})),l=(0,r.S6)((function(){return re.is.hasAccess("ramp.work-orders-comments.index")})),s=(0,r.S6)((function(){return Ue()}));function u(e){return Be(this,void 0,void 0,(function(){return Ke(this,(function(n){switch(n.label){case 0:return[4,_e("")];case 1:return n.sent(),t.value?[4,Pe(e.id)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}return{card:a,permisionComments:l,loadingComment:n,changeLastComment:u,lastComment:s,sizeBadge:o,iconClass:i,showTooltip:t}}var Ge=function(){return Ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ge.apply(this,arguments)};const Ze=(0,r._M)({props:{card:{default:function(){}},sizeBadge:{type:Number,default:function(){return 9}},iconClass:{type:String,default:function(){return""}},mainClass:{type:String,default:function(){return""}}},setup:function(e){return Ge({},He(e))}});var Je=n(68716),Xe=n(90111),et=n(95252),tt=n.n(et);const nt=(0,Je.c)(Ze,[["render",Ye]]),rt=nt;function at(e,t,n,a,o,i){var l=(0,r.E1)("q-tooltip"),s=(0,r.E1)("q-btn");return e.showKanbanCardsActions?((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["tw-flex tw-ml-auto tw-space-x-2 w-60 action-icon",{"tw-mr-5":e.isDesktop,"tw-mr-2":e.isTablet}])},[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.cardActions,(function(e,t){return(0,r.Wz)(),(0,r.An)(r.ae,{key:t},[e.vIf?((0,r.Wz)(),(0,r.Az)(s,{key:0,flat:"",dense:"",size:"sm",icon:e.icon,onClick:e.action},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.toolttip),1)]})),_:2},1024)]})),_:2},1032,["icon","onClick"])):(0,r.g1)("",!0)],64)})),128))],2)):(0,r.g1)("",!0)}tt()(Ze,"components",{QTooltip:Xe.c});var ot=n(81628);const it={mobile:{label:"mobile",maxWidth:724},tablet:{label:"tablet",maxWidth:1440},desktop:{label:"desktop",maxWidth:4e3}};var lt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},st=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function ut(e){return lt(this,void 0,Promise,(function(){var t,n;return st(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t="apiRoutes.qramp.workOrders",[4,Promise.allSettled([re.a4.deleteItem(e,t),ae.c.delete(t,e,{data:{attributes:{id:e,titleOffline:"Delete Work Order"}}})])];case 1:return r.sent(),re.Qb.info("workOrders was deleted correctly"),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))}var ct=n(45448),dt=function(){return dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},dt.apply(this,arguments)},mt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ft=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function pt(e){void 0===e&&(e={});var t=(0,r.uU)("refFormOrders"),n=(0,r.S6)((function(){return J.c.isBlank})),a=(0,r.S6)((function(){return(0,te.c)().getIsPassenger()})),o=(0,r.S6)((function(){return ot.c.width<it.mobile.maxWidth})),i=(0,r.S6)((function(){return ot.c.width>=it.mobile.maxWidth&&ot.c.width<it.tablet.maxWidth})),l=(0,r.S6)((function(){return ot.c.width>=it.tablet.maxWidth})),s=(0,r.S6)((function(){return J.c.scheduleType==ve.c[1].value&&!n.value})),u=(0,r.S6)((function(){var e="kanbanCardTablet",t="kanbanCardDesktop";return i.value?e:t})),c=(0,r.S6)((function(){return!ne.c.showInline&&!ne.c.showModal})),d=(0,r.S6)((function(){return[{vIf:c.value&&e.card.statusId===X.kz,icon:"fa-light fa-bring-forward",toolttip:"Start Work Order",action:function(){p()}},{vIf:re.is.hasAccess("ramp.work-orders.create")&&c.value,icon:"fa-light fa-copy",toolttip:"Duplicate",action:function(){g()}},{vIf:re.is.hasAccess("ramp.work-orders.edit")&&c.value,icon:"fa-light fa-pen-to-square",toolttip:re._s.tr("isite.cms.label.edit"),action:function(){e.card.statusId!==X.kz||a.value?f():be(e)}},{vIf:re.is.hasAccess("ramp.work-orders.destroy")&&c.value,icon:"fa-light fa-trash",toolttip:re._s.tr("isite.cms.label.delete"),action:function(){re.Qb.error({mode:"modal",title:"".concat(e.card.calendar.title),message:re._s.tr("isite.cms.message.deleteRecord"),actions:[{label:re._s.tr("isite.cms.label.cancel"),color:"grey"},{label:re._s.tr("isite.cms.label.delete"),color:"red",handler:function(){h()}}]})}}]}));function m(){return mt(this,void 0,void 0,(function(){var n,r;return ft(this,(function(a){switch(a.label){case 0:return n=re._s.tr("ifly.cms.form.updateWorkOrder")+(e.card.id?" Id: ".concat(e.card.id):""),[4,le(e.card.id)];case 1:return r=a.sent(),[4,t.value.loadform({modalProps:{title:n,update:!0,workOrderId:r.data.id,width:"90vw"},data:r.data})];case 2:return a.sent(),[2]}}))}))}function f(){return mt(this,void 0,void 0,(function(){return ft(this,(function(t){return ne.c.titleModal="Edit schedule Id: ".concat(e.card.id),ne.c.seletedDateColumn=e.dateColumn,e.card.statusId!==X.kz||a.value?(m(),[2]):(ne.c.isEdit=!0,ne.c.showModal=!0,ne.c.form=dt({},e.card),[2])}))}))}function p(){return mt(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return ne.c.seletedDateColumn=e.dateColumn,ne.c.loading=!0,[4,(0,te.c)().changeStatus(X._G,e.card.id)];case 1:return t.sent(),[4,(0,ct["default"])(!0)];case 2:return t.sent(),[4,m()];case 3:return t.sent(),ne.c.loading=!1,ne.c.showInline=!1,[2]}}))}))}function h(){return mt(this,void 0,void 0,(function(){var t;return ft(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Promise.allSettled([ut(e.card.id),setTimeout((function(){(0,ct["default"])(!0)}),1e3)])];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))}function g(){return mt(this,void 0,void 0,(function(){var t,n,r,a;return ft(this,(function(o){return ne.c.seletedDateColumn=e.dateColumn,t=me(),n=t.cards.find((function(t){return t.id===e.card.id})),r=t.cards.indexOf(n),a=dt({},n),delete a.id,a.duplicated=!0,a.editable=!0,t.cards.splice(r,0,a),ne.c.isEdit=!1,ne.c.showInline=!0,ne.c.form=dt({},a),[2]}))}))}return{openModalSchedule:f,isBlank:n,isPassenger:a,isMobile:o,isTablet:i,isDesktop:l,showKanbanCardsActions:s,cardActions:d,cardComponentName:u}}var ht=function(){return ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ht.apply(this,arguments)};const gt=(0,r._M)({props:{card:{type:Object,required:!0},dateColumn:{type:String,default:function(){return null}}},setup:function(e){return ht({},pt(e))}});var yt=n(99140);const bt=(0,Je.c)(gt,[["render",at],["__scopeId","data-v-1f3e8516"]]),vt=bt;tt()(gt,"components",{QBtn:yt.c,QTooltip:Xe.c});var wt={key:0,class:"tw-py-4"},It={class:"tw-px-2 tw-py-8 popover-w-490 tw-bg-white lg:tw-max-w-4xl tw-text-xs lg:tw-text-base tw-mb-1"},Dt=(0,r.QD)("div",{class:"text-header-chep tw--mt-3 tw-mx-3 tw-pb-3"}," Chosen Services ",-1),kt={class:"tw-cursor-pointer tw-border-gray-200 tw-border-r-2 tw-pr-2 tw-mr-2 tw-truncate"},Mt={class:"tw-truncate tw-flex text-color-bag"},At={key:0,class:"tw-pr-1"},xt={key:1},Tt={key:0},Nt=(0,r.QD)("i",{class:"fa-solid fa-circle-check tw-text-green-500"},null,-1),St=[Nt],Ct={key:1};function zt(e,t,n,a,o,i){var l=(0,r.E1)("q-badge"),s=(0,r.E1)("q-spinner-tail"),u=(0,r.E1)("q-popup-proxy"),d=(0,r.E1)("q-tooltip"),m=(0,r.E1)("q-btn");return e.workOrderItemsTotal>0?((0,r.Wz)(),(0,r.An)("div",wt,[e.workOrderItemsTotal>0?((0,r.Wz)(),(0,r.Az)(m,{key:0,icon:"fa-light fa-briefcase-blank","text-color":"primary",size:e.size,round:"",flat:"",onClick:e.getWorkOrderItems},{default:(0,r.Ql)((function(){return[e.workOrderItemsTotal>0?((0,r.Wz)(),(0,r.Az)(l,{key:0,floating:"",rounded:"",color:"primary",size:"xs"},{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.workOrderItemsTotal),1)]})),_:1})):(0,r.g1)("",!0),(0,r.K2)(u,{ref:"popupProxyRef","content-class":"\n          popover-w-490 \n          lg:tw-bg-white \n          tw-shadow-2xl \n          tw-max-h-72\n          tw-pb-4 \n          lg:tw-overflow-x-hidden"},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",It,[Dt,((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.workOrdersItems,(function(t,n){return(0,r.Wz)(),(0,r.An)("div",{key:n,class:"tw-flex tw-py-1 hover-color-chep text-blue-chep tw-rounded-full tw-pl-3 tw-pr-3 text-chep"},[(0,r.QD)("div",kt,(0,c.WA)(e.nameProduct(t.productId)),1),(0,r.QD)("div",Mt,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(t.workOrderItemAttributes,(function(e,t){return(0,r.Wz)(),(0,r.An)("div",{key:t,class:"tw-flex"},[e.value&&t>0?((0,r.Wz)(),(0,r.An)("div",At,",")):(0,r.g1)("",!0),e.value?((0,r.Wz)(),(0,r.An)("div",xt,[(0,r.mY)((0,c.WA)(e.name)+": ",1),"checkbox"===e.type?((0,r.Wz)(),(0,r.An)("span",Tt,St)):((0,r.Wz)(),(0,r.An)("span",Ct,(0,c.WA)(e.value),1))])):(0,r.g1)("",!0)])})),128))])])})),128))]),e.loading?((0,r.Wz)(),(0,r.Az)(s,{key:0,class:"tw-mx-auto tw-my-2",color:"primary",size:"3em"})):(0,r.g1)("",!0)]})),_:1},512),(0,r.K2)(d,null,{default:(0,r.Ql)((function(){return[(0,r.mY)(" Service summary ")]})),_:1})]})),_:1},8,["size","onClick"])):(0,r.g1)("",!0)])):(0,r.g1)("",!0)}var Ot=n(6472),$t=n(60368),Qt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Lt=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Et=function(e){return Qt(void 0,void 0,void 0,(function(){var t,n;return Lt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t={refresh:!0,params:{include:"workOrderItemAttributes",filter:{workorderId:e}}},[4,ae.c.index("apiRoutes.qramp.workOrderItems",t)];case 1:return[2,r.sent()];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return[2]}}))}))};const Ft=Et;var Wt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Yt=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},jt=function(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var n=(0,r.S6)((function(){return e.workOrderItemsTotal})),a=(0,we.IL)(!1),o=(0,we.IL)([]),i=(0,we.IL)(null),l=function(e){return(0,$t.c)((0,Ot.c)().getServiceList(),e)};function s(){return Wt(this,void 0,void 0,(function(){var t,n;return Yt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a.value=!0,[4,Ft(e.workOrderId)];case 1:return t=r.sent(),o.value=t.data,a.value=!1,[3,3];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return[2]}}))}))}return{nameProduct:l,popupProxyRef:i,workOrderItemsTotal:n,workOrdersItems:o,getWorkOrderItems:s,loading:a}};const qt=jt;var Rt=function(){return Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rt.apply(this,arguments)};const Pt=(0,r._M)({props:{size:{type:String,default:function(){return"xs"}},workOrderItemsTotal:{type:Number,default:function(){return 0}},workOrderId:{type:Number,default:function(){return 0}}},setup:function(e,t){var n=t.emit;return Rt({},qt(e,n))}});var Ut=n(29104),Vt=n(7120),_t=n(62180);const Bt=(0,Je.c)(Pt,[["render",zt]]),Kt=Bt;tt()(Pt,"components",{QBtn:yt.c,QBadge:Ut.c,QPopupProxy:Vt.c,QSpinnerTail:_t.c,QTooltip:Xe.c});var Ht=function(){return Ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ht.apply(this,arguments)};const Gt=(0,r._M)({components:{lastComments:rt,kanbanCardActions:vt,chipServices:Kt},props:{card:{type:Object,required:!0},dateColumn:{type:String,default:function(){return null}},isWeekAgenda:{type:Boolean,default:!1}},setup:function(e){return Ht({},Se(e))}});var Zt=n(21028);const Jt=(0,Je.c)(Gt,[["render",Z],["__scopeId","data-v-709d1ca6"]]),Xt=Jt;tt()(Gt,"components",{QTooltip:Xe.c,QSpinner:Zt.c});var en=n(79212),tn=n(19628),nn=function(){return nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},nn.apply(this,arguments)},rn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},an=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function on(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=1),rn(this,void 0,Promise,(function(){var r,a,o,i,l;return an(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=n.startOf("day"),a=n.endOf("day"),o=se.c.filterTime,[4,(0,tn.c)(e,t,{field:(0,te.c)().getIsPassenger()?"schedule_date_local":"schedule_date",type:"customRange",from:r.set({hour:o[0],minute:0,second:0}).format("YYYY-MM-DD HH:mm:ss"),to:a.set({hour:o[1],minute:59,second:59}).format("YYYY-MM-DD HH:mm:ss")})];case 1:return i=s.sent(),[2,i];case 2:return l=s.sent(),console.log(l),[2,nn({},en.c)];case 3:return[2]}}))}))}var ln=function(){return ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ln.apply(this,arguments)},sn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function cn(e,t){return sn(this,void 0,Promise,(function(){var n,r,a,o,i,l,s,u;return un(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),n="apiRoutes.qramp.workOrders",r="MM/DD/YYYY HH:mm",a="YYYY-MM-DDTHH:mm:ss",o=ln({},t),i=ln({},t),J.c.isAppOffline&&(i.titleOffline=re._s.tr("ifly.cms.form.updateWorkOrder")),o.inboundFlightNumber&&(o.calendar={title:o.inboundFlightNumber}),t.inboundScheduledArrival?(l=ce()(t.inboundScheduledArrival,r).format(a),o.scheduleDate=l):t.outboundScheduledDeparture&&(s=ce()(t.outboundScheduledDeparture,r).format(a),o.scheduleDate=s),t.inboundScheduledArrival&&(l=ce()(t.inboundScheduledArrival,r).format(a),o.inboundScheduledArrival=l),t.outboundScheduledDeparture&&(s=ce()(t.outboundScheduledDeparture,r).format(a),o.outboundScheduledDeparture=s),[4,Promise.allSettled([re.a4.updateRecord(n,o,null===o||void 0===o?void 0:o.id),ae.c.update(n,e,i)])];case 1:return c.sent(),[3,3];case 2:return u=c.sent(),console.log(u),[3,3];case 3:return[2]}}))}))}var dn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function fn(){return dn(this,void 0,Promise,(function(){var e,t,n,r;return mn(this,(function(a){try{e="YYYY/MM/DD",t=ce()(se.c.selectedDate,e),n=se.c.payload,n.type=se.c.scheduleType,r=se.c.scheduleType==ve.c[0].value,r?(n.dateStart=t.startOf("week").format("YYYYMMDD"),n.dateEnd=t.endOf("week").format("YYYYMMDD")):n.dateStart=t.format("YYYYMMDD"),ne.c.stationId=n.stationId,se.c.form.stationId&&re.qu.set("stationId",se.c.form.stationId),re.us.push({name:re.us.route.name,query:n}).catch((function(e){"NavigationDuplicated"!=e.name&&console.log(e)}))}catch(o){console.log(o)}return[2]}))}))}var pn=n(66740),hn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},gn=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function yn(e){void 0===e&&(e={}),(0,r.Zl)("singleRefreshmentColumn",y);var t=(0,we.IL)(!1),n=(0,we.IL)(null),a=(0,we.IL)(null),o=(0,r.S6)({get:function(){return e.column.cards},set:function(t){return e.column.cards=t}}),i=(0,r.S6)((function(){return J.c.isBlank})),l=(0,r.S6)((function(){return J.c.scheduleType==ve.c[0].value})),s=(0,r.S6)((function(){var e="kanban-card",t="kanban-day";return J.c.scheduleType==ve.c[1].value&&ot.c.width>it.mobile.maxWidth?t:e})),u=(0,r.S6)((function(){return e.column.date})),c=(0,r.S6)({get:function(){return se.c.selectedDate},set:function(e){return se.c.selectedDate=e}}),d=(0,r.S6)({get:function(){return J.c.isDraggingCard},set:function(e){return J.c.isDraggingCard=e}}),m=(0,r.S6)((function(){return function(e,t,n){var r=ce()(n[e-1].scheduleDate).format("HH"),a=ce()(t.scheduleDate).format("HH");return 0!==e&&a===r}}));function f(){return hn(this,void 0,void 0,(function(){return gn(this,(function(t){switch(t.label){case 0:return ne.c.showInline=!1,J.c.scheduleType!=ve.c[0].value?[3,2]:(e.column.loading=!0,J.c.columns=[],se.c.selectedDate=u.value.format("YYYY/MM/DD"),se.c.scheduleType=ve.c[1].value,J.c.scheduleType=se.c.scheduleType,[4,(0,ct["default"])()]);case 1:t.sent(),e.column.loading=!1,fn(),t.label=2;case 2:return[2]}}))}))}function p(e){e.forEach((function(e){var t=e.isIntersecting;t&&h()}))}function h(){return hn(this,void 0,void 0,(function(){var n,r,a;return gn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e.column.loading||e.column.total===o.value.length?[2]:(t.value=!0,e.column.page=e.column.page+1,[4,on(!0,e.column.page,u.value)]);case 1:return n=i.sent(),(a=o.value).push.apply(a,n.data),t.value=!1,[3,3];case 2:return r=i.sent(),console.log(r),t.value=!1,[3,3];case 3:return[2]}}))}))}function g(e,t){return hn(this,void 0,void 0,(function(){var n,r,a,o,i;return gn(this,(function(l){switch(l.label){case 0:return n=e.startOf("day"),r=e.endOf("day"),a=se.c.filterTime,o={field:(0,te.c)().getIsPassenger()?"schedule_date_local":"schedule_date",type:"customRange",from:n.set({hour:a[0],minute:0,second:0}).format("YYYY-MM-DD HH:mm:ss"),to:r.set({hour:a[1],minute:59,second:59}).format("YYYY-MM-DD HH:mm:ss")},[4,(0,pn.c)(!0,o)];case 1:return i=l.sent(),t.completed=i.data.completed,t.uncompleted=i.data.uncompleted,[2]}}))}))}function y(t){return void 0===t&&(t=null),hn(this,void 0,void 0,(function(){var n,r,a,o;return gn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.column.cards=[],n=1,e.column.loading=!0,r=t||u.value,[4,g(r,e.column)];case 1:return i.sent(),[4,on(!0,n,r)];case 2:return a=i.sent(),e.column.page=n,e.column.cards=a.data,e.column.loading=!1,[3,4];case 3:return o=i.sent(),console.log(o),e.column.loading=!1,[3,4];case 4:return[2]}}))}))}function b(t){void 0===t&&(t=!1),i||J.c.columns.forEach((function(n){t&&e.column.date===n.date?n.isDrag=t:n.isDrag=!1}))}function v(e){return hn(this,void 0,void 0,(function(){var t,n,r,a,o,i;return gn(this,(function(l){switch(l.label){case 0:if(e.from.id===e.to.id)return[2];if(t=J.c.columns.find((function(t){return t.date.format("YYYY-MM-DD")===e.to.id})),!t)return[2];l.label=1;case 1:return l.trys.push([1,6,,7]),t.loading=!0,n=t.cards.find((function(t){return String(t.id)===String(e.item.id)})),n?(r=w(n,e),t.cards=[],[4,cn(e.item.id,r)]):[2];case 2:return l.sent(),t.page=1,[4,on(!0,t.page,ce()(e.to.id))];case 3:return a=l.sent(),o=J.c.columns.find((function(t){return t.date.format("YYYY-MM-DD")==e.from.id})),[4,g(o.date,o)];case 4:return l.sent(),[4,g(t.date,t)];case 5:return l.sent(),t.cards=a.data,t.loading=!1,[3,7];case 6:return i=l.sent(),console.log(i),t.loading=!1,[3,7];case 7:return[2]}}))}))}function w(e,t){var n="YYYY-MM-DDTHH:mm:ss",r=ce()(e.inboundScheduledArrival,n),a=ce()(e.outboundScheduledDeparture,n),o=ce()(t.to.id,"YYYY-MM-DD"),i=Ae(e.operationTypeId);if(i.inbound&&!i.outbound&&(r="".concat(o.format("MM/DD/YYYY")," ").concat(r.format("HH:mm")),a=null),!i.inbound&&i.outbound&&(r=null,a="".concat(o.format("MM/DD/YYYY")," ").concat(a.format("HH:mm"))),i.inbound&&i.outbound){var l=o.diff(r,"days");a.add(l,"days"),r="".concat(o.format("MM/DD/YYYY")," ").concat(r.format("HH:mm")),a=a.format("MM/DD/YYYY HH:mm")}return{id:t.item.id,inboundScheduledArrival:e.inboundScheduledArrival&&r?r:null,outboundScheduledDeparture:e.outboundScheduledDeparture&&a?a:null}}return(0,r.u2)((function(){var e={root:n.value},t=a.value,r=new IntersectionObserver(p,e);t&&r.observe(t)})),{selectedDate:c,storeKanban:J.c,isDraggingCard:d,cardHours:m,isLoading:t,cards:o,date:u,singleRefreshment:y,setDrag:b,changeDate:v,isBlank:i,isWeekAgenda:l,showKanbanDay:f,cardComponentName:s,refKanbanColumn:n,refTrigger:a}}var bn={key:0,class:"tw-text-slate-500"},vn={key:0},wn=(0,r.QD)("span",{class:"tw-text-orange-400"},[(0,r.QD)("i",{class:"fa-solid fa-circle-exclamation"})],-1),In={class:"tw-text-sm tw-ml-1.5"},Dn={key:1},kn=(0,r.QD)("span",{class:"tw-text-green-500"},[(0,r.QD)("i",{class:"fa-solid fa-circle-exclamation"})],-1),Mn={class:"tw-text-sm tw-ml-1.5"},An={class:"tw-inline-flex tw-items-center tw-justify-center"};function xn(e,t,n,a,o,i){var l=(0,r.E1)("q-tooltip"),s=(0,r.E1)("q-btn");return(0,r.Wz)(),(0,r.An)("div",null,[["day-agenda","week-agenda"].includes(e.scheduleType)?((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)([{"h-43":0===e.cards.length},"tw-inline-flex tw-items-center tw-w-full tw-px-4 tw-py-2 tw-mt-1 tw-text-xs lg:tw-text-base tw-leading-none tw-bg-white tw-rounded-lg tw-label-not tw-h-12"])},[e.cards.length>0?((0,r.Wz)(),(0,r.An)("div",bn,[e.uncompleted?((0,r.Wz)(),(0,r.An)("div",vn,[wn,(0,r.QD)("span",In,(0,c.WA)(e.uncompleted)+" Not completed ",1)])):(0,r.g1)("",!0),e.completed?((0,r.Wz)(),(0,r.An)("div",Dn,[kn,(0,r.QD)("span",Mn,(0,c.WA)(e.completed)+" Completed ",1)])):(0,r.g1)("",!0)])):(0,r.g1)("",!0),(0,r.QD)("div",{class:(0,c.WN)(["tw-absolute tw-right-5",{"tw-mt-1":0===e.cards.length}])},[(0,r.QD)("div",An,[e.isBlank||e.showInline?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(s,{key:0,icon:"fa-light fa-plus tw-text-blue-500",size:"sm",outline:"",unelevated:"",flat:"",dense:"",onClick:e.openForm},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,null,{default:(0,r.Ql)((function(){return[(0,r.mY)(" Create schedule ")]})),_:1})]})),_:1},8,["onClick"])),(0,r.QD)("span",{class:(0,c.WN)(["tw-h-4 tw-text-lg tw-text-gray-200 tw-mx-2",{"tw-border-l-2":!e.isBlank}])},null,2),(0,r.K2)(s,{icon:"fa-light fa-rotate-right tw-text-blue-500",size:"sm",outline:"",unelevated:"",flat:"",dense:"",onClick:e.refresh},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.$trp("isite.cms.label.refresh")),1)]})),_:1})]})),_:1},8,["onClick"])])],2)],2)):(0,r.g1)("",!0)])}function Tn(e,t){var n=(0,r.S6)((function(){return J.c.isBlank})),a=(0,r.S6)((function(){return e.scheduleType})),o=(0,r.S6)((function(){return e.column.date.format("YYYY-MM-DD")})),i=(0,r.S6)((function(){return e.column.cards})),l=(0,r.S6)((function(){return ne.c.showInline})),s=(0,r.S6)({get:function(){return ne.c.showModal},set:function(e){return ne.c.showModal=e}}),u=(0,r.S6)({get:function(){return ne.c.titleModal},set:function(e){return ne.c.titleModal=e}}),c=(0,r.S6)((function(){return e.isWeekAgenda?f:p})),d=(0,r.S6)((function(){return e.column.completed})),m=(0,r.S6)((function(){return e.column.uncompleted}));function f(){ne.c.isEdit=!1,s.value=!0,u.value="Create schedule date: ".concat(o.value),ne.c.seletedDateColumn=o.value}function p(){ne.c.isEdit=!1,ne.c.showInline=!0,ne.c.seletedDateColumn=o.value;var e={id:!1,editable:!0,statusId:null},t=me();t.cards.unshift(e)}function h(){ne.c.showInline=!1,t("refresh")}return{scheduleType:a,modalShowSchedule:s,refresh:h,openModalForm:f,isBlank:n,openInlineForm:p,showInline:l,openForm:c,completed:d,uncompleted:m,cards:i}}var Nn=function(){return Nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Nn.apply(this,arguments)};const Sn=(0,r._M)({props:{scheduleType:{type:String,default:function(){return"week-agenda"}},isWeekAgenda:{type:Boolean,default:!0},column:{type:Object,default:function(){}}},setup:function(e,t){var n=t.emit;return Nn({},Tn(e,n))}}),Cn=(0,Je.c)(Sn,[["render",xn]]),zn=Cn;function On(e,t,n,a,o,i){return(0,r.Wz)(),(0,r.An)("div",null,[((0,r.Wz)(),(0,r.Az)((0,r.mk)(e.cardComponentName),{cardComponentName:"",id:e.card.id,key:e.card.id,card:e.card,dateColumn:e.dateColumn},null,8,["id","card","dateColumn"]))])}tt()(Sn,"components",{QBtn:yt.c,QTooltip:Xe.c});var $n=function(e){return(0,r.ED)("data-v-2ab8c846"),e=e(),(0,r.ii)(),e},Qn={class:"tw-flex tw-p-2"},Ln={class:"text-kanban-card-tablet"},En={key:0,class:"arrival-text-tablet"},Fn=$n((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-down-right tw-mr-1"},null,-1)})),Wn={key:1,class:"arrival-text-tablet"},Yn=$n((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-up-right tw-mx-1"},null,-1)})),jn={class:"ac-type-text-tablet"},qn=$n((function(){return(0,r.QD)("i",{class:"fa-solid fa-plane tw-mr-1"},null,-1)})),Rn={key:0,class:"tw-flex"},Pn={key:0,src:A(),class:"tw-pr-1",alt:"",srcset:""},Un={key:1,src:T(),class:"tw-pr-1",alt:"",srcset:""},Vn={class:"tw-uppercase text-kanban-card-tablet"},_n={key:0,class:"tw-flex tw-32 tw-p-2"};function Bn(e,t,n,a,o,i){var l=(0,r.E1)("lastComments"),s=(0,r.E1)("chipServices"),u=(0,r.E1)("kanbanCardActions");return(0,r.Wz)(),(0,r.An)("div",null,[e.card.editable?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["tw-flex tw-flex-row tw-rounded-lg tw-border-l-8 tw-my-2 tw-border-blue-400 tw-bg-white items-center showCard",e.colorCheckSchedule])},[(0,r.QD)("div",Qn,[(0,r.QD)("div",{class:"tw-min-w-36 tw-cursor-pointer",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("p",Ln,(0,c.WA)(e.card.calendar.title),1),e.card.calendar.sta?((0,r.Wz)(),(0,r.An)("span",En,[Fn,(0,r.mY)("STA: "+(0,c.WA)(e.card.calendar.sta?e.$moment(e.card.calendar.sta,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0),e.card.calendar.std?((0,r.Wz)(),(0,r.An)("span",Wn,[Yn,(0,r.mY)("STD: "+(0,c.WA)(e.card.calendar.std?e.$moment(e.card.calendar.std,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0)])]),(0,r.QD)("div",{class:"tw-flex tw-36 tw-p-2 tw-cursor-pointer",onClick:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("div",jn,[(0,r.QD)("div",null,[qn,(0,r.mY)("A/C#: "+(0,c.WA)(e.actypes),1)]),e.gates?((0,r.Wz)(),(0,r.An)("div",Rn,[e.isPassenger?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("img",Pn)),e.isPassenger?((0,r.Wz)(),(0,r.An)("img",Un)):(0,r.g1)("",!0),(0,r.mY)(" "+(0,c.WA)(e.gates),1)])):(0,r.g1)("",!0)])]),(0,r.QD)("div",{class:"tw-flex tw-32 tw-p-2 tw-cursor-pointer",onClick:t[2]||(t[2]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("div",Vn,(0,c.WA)(e.titleStatus),1),(0,r.K2)(l,{card:e.card,class:"tw-pl-2"},null,8,["card"])]),e.flightStatuses?((0,r.Wz)(),(0,r.An)("div",_n,[(0,r.QD)("div",{class:"tw-rounded-lg tw-border-2 tw-border-gray-200 tw-px-2 tw-py-1 tw-uppercase tw-cursor-pointer text-status-tablet",onClick:t[3]||(t[3]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSelectFlightNumber&&e.openModalSelectFlightNumber.apply(e,t)})},[(0,r.QD)("span",{class:(0,c.WN)(e.flightStatuses.color)},[(0,r.QD)("i",{class:(0,c.WN)(["tw-mr-1",e.flightStatuses.icon])},null,2),(0,r.mY)((0,c.WA)(e.flightStatuses.name),1)],2)])])):(0,r.g1)("",!0),(0,r.K2)(s,{workOrderItemsTotal:e.card.workOrderItemsTotal,workOrderId:e.card.id,size:"sm"},null,8,["workOrderItemsTotal","workOrderId"]),((0,r.Wz)(),(0,r.Az)(u,{id:e.card.id,key:e.card.id,card:e.card,dateColumn:e.dateColumn},null,8,["id","card","dateColumn"]))],2))])}var Kn=function(){return Kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Kn.apply(this,arguments)};const Hn=(0,r._M)({components:{lastComments:rt,kanbanCardActions:vt,chipServices:Kt},props:{card:{type:Object,required:!0},dateColumn:{type:String,default:function(){return null}}},setup:function(e){return Kn({},Se(e))}}),Gn=(0,Je.c)(Hn,[["render",Bn],["__scopeId","data-v-2ab8c846"]]),Zn=Gn;var Jn=n(96444),Xn=n.n(Jn),er=n(34504),tr=n.n(er),nr=n(88524),rr=n.n(nr),ar=function(e){return(0,r.ED)("data-v-a001bb0e"),e=e(),(0,r.ii)(),e},or=ar((function(){return(0,r.QD)("div",{class:"tw-flex tw-mx-6"},[(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""})],-1)})),ir={key:0},lr=ar((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-down-right tw-mr-2"},null,-1)})),sr={key:1},ur=ar((function(){return(0,r.QD)("i",{class:"fa-solid fa-arrow-up-right tw-ml-4 tw-mr-1"},null,-1)})),cr=ar((function(){return(0,r.QD)("div",{class:"tw-flex tw-mx-6"},[(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""})],-1)})),dr=ar((function(){return(0,r.QD)("i",{class:"fa-solid fa-plane tw-mr-1"},null,-1)})),mr={key:0,class:"tw-flex tw-mx-6"},fr=ar((function(){return(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""},null,-1)})),pr=[fr],hr={key:1,class:"tw-flex ac-type-text-desktop"},gr={key:0,src:tr(),class:"tw-pr-1",alt:"",srcset:""},yr={key:1,src:rr(),class:"tw-pr-1",alt:"",srcset:""},br=ar((function(){return(0,r.QD)("div",{class:"tw-flex tw-mx-6"},[(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""})],-1)})),vr={class:"tw-uppercase text-kanban-card-desktop"},wr={key:2,class:"tw-flex tw-mx-6"},Ir=ar((function(){return(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""},null,-1)})),Dr=[Ir],kr={key:3,class:"tw-flex tw-32 tw-p-2"},Mr={key:4,class:"tw-flex tw-mx-6"},Ar=ar((function(){return(0,r.QD)("img",{src:Xn(),alt:"",srcset:"",class:""},null,-1)})),xr=[Ar];function Tr(e,t,n,a,o,i){var l=(0,r.E1)("lastComments"),s=(0,r.E1)("chipServices"),u=(0,r.E1)("kanbanCardActions");return(0,r.Wz)(),(0,r.An)("div",null,[e.card.editable?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,c.WN)(["tw-flex tw-flex-row tw-rounded-lg tw-border-l-8 tw-my-2 tw-py-2 tw-border-blue-400 tw-bg-white items-center showCard",e.colorCheckSchedule])},[(0,r.QD)("div",{class:"tw-flex tw-p-2 tw-pl-6 tw-cursor-pointer text-kanban-card-desktop",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("p",null,(0,c.WA)(e.card.calendar.title),1)]),or,(0,r.QD)("div",{class:"tw-flex tw-p-2 tw-cursor-pointer arrival-text-desktop",onClick:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[e.card.calendar.sta?((0,r.Wz)(),(0,r.An)("div",ir,[lr,(0,r.mY)("STA: "+(0,c.WA)(e.card.calendar.sta?e.$moment(e.card.calendar.sta,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0),e.card.calendar.std?((0,r.Wz)(),(0,r.An)("div",sr,[ur,(0,r.mY)("STD: "+(0,c.WA)(e.card.calendar.std?e.$moment(e.card.calendar.std,"HHmm").format("HH:mm"):""),1)])):(0,r.g1)("",!0)]),cr,(0,r.QD)("div",{class:"tw-flex tw-cursor-pointer ac-type-text-desktop",onClick:t[2]||(t[2]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("p",null,[dr,(0,r.mY)("A/C#: "+(0,c.WA)(e.actypes),1)])]),e.gates?((0,r.Wz)(),(0,r.An)("div",mr,pr)):(0,r.g1)("",!0),e.gates?((0,r.Wz)(),(0,r.An)("div",hr,[(0,r.QD)("p",null,[(0,r.QD)("div",{class:"tw-flex tw-cursor-pointer",onClick:t[3]||(t[3]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[e.isPassenger?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("img",gr)),e.isPassenger?((0,r.Wz)(),(0,r.An)("img",yr)):(0,r.g1)("",!0),(0,r.mY)(" "+(0,c.WA)(e.gates),1)])])])):(0,r.g1)("",!0),br,(0,r.QD)("div",{class:"tw-flex tw-32 tw-p-2 tw-cursor-pointer",onClick:t[4]||(t[4]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSchedule&&e.openModalSchedule.apply(e,t)})},[(0,r.QD)("div",vr,(0,c.WA)(e.titleStatus),1),(0,r.K2)(l,{card:e.card,class:"tw-pl-2"},null,8,["card"])]),e.flightStatuses?((0,r.Wz)(),(0,r.An)("div",wr,Dr)):(0,r.g1)("",!0),e.flightStatuses?((0,r.Wz)(),(0,r.An)("div",kr,[(0,r.QD)("div",{class:"tw-rounded-lg tw-border-2 tw-border-gray-200 tw-px-2 tw-py-1 text-status-desktop tw-cursor-pointer",onClick:t[5]||(t[5]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openModalSelectFlightNumber&&e.openModalSelectFlightNumber.apply(e,t)})},[(0,r.QD)("span",{class:(0,c.WN)(e.flightStatuses.color)},[(0,r.QD)("i",{class:(0,c.WN)(["tw-mr-1",e.flightStatuses.icon])},null,2),(0,r.mY)((0,c.WA)(e.flightStatuses.name),1)],2)])])):(0,r.g1)("",!0),e.flightStatuses?((0,r.Wz)(),(0,r.An)("div",Mr,xr)):(0,r.g1)("",!0),(0,r.K2)(s,{workOrderItemsTotal:e.card.workOrderItemsTotal,workOrderId:e.card.id,size:"sm"},null,8,["workOrderItemsTotal","workOrderId"]),((0,r.Wz)(),(0,r.Az)(u,{id:e.card.id,key:e.card.id,card:e.card,dateColumn:e.dateColumn},null,8,["id","card","dateColumn"]))],2))])}var Nr=function(){return Nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Nr.apply(this,arguments)};const Sr=(0,r._M)({components:{lastComments:rt,kanbanCardActions:vt,chipServices:Kt},props:{card:{type:Object,required:!0},dateColumn:{type:String,default:function(){return null}}},setup:function(e){return Nr({},Se(e))}}),Cr=(0,Je.c)(Sr,[["render",Tr],["__scopeId","data-v-a001bb0e"]]),zr=Cr;var Or=function(){return Or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Or.apply(this,arguments)};const $r=(0,r._M)({components:{kanbanCardTablet:Zn,kanbanCardDesktop:zr},props:{card:{type:Object,required:!0},dateColumn:{type:String,default:function(){return null}}},setup:function(e){return Or({},pt(e))}}),Qr=(0,Je.c)($r,[["render",On]]),Lr=Qr;var Er={class:"tw-border tw-rounded-lg tw-bg-white tw-py-3 tw-px-4 tw-my-1 md:tw-flex-wrap"},Fr={class:"tw-space-x-2 tw-my-1"},Wr=(0,r.QD)("i",{class:"fa-light fa-floppy-disk"},null,-1),Yr=(0,r.QD)("i",{class:"fa-light fa-comment"},null,-1),jr=(0,r.QD)("i",{class:"fa-light fa-xmark"},null,-1);function qr(e,t,n,a,o,i){var l=(0,r.E1)("scheduleFields"),s=(0,r.E1)("q-form"),u=(0,r.E1)("modalComments"),m=(0,r.E1)("q-tooltip");return(0,r.Wz)(),(0,r.An)("div",Er,[(0,r.K2)(s,{ref:"refFormSchedule"},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,{inlineMode:!0})]})),_:1},512),e.card.id?((0,r.Wz)(),(0,r.Az)(u,{key:0,commentableId:e.card.id},null,8,["commentableId"])):(0,r.g1)("",!0),(0,r.QD)("div",Fr,[(0,r.QD)("button",{class:"tw-bg-blue-800 tw-rounded-lg tw-px-2 tw-py-1 tw-text-white",onClick:t[0]||(t[0]=(0,d.Y7)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.saveForm&&e.saveForm.apply(e,t)}),["prevent"]))},[Wr,(0,r.K2)(m,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.$tr("isite.cms.label.save")),1)]})),_:1})]),e.card.id&&!e.storeKanban.isAppOffline?((0,r.Wz)(),(0,r.An)("button",{key:0,class:"tw-bg-blue-800 tw-rounded-lg tw-px-2 tw-py-1 tw-text-white",onClick:t[1]||(t[1]=(0,d.Y7)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.showModalComments&&e.showModalComments.apply(e,t)}),["prevent"]))},[Yr,(0,r.K2)(m,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,c.WA)(e.$tr("isite.cms.label.comment")),1)]})),_:1})])):(0,r.g1)("",!0),(0,r.QD)("button",{onClick:t[2]||(t[2]=(0,d.Y7)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.hideInline&&e.hideInline.apply(e,t)}),["prevent"])),class:"tw-bg-blue-800 tw-rounded-lg tw-px-2 tw-py-1 tw-text-white"},[jr,(0,r.K2)(m,null,{default:(0,r.Ql)((function(){return[(0,r.mY)(" Discard ")]})),_:1})])])])}function Rr(){var e=(0,r.S6)((function(){return(0,te.c)().getIsPassenger()})),t=((0,r.S6)((function(){return e.value?X.mI:X.wz})),(0,r.S6)((function(){return J.c.isBlank}))),n=(0,r.S6)((function(){return ne.c.form})),a=(0,r.S6)((function(){return(0,ee["default"])().getGatesList().filter((function(e){return Number(e.stationId)===Number(ne.c.stationId)})).map((function(e){return{value:e.id,label:e.name}}))})),o=(0,r.S6)((function(){return(0,ee["default"])().getStationList().map((function(e){return{label:e.stationName,value:e.id}}))})),i=(0,r.S6)((function(){return(0,ee["default"])().getACTypesList().map((function(e){return{label:e.model,value:e.id}}))})),l=(0,r.S6)((function(){return(0,ee["default"])().getFlightStatusesList().map((function(e){return{label:e.name,id:e.id,color:e.color,value:e.id}}))})),s=(0,r.S6)((function(){return l.value.find((function(e){return e.id==n.value.flightStatusId}))||null})),u=(0,r.S6)((function(){return(0,ee["default"])().getOperationTypeList()})),c=(0,r.S6)((function(){return{form:{inboundFlightNumber:{name:"inboundFlightNumber",value:"",type:"input",props:{readonly:t.value,rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(re._s.tr("ifly.cms.form.flight")),clearable:!0,color:"primary"}},stationId:{name:"stationId",value:ne.c.stationId,type:"select",props:{readonly:t.value,rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(re._s.tr("ifly.cms.form.station")),clearable:!0,color:"primary",options:o.value}},gateId:{name:"gateId",value:null,type:"select",props:{vIf:!e.value,readonly:t.value,label:"".concat(re._s.tr("ifly.cms.form.gate")),clearable:!0,color:"primary",options:a.value}},operationTypeId:{name:"operationTypeId",value:"",type:"select",props:{rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],label:"*".concat(re._s.tr("ifly.cms.form.operation")),clearable:!0,color:"primary","hide-bottom-space":!1,options:u.value}},sta:{value:null,type:"hour",props:{rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],readonly:t.value,label:"STA",format24h:!0}},outboundScheduledDeparture:{value:null,type:"fullDate",props:{rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],mask:"MM/DD/YYYY HH:mm",hint:"Format: MM/DD/YYYY HH:mm",readonly:t.value,label:"STD",format24h:!0}},flightStatusId:{value:null,type:"select",props:{readonly:t.value,selectColor:!0,colorType:"tailwindcss",label:"Flight Status",clearable:!0,color:"primary",options:l.value}},acTypeId:{value:null,type:"select",props:{label:re._s.tr("ifly.cms.sidebar.aircraftType"),options:i.value}}}}}));return{fields:c,flightStatusesList:l,flightStatus:s}}var Pr=function(){return Pr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Pr.apply(this,arguments)},Ur=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Vr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function _r(e){return Ur(this,void 0,void 0,(function(){var t,n,r,a,o;return Vr(this,(function(i){switch(i.label){case 0:return t="YYYY-MM-DDTHH:mm:ss",n="MM/DD/YYYY HH:mm",r=Pr({},ne.c.form),r.outboundScheduledDeparture=r.outboundScheduledDeparture?ce()(r.outboundScheduledDeparture,n).format(t):null,r.inboundScheduledArrival=r.inboundScheduledArrival?ce()(r.inboundScheduledArrival,n).format(t):null,r.scheduleDate=r.inboundScheduledArrival||r.outboundScheduledDeparture,r.statusId=X.kz,r.id=ne.c.form.offlineId,r.calendar={sta:r.sta,std:r.std,title:r.preFlightNumber},a=0===(null===e||void 0===e?void 0:e.data.length)?r:null===e||void 0===e?void 0:e.data,o="apiRoutes.qramp.workOrders",[4,re.a4.updateList(o,a)];case 1:return i.sent(),[2,a]}}))}))}var Br=function(){return Br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Br.apply(this,arguments)},Kr=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Hr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Gr(){return Kr(this,void 0,Promise,(function(){var e,t,n,r,a,o,i,l;return Hr(this,(function(s){switch(s.label){case 0:s.trys.push([0,6,,7]),e="apiRoutes.qramp.simpleWorkOrders",t=Br({},en.c),n=(0,te.c)().getIsPassenger(),r=(new Date).valueOf(),a=Br({},ne.c.form),o=n?{businessUnitId:X.GK}:{},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,ae.c.create(e,Br(Br(Br(Br({},a),{offlineId:J.c.isAppOffline?r:null,titleOffline:re._s.tr("ifly.cms.form.newWorkOrder")}),o),{type:X.Qt}))];case 2:return t=s.sent(),[3,4];case 3:return i=s.sent(),console.log(i),[3,4];case 4:return ne.c.form.offlineId=r,[4,_r(t)];case 5:return t=s.sent(),[2,t];case 6:return l=s.sent(),console.error(l),[2,Br({},en.c)];case 7:return[2]}}))}))}var Zr=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Jr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Xr(){return Zr(this,void 0,Promise,(function(){var e,t,n,r,a,o,i,l,s;return Jr(this,(function(u){switch(u.label){case 0:if(e=J.c.columns.find((function(e){return e.date.format("YYYY-MM-DD")===ne.c.seletedDateColumn})),!e)return[2];u.label=1;case 1:return u.trys.push([1,4,,5]),e.loading=!0,e.page=1,[4,on(!0,e.page,ce()(ne.c.seletedDateColumn))];case 2:return t=u.sent(),e.cards=t.data,n=ce()(ne.c.seletedDateColumn),r=n.startOf("day"),a=n.endOf("day"),o=se.c.filterTime,i={field:(0,te.c)().getIsPassenger()?"schedule_date_local":"schedule_date",type:"customRange",from:r.set({hour:o[0],minute:0,second:0}).format("YYYY-MM-DD HH:mm:ss"),to:a.set({hour:o[1],minute:59,second:59}).format("YYYY-MM-DD HH:mm:ss")},[4,(0,pn.c)(!0,i)];case 3:return l=u.sent(),e.completed=l.data.completed,e.uncompleted=l.data.uncompleted,e.loading=!1,[3,5];case 4:return s=u.sent(),e.loading=!1,console.log(s),[3,5];case 5:return[2]}}))}))}var ea=function(){return ea=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ea.apply(this,arguments)},ta=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},na=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function ra(e){return ta(this,void 0,Promise,(function(){var t,n,r;return na(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t=J.c.columns.flatMap((function(e){return e.cards})).find((function(t){return t.id===e})),t?(t.loading=!0,[4,le(e)]):[2];case 1:return n=a.sent(),setTimeout((function(){t.loading=!1,Object.assign(t,ea(ea({},n.data),{editable:!1}))}),100),[3,3];case 2:return r=a.sent(),console.log(r),[3,3];case 3:return[2]}}))}))}var aa=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},oa=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function ia(e,t){var n=this,a=(0,we.IL)(null),o=(0,r.uU)("refFormOrders"),i=(0,r.S6)({get:function(){return ne.c.showModal},set:function(e){return ne.c.showModal=e}}),l=(0,r.S6)((function(){return ne.c.titleModal})),s=(0,r.S6)((function(){return ne.c.form})),u=(0,r.S6)((function(){return ne.c.loading})),c=(0,r.S6)((function(){return!ne.c.showInline})),d=(0,r.S6)((function(){return[{props:{vIf:ne.c.isEdit&&!J.c.isBlank,color:"green",icon:"fa-light fa-bring-forward",label:"Start Work Order"},action:function(){return aa(n,void 0,void 0,(function(){return oa(this,(function(e){switch(e.label){case 0:return ne.c.loading=!0,[4,(0,te.c)().changeStatus(X._G,s.value.id)];case 1:return e.sent(),[4,ra(s.value.id)];case 2:return e.sent(),[4,I()];case 3:return e.sent(),[4,v()];case 4:return e.sent(),ne.c.loading=!1,[2]}}))}))}},{props:{vIf:!J.c.isBlank,color:"primary",icon:"fa-light fa-pen-to-square",label:ne.c.isEdit?re._s.tr("isite.cms.label.update"):re._s.tr("isite.cms.label.save")},action:function(){return aa(n,void 0,void 0,(function(){return oa(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return e.sent(),[2]}}))}))}},{props:{vIf:re.is.hasAccess("ramp.work-orders.destroy")&&ne.c.isEdit&&!J.c.isBlank,color:"red",icon:"fa-light fa-trash",label:re._s.tr("isite.cms.label.delete")},action:function(){return aa(n,void 0,void 0,(function(){var e=this;return oa(this,(function(t){try{re.Qb.error({mode:"modal",title:"".concat(s.value.preFlightNumber),message:re._s.tr("isite.cms.message.deleteRecord"),actions:[{label:re._s.tr("isite.cms.label.cancel"),color:"grey"},{label:re._s.tr("isite.cms.label.delete"),color:"red",handler:function(){return aa(e,void 0,void 0,(function(){return oa(this,(function(e){switch(e.label){case 0:return ne.c.loading=!0,[4,Promise.allSettled([ut(s.value.id),setTimeout((function(){Xr(),v()}),1e3)])];case 1:return e.sent(),ne.c.loading=!1,[2]}}))}))}}]})}catch(n){ne.c.loading=!1,console.log(n)}return[2]}))}))}}]})),m=(0,r.S6)((function(){return re.is.hasAccess("ramp.work-orders-comments.index")})),f=(0,r.S6)((function(){return Rr().flightStatus.value})),p=(0,r.S6)((function(){return Ae(s.value.operationTypeId)})),h=(0,r.S6)((function(){return Rr().fields.value}));function g(e){"flightNumber"===e&&(s.value[e]=s.value[e].toUpperCase().replace(/\s+/g,""))}function y(){return aa(this,void 0,void 0,(function(){var e=this;return oa(this,(function(t){return a.value.validate().then((function(t){return aa(e,void 0,void 0,(function(){var e;return oa(this,(function(n){switch(n.label){case 0:return t?(ne.c.loading=!0,[4,b()]):[3,9];case 1:return n.sent(),ne.c.isEdit?[4,cn(s.value.id,s.value)]:[3,3];case 2:return n.sent(),[3,6];case 3:return n.trys.push([3,5,,6]),[4,Gr()];case 4:return n.sent(),[3,6];case 5:return e=n.sent(),console.log(e),[3,6];case 6:return w(),ne.c.isEdit||Xr(),[4,ra(s.value.id)];case 7:return n.sent(),[4,v()];case 8:n.sent(),ne.c.loading=!1,n.label=9;case 9:return[2]}}))}))})),[2]}))}))}function b(){return aa(this,void 0,void 0,(function(){var e,t;return oa(this,(function(n){return e="MM/DD/YYYY HH:mm",s.value.inboundScheduledArrival="".concat(ce()(s.value.inboundScheduledArrival||ne.c.seletedDateColumn).format("MM/DD/YYYY")," ").concat(s.value.sta||"00:00"),s.value.outboundScheduledDeparture=s.value.outboundScheduledDeparture,s.value.std=s.value.outboundScheduledDeparture?ce()(s.value.outboundScheduledDeparture,e).format("HH:mm"):null,s.value.preFlightNumber=s.value.inboundFlightNumber,t=Ae(s.value.operationTypeId),t.inbound&&t.outbound?(s.value.outboundFlightNumber=s.value.preFlightNumber,[2]):(t.inbound&&!t.outbound&&(s.value.std=null,s.value.outboundScheduledDeparture=null,s.value.outboundFlightNumber=null),!t.inbound&&t.outbound&&(s.value.sta=null,s.value.inboundScheduledArrival=null,s.value.inboundFlightNumber=null,s.value.outboundFlightNumber=s.value.preFlightNumber),[2])}))}))}function v(){return aa(this,void 0,void 0,(function(){return oa(this,(function(e){switch(e.label){case 0:return ne.c.reset(),ne.c.isEdit?[4,Xr()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}function w(){var t;if(ne.c.showInline){if(null===(t=e.card)||void 0===t?void 0:t.id)ne.c.showInline=!1,pe(e.card.id,!1);else{var n=me();if(e.card.duplicated){var r=n.cards.find((function(t){return t.duplicated===e.card.duplicated})),a=n.cards.indexOf(r);return n.cards.splice(a,1),ne.c.isEdit=!1,void(ne.c.showInline=!1)}n.cards&&n.cards.shift()}ne.c.isEdit=!1,ne.c.showInline=!1}}function I(){return aa(this,void 0,void 0,(function(){var e,t;return oa(this,(function(n){switch(n.label){case 0:return e=re._s.tr("ifly.cms.form.updateWorkOrder")+(s.value.id?" Id: ".concat(s.value.id):""),[4,le(s.value.id)];case 1:return t=n.sent(),[4,o.value.loadform({modalProps:{title:e,update:!0,workOrderId:t.data.id,width:"90vw"},data:t.data})];case 2:return n.sent(),[2]}}))}))}return(0,r.GE)((function(){ne.c.reset()})),{showModal:i,hideInline:w,titleModal:l,loading:u,form:s,hideModal:v,actions:d,flightStatus:f,isbound:p,permisionComments:m,zanetizeData:g,fields:h,refFormSchedule:a,saveForm:y,showCommentsComponent:c,storeKanban:J.c}}var la={key:1},sa={key:2};function ua(e,t,n,a,o,i){var l=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",{class:(0,c.WN)({"lg:tw-flex-wrap lg:tw-space-x-0 xl:tw-flex xl:tw-space-x-2":e.inlineMode})},[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.fields.form,(function(t,n){return(0,r.Wz)(),(0,r.An)("div",{key:n},["sta"!==n&&"outboundScheduledDeparture"!==n?((0,r.Wz)(),(0,r.Az)(l,{key:0,field:t,modelValue:e.form[n],"onUpdate:modelValue":[function(t){return e.form[n]=t},function(t){return e.zanetizeData(n)}],class:(0,c.WN)({"tw-hidden":"stationId"===n,"xl:tw-w-fit":e.inlineMode})},null,8,["field","modelValue","onUpdate:modelValue","class"])):(0,r.g1)("",!0),e.isbound.inbound&&"sta"===n?((0,r.Wz)(),(0,r.An)("div",la,[(0,r.K2)(l,{field:t,modelValue:e.form[n],"onUpdate:modelValue":[function(t){return e.form[n]=t},function(t){return e.zanetizeData(n)}],class:(0,c.WN)({"tw-hidden":"stationId"===n})},null,8,["field","modelValue","onUpdate:modelValue","class"])])):(0,r.g1)("",!0),e.isbound.outbound&&"outboundScheduledDeparture"===n?((0,r.Wz)(),(0,r.An)("div",sa,[(0,r.K2)(l,{field:t,modelValue:e.form[n],"onUpdate:modelValue":[function(t){return e.form[n]=t},function(t){return e.zanetizeData(n)}],class:(0,c.WN)({"tw-hidden":"stationId"===n})},null,8,["field","modelValue","onUpdate:modelValue","class"])])):(0,r.g1)("",!0)])})),128))],2)}var ca=function(){return ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ca.apply(this,arguments)};const da=(0,r._M)({props:{inlineMode:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit;return ca({},ia(e,n))}}),ma=(0,Je.c)(da,[["render",ua]]),fa=ma;function pa(e,t,n,a,o,i){var l=(0,r.E1)("comments"),s=(0,r.E1)("master-modal");return e.isAppOffline?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(s,{key:0,modelValue:e.visible,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.visible=t}),title:"Comments Work Order Id:".concat(e.commentableId),persistent:!0,loading:e.loading,onHide:e.hideModalComments,width:"60%",maximized:e.$q.screen.lt.md},{default:(0,r.Ql)((function(){return[e.commentableId>0?((0,r.Wz)(),(0,r.Az)(l,{key:0,apiRoute:"apiRoutes.qramp.comments",commentableId:Number(e.commentableId),commentableType:"Modules\\Ramp\\Entities\\WorkOrder",permisionComments:"ramp.work-orders-comments",class:"tw-py-4"},null,8,["commentableId"])):(0,r.g1)("",!0)]})),_:1},8,["modelValue","title","loading","onHide","maximized"]))}var ha=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ga=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function ya(e){var t=(0,r.S6)({get:function(){return ne.c.showModalComments},set:function(e){return ne.c.showModalComments=e}}),n=(0,r.S6)({get:function(){return ne.c.loading},set:function(e){return ne.c.loading=e}}),a=(0,r.S6)((function(){return J.c.isAppOffline})),o=(0,r.S6)((function(){return re.is.hasAccess("ramp.work-orders-comments.index")}));function i(){o.value?t.value=!0:re.Qb.warning({message:"You do not have permission to view comments"})}function l(){return ha(this,void 0,void 0,(function(){var r,a,o,i,l;return ga(this,(function(s){switch(s.label){case 0:n.value=!1,t.value=!1,s.label=1;case 1:return s.trys.push([1,4,,5]),r=e.commentableId,a=me(),o=a.cards.find((function(e){return e.id==r})),o?[4,ae.c.show("apiRoutes.qramp.workOrders",r,{refresh:!0})]:[3,3];case 2:i=s.sent(),o.comments=i.data.comments,s.label=3;case 3:return[3,5];case 4:return l=s.sent(),console.log(l),[3,5];case 5:return[2]}}))}))}return{visible:t,isAppOffline:a,permisionCommentsIndex:o,showModalComments:i,hideModalComments:l,loading:n}}var ba=n(97180),va=function(){return va=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},va.apply(this,arguments)};const wa=(0,r._M)({components:{comments:ba.c},props:{commentableId:{type:Number,default:function(){return 0}},isCrud:{type:Boolean,default:function(){return!1}}},setup:function(e){return va({},ya(e))}}),Ia=(0,Je.c)(wa,[["render",pa]]),Da=Ia;var ka=function(){return ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ka.apply(this,arguments)};const Ma=(0,r._M)({components:{scheduleFields:fa,modalComments:Da},props:{card:{type:Object,required:!1}},setup:function(e,t){var n=t.emit;return ka(ka({},ia(e,n)),ya(e))}});var Aa=n(14288);const xa=(0,Je.c)(Ma,[["render",qr]]),Ta=xa;tt()(Ma,"components",{QForm:Aa.c,QTooltip:Xe.c});var Na=function(){return Na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Na.apply(this,arguments)};const Sa=(0,r._M)({components:{draggable:k(),kanbanCard:Xt,completedSchedule:zn,kanbanDay:Lr,inlineSchedule:Ta},props:{column:{type:Object,required:!0},groupOptions:{type:Object,required:!0}},setup:function(e,t){t.emit;return Na({},yn(e))}}),Ca=(0,Je.c)(Sa,[["render",I]]),za=Ca;tt()(Sa,"components",{QSpinner:Zt.c});var Oa=n(14868),$a=function(){return $a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},$a.apply(this,arguments)},Qa=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},La=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ea="YYYY/MM/DD";function Fa(){return Qa(this,void 0,Promise,(function(){var e;return La(this,(function(t){e=$a({},re.us.route.query);try{se.c.stationId&&(0!==Object.keys(e).length?(e.stationId&&(se.c.form.stationId=e.stationId),e.stationId&&(se.c.stationId=e.stationId),e.type&&(se.c.form.scheduleType=e.type),e.carrierId&&(se.c.form.carrierId=e.carrierId),e.statusId&&(se.c.form.statusId=e.statusId),e.adHoc&&(se.c.form.adHoc=e.adHoc),e.flightStatusId&&(se.c.form.flightStatusId=e.flightStatusId),e.areaId&&(se.c.form.areaId=e.areaId),e.type&&(se.c.scheduleType=e.type),se.c.selectedDate=Wa(e)):(se.c.form.scheduleType=ve.c[1].value,se.c.scheduleType=ve.c[1].value,se.c.selectedDate=ce()().format(Ea)))}catch(n){console.log(n)}return[2]}))}))}function Wa(e){var t=se.c.scheduleType==ve.c[0].value;if(t){var n=ce()(e.dateStart,Ea).format(Ea),r=ce()(se.c.selectedDate,Ea).day();return ce()(n,Ea).day(r).format(Ea)}return ce()(e.dateStart,Ea).format(Ea)}function Ya(){var e=Oa.c.find((function(e){return se.c.form.time===e.value}))||null,t="YYYY/MM/DD",n=ce()(se.c.selectedDate,t);J.c.scheduleType==ve.c[0].value?se.c.titleFilter="".concat(n.startOf("week").format("MMMM D")," - ").concat(n.endOf("week").format("MMMM D"),", ").concat(null===e||void 0===e?void 0:e.label):se.c.titleFilter="".concat(n.format("MMMM D"),", ").concat(null===e||void 0===e?void 0:e.label)}var ja=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},qa=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Ra(){function e(){var e=this;try{re.kN.on("ramp.workOrders.cardRefresh",(function(t){return ja(e,void 0,void 0,(function(){var e;return qa(this,(function(n){switch(n.label){case 0:return e=J.c.columns.flatMap((function(e){return null===e||void 0===e?void 0:e.cards})).find((function(e){var n;return e.id===(null===(n=t.data)||void 0===n?void 0:n.id)})),e?e.loading?[2]:[4,ra(t.data.id||0)]:[2];case 1:return n.sent(),[2]}}))}))}))}catch(t){console.log(t)}}return{cardRefresh:e}}function Pa(e){var t=!1,n=Number(J.c.filterCompany)===Number(e.companyId),r=Number(e.id)===Number(se.c.stationId);return t=Array.isArray(J.c.filterCompany)?J.c.filterCompany.includes(e.companyId):n,r&&t}var Ua=n(91416),Va=function(){return Va=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Va.apply(this,arguments)},_a=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Ba=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Ka(e){var t=this,n=re.is.hasAccess,a=(0,Ua.c)(),o=(0,we.IL)(!0),i=(0,we.IL)(null),l=(0,r.S6)((function(){return re.is.state.qofflineMaster.isAppOffline}));(0,r.Zl)("refFormOrders",i);var s=(0,r.S6)((function(){return(0,te.c)().getIsPassenger()})),u=(0,r.S6)((function(){return J.c.isDraggingCard})),c=(0,we.IL)(!1),d=(0,we.IL)(null),m=(0,we.IL)({value:null,type:"select",props:{label:"Filter by time",format24h:!0,options:Oa.c}}),f=(0,r.S6)((function(){return s.value?"Passenger Schedule":"Ramp Schedule"})),p=(0,r.S6)((function(){return se.c.selectedDate})),h=(0,r.S6)({get:function(){return J.c.scheduleType},set:function(e){return J.c.scheduleType=e}}),g={name:"kanban-columns"},y=(0,r.S6)({get:function(){return J.c.columns},set:function(e){return J.c.columns=e}}),b=(0,we.IL)([{id:2,label:re._s.tr("isite.cms.label.week"),value:"week-agenda",icon:"fas fa-calendar-week"},{id:3,label:"".concat(re._s.tr("isite.cms.label.day")),value:"day-agenda",icon:"fas fa-calendar-day"}]),v=(0,r.S6)((function(){var e=[{label:"Copy Tiny URL",props:{icon:"fa-light fa-copy"},action:function(){var e=s.value?"passenger":"ramp",t=window.location.href.split("?"),n=re.is.state.qsiteApp.originURL+"/#/".concat(e,"/schedule/public/index");t[1]&&(n=n+"?"+t[1]),re.i4.copyToClipboard(n,"Tiny URL copied!")}},{label:re._s.tr("isite.cms.configList.fullScreen",{capitalize:!0}),props:{icon:c.value?"fa-light fa-compress":"fa-light fa-expand"},action:function(){c.value=!c.value,a.fullscreen.toggle()}},{label:"Scheduler",vIf:n("ramp.schedulers.manage"),props:{label:"Scheduler",icon:"fa-duotone fa-calendar-plus"},action:function(){var e=s.value?"passenger":"ramp",t=window.location.href.split("?"),n=re.is.state.qsiteApp.originURL+"/#/".concat(e,"/schedule/index");t[1]&&(n=n+"?"+t[1]),localStorage.setItem("urlSchedule",n),re.us.push({name:"qramp.admin.scheduler"})}},{label:re._s.tr("isite.cms.label.filter"),vIf:!0,props:{icon:"fa-duotone fa-filter",id:"filter-button-crud"},action:function(){se.c.showModal=!0}}];return e})),w=function(){return _a(t,void 0,void 0,(function(){return Ba(this,(function(e){switch(e.label){case 0:return Ra().cardRefresh(),[4,Fa()];case 1:return e.sent(),J.c.scheduleType=se.c.scheduleType,J.c.isAppOffline=re.is.state.qofflineMaster.isAppOffline,Ya(),[4,fn()];case 2:return e.sent(),[4,(0,ct["default"])()];case 3:return e.sent(),[2]}}))}))};function I(){return _a(this,void 0,void 0,(function(){var e,t,n,r;return Ba(this,(function(a){switch(a.label){case 0:return e=Va({},re.us.route.query),[4,re.qu.get.item("stationId")];case 1:return"null"===a.sent()?[3,3]:[4,re.qu.get.item("stationId")];case 2:return n=a.sent(),[3,4];case 3:n=null,a.label=4;case 4:return t=n,se.c.stationId=D(re.is.state.quserAuth.userData)||e.stationId||t||null,se.c.form.stationId=se.c.stationId,[4,(0,ee["default"])().getStationList().find((function(e){return Pa(e)}))];case 5:return r=a.sent(),r||(se.c.stationId=null,se.c.showModalStation=!0),[2]}}))}))}function D(e){try{var t=null;return e&&e.options&&e.options.stationsAssigned&&Array.isArray(e.options.stationsAssigned)&&e.options.stationsAssigned.length>0&&(t=e.options.stationsAssigned.shift()),t}catch(n){console.log(n)}}return(0,r.u2)((function(){return _a(t,void 0,void 0,(function(){return Ba(this,(function(e){switch(e.label){case 0:return[4,I()];case 1:return e.sent(),[4,w()];case 2:return e.sent(),o.value=!1,[2]}}))}))})),(0,r.Kg)((function(){return re.us.route}),(function(e,n){return _a(t,void 0,void 0,(function(){var t,r;return Ba(this,(function(a){switch(a.label){case 0:return t=e.path,r=n.path,null===se.c.stationId&&(se.c.showModalStation=!0),t===r?[3,2]:[4,I()];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))}),{deep:!0}),(0,r.Kg)(l,(function(e,n){return _a(t,void 0,void 0,(function(){return Ba(this,(function(t){switch(t.label){case 0:return J.c.isAppOffline=e,[4,I()];case 1:return t.sent(),[4,w()];case 2:return t.sent(),[2]}}))}))})),(0,r.wx)((function(){J.c.columns=[]})),{selectedDate:p,columns:y,groupOptions:g,scheduleTypeOptions:b,scheduleType:h,filterTime:d,dynamicFieldTime:m,extraPageActions:v,isDraggingCard:u,buildKanbanStructure:ct["default"],refFormOrders:i,individualRefreshByColumns:Xr,title:f,isAppOffline:l,storeFilter:se.c,loadingMain:o}}var Ha={class:"actions-bar sm:tw-flex sm:tw-flex-row tw-flex-wrap tw-items-center tw-pb-4 tw-text-blue-500 tw-space-x-2"},Ga={class:""},Za={class:"tw-w-1 tw-h-4 tw-mx-1 tw-border-l-2 tw-text-xs tw-border-grey-200"},Ja=(0,r.QD)("i",{class:"fa-regular fa-angle-left"},null,-1),Xa=[Ja],eo=(0,r.QD)("i",{class:"fa-regular fa-angle-right"},null,-1),to=[eo],no={class:"agendaResume"};function ro(e,t,n,a,o,i){var l=(0,r.E1)("q-btn");return(0,r.Wz)(),(0,r.An)("div",Ha,[(0,r.QD)("div",Ga,[(0,r.wt)((0,r.K2)(l,{onClick:e.week,flat:"",outline:"","no-caps":"",dense:"",class:"agendaButtons"},{default:(0,r.Ql)((function(){return[(0,r.mY)("Week ")]})),_:1},8,["onClick"]),[[d.Ub,!e.isWeekAgenda]]),(0,r.wt)((0,r.QD)("span",Za,null,512),[[d.Ub,!e.isWeekAgenda]]),(0,r.K2)(l,{onClick:e.today,flat:"",outline:"","no-caps":"",dense:"",class:"agendaButtons"},{default:(0,r.Ql)((function(){return[(0,r.mY)("Today ")]})),_:1},8,["onClick"]),(0,r.QD)("button",{class:"btn-action tw-mx-1",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.back&&e.back.apply(e,t)})},Xa),(0,r.QD)("button",{class:"btn-action tw-mx-1",onClick:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next&&e.next.apply(e,t)})},to)]),(0,r.QD)("div",{class:"tw-ml-auto tw-items-center tw-text-sm md:tw-text-base tw-font-semibold tw-space-x-1 tw-cursor-pointer",onClick:t[2]||(t[2]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.openDrawerFilter&&e.openDrawerFilter.apply(e,t)})},[(0,r.QD)("div",no,(0,c.WA)(e.titleFilter),1)])])}var ao=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},oo=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function io(e){var t="YYYY/MM/DD",n=(0,r.S6)((function(){return ce()(se.c.selectedDate,t)})),a=(0,r.S6)((function(){return se.c.titleFilter})),o=(0,r.S6)((function(){return J.c.scheduleType==ve.c[0].value}));function i(e){return ao(this,void 0,Promise,(function(){var r,a;return oo(this,(function(o){switch(o.label){case 0:return r=se.c.scheduleType===ve.c[0].value?7:1,a=r*e,se.c.selectedDate=n.value.add(a,"days").format(t),[4,fn()];case 1:return o.sent(),[4,(0,ct["default"])()];case 2:return o.sent(),[2]}}))}))}function l(){return ao(this,void 0,Promise,(function(){return oo(this,(function(e){switch(e.label){case 0:return[4,i(1)];case 1:return e.sent(),Ya(),[2]}}))}))}function s(){return ao(this,void 0,Promise,(function(){return oo(this,(function(e){switch(e.label){case 0:return[4,i(-1)];case 1:return e.sent(),Ya(),[2]}}))}))}function u(){se.c.showModal=!0}function c(e){return ao(this,void 0,void 0,(function(){return oo(this,(function(t){switch(t.label){case 0:return J.c.columns=[],J.c.scheduleType=e,se.c.scheduleType=e,[4,fn()];case 1:return t.sent(),[4,(0,ct["default"])()];case 2:return t.sent(),Ya(),[2]}}))}))}function d(){return ao(this,void 0,void 0,(function(){return oo(this,(function(e){switch(e.label){case 0:return[4,c(ve.c[0].value)];case 1:return e.sent(),[2]}}))}))}function m(){return ao(this,void 0,void 0,(function(){return oo(this,(function(e){switch(e.label){case 0:return se.c.selectedDate=ce()().format(t),[4,c(ve.c[1].value)];case 1:return e.sent(),[2]}}))}))}return{next:l,back:s,openDrawerFilter:u,titleFilter:a,isWeekAgenda:o,week:d,today:m}}var lo=function(){return lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},lo.apply(this,arguments)};const so=(0,r._M)({setup:function(e){return lo({},io(e))}}),uo=(0,Je.c)(so,[["render",ro]]),co=uo;tt()(so,"components",{QBtn:yt.c});var mo={class:"row justify-between items-center q-pa-md tw-fixed tw-bg-white tw-z-30 tw-w-72"},fo={class:"text-subtitle1 row items-center"},po={class:"text-primary text-weight-bold"},ho={class:"tw-mb-12 tw-mt-16"},go={class:"text-center tw-px-4"},yo={class:"text-center tw-p-4"},bo={class:"tw-px-4 text-primary"},vo={class:"text-center bg-white tw-p-3 tw-absolute tw-bottom-0 w-97",ref:"footerContent"};function wo(e,t,n,a,o,i){var l=(0,r.E1)("q-icon"),s=(0,r.E1)("q-btn-toggle"),u=(0,r.E1)("q-date"),d=(0,r.E1)("dynamic-field"),m=(0,r.E1)("q-btn"),f=(0,r.E1)("q-drawer");return(0,r.Wz)(),(0,r.Az)(f,{modelValue:e.showModal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.showModal=t}),overlay:"",side:"right",bordered:"",width:300,breakpoint:500,class:"tw-bg-white"},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",mo,[(0,r.QD)("div",fo,[(0,r.K2)(l,{name:"fa-regular fa-filter",color:"primary",size:"20px",class:"q-mr-sm"}),(0,r.QD)("label",po,(0,c.WA)(e.$trp("isite.cms.label.filter",{capitalize:!0})),1)]),(0,r.K2)(l,{name:"fa-light fa-xmark",color:"blue-grey",size:"20px",class:"cursor-pointer",onClick:t[0]||(t[0]=function(t){return e.showModal=!1})})]),(0,r.QD)("div",ho,[(0,r.QD)("div",go,[(0,r.K2)(s,{modelValue:e.scheduleType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.scheduleType=t}),rounded:"","no-caps":"",unelevated:"",spread:"","toggle-color":"primary",color:"grey-2","text-color":"primary",options:e.scheduleTypeOptions,id:"btnCalendarType",size:"14px",padding:"sm sm"},null,8,["modelValue","options"])]),(0,r.QD)("div",yo,[(0,r.K2)(u,{class:"text-primary shadow-4 custom_q_date",modelValue:e.selectedDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedDate=t}),color:"primary",minimal:"",bordered:"","today-btn":""},null,8,["modelValue"])]),(0,r.QD)("div",bo,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.filters,(function(t,n){return(0,r.Wz)(),(0,r.An)("div",{key:n},[(0,r.K2)(d,{modelValue:e.form[n],"onUpdate:modelValue":function(t){return e.form[n]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])])})),128))])]),(0,r.QD)("div",vo,[(0,r.K2)(m,{label:e.$tr("isite.cms.label.search"),unelevated:"",color:"primary","no-caps":"",class:"tw-w-full",rounded:"",onClick:e.callBuildKanbanStructure},null,8,["label","onClick"])],512)]})),_:1},8,["modelValue"])}function Io(){var e=(0,r.S6)((function(){return[{props:{loading:se.c.loading,color:"primary",label:re._s.tr("isite.cms.label.search")},action:function(){}}]}));return{actions:e}}var Do=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ko=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Mo(){var e=(0,r.S6)((function(){return J.c.isAppOffline})),t=(0,r.S6)((function(){return se.c.form})),n=(0,r.S6)((function(){return se.c.filters})),a=(0,r.S6)((function(){return se.c.loading})),o=(0,r.S6)((function(){return se.c.titleModal})),i=(0,r.S6)({get:function(){return se.c.showModal},set:function(e){se.c.showModal=e}}),l=(0,r.S6)({get:function(){return se.c.scheduleType},set:function(e){se.c.scheduleType=e}}),s=(0,r.S6)({get:function(){return se.c.selectedDate},set:function(e){se.c.selectedDate=e}}),u=Io().actions;function c(){return Do(this,void 0,void 0,(function(){return ko(this,(function(e){switch(e.label){case 0:return J.c.columns=[],J.c.scheduleType=se.c.scheduleType,Ya(),[4,fn()];case 1:return e.sent(),[4,(0,ct["default"])(!0)];case 2:return e.sent(),se.c.showModal=!1,[2]}}))}))}return{filters:n,loading:a,titleModal:o,showModal:i,form:t,actions:u,selectedDate:s,scheduleType:l,scheduleTypeOptions:ve.c,buildKanbanStructure:ct["default"],callBuildKanbanStructure:c,isAppOffline:e}}var Ao=function(){return Ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ao.apply(this,arguments)};const xo=(0,r._M)({components:{},props:{},setup:function(){return Ao({},Mo())}});var To=n(42744),No=n(58120),So=n(15344),Co=n(59576);const zo=(0,Je.c)(xo,[["render",wo],["__scopeId","data-v-7a1a0154"]]),Oo=zo;tt()(xo,"components",{QDrawer:To.c,QIcon:No.c,QBtnToggle:So.c,QDate:Co.c,QBtn:yt.c});var $o={class:"tw-text-blue-500 tw-mb-2 tw-text-xs"},Qo={class:"filters tw-ml-xs"};function Lo(e,t,n,a,o,i){var l=(0,r.E1)("q-icon");return(0,r.Wz)(),(0,r.An)("div",$o,[(0,r.K2)(l,{name:"fa-light fa-filter",class:"tw-mr-1",color:"tw-text-blue-500"}),(0,r.QD)("b",null,(0,c.WA)(e.$trp("isite.cms.label.filter"))+":",1),(0,r.QD)("label",Qo,(0,c.WA)(e.filtersBar),1)])}var Eo=function(){return Eo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Eo.apply(this,arguments)};function Fo(){var e=(0,r.S6)((function(){var e=Eo({},se.c.form);e.time="".concat(se.c.filterTime[0]," - ").concat(se.c.filterTime[1],":59 H");var t=(0,ee["default"])().getAirlinesList().find((function(t){return e.carrierId==t.id}))||{};e.carrier=t.airlineName,delete e.carrierId;var n=se.c.form.stationId||se.c.stationId,r=(0,ee["default"])().getStationList().find((function(e){return n==e.id}))||{};delete e.stationId,e.station=r.fullName;var a=(0,ee["default"])().getWorkOrderStatusesList().find((function(t){return e.statusId==t.id}))||{};e.status=a.statusName,delete e.statusId,e.adHoc=e.adHoc?"Yes":"No";var o=(0,ee["default"])().getFlightStatusesList().find((function(t){return e.flightStatusId==t.id}))||{};return e.flightStatus=o.name,delete e.scheduleType,e}));return{filtersBar:e}}var Wo=function(){return Wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Wo.apply(this,arguments)};const Yo=(0,r._M)({components:{},props:{},setup:function(){return Wo({},Fo())}}),jo=(0,Je.c)(Yo,[["render",Lo],["__scopeId","data-v-3220d704"]]),qo=jo;tt()(Yo,"components",{QIcon:No.c});var Ro={key:0};function Po(e,t,n,a,o,i){var l=(0,r.E1)("scheduleFields"),s=(0,r.E1)("comments"),u=(0,r.E1)("q-form"),d=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(d,{modelValue:e.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.showModal=t}),title:e.titleModal,persistent:!0,loading:e.loading,onHide:e.hideModal,actions:e.actions,maximized:e.$q.screen.lt.md,width:e.form.id?"70%":"400px",customClass:"tw-border-l-2 tw-border-".concat(e.flightStatus?e.flightStatus.color:"gray-100")},{default:(0,r.Ql)((function(){return[(0,r.K2)(u,{ref:"refFormSchedule"},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",{class:(0,c.WN)(["tw-grid tw-gap-4",{"lg:tw-grid-cols-2":e.form.id&&e.permisionComments&&!e.storeKanban.isAppOffline,"tw-grid-cols-1":e.storeKanban.isAppOffline}])},[(0,r.K2)(l),e.showCommentsComponent&&!e.storeKanban.isAppOffline?((0,r.Wz)(),(0,r.An)("div",Ro,[e.form.id&&e.permisionComments?((0,r.Wz)(),(0,r.Az)(s,{key:0,apiRoute:"apiRoutes.qramp.comments",commentableId:Number(e.form.id),commentableType:"Modules\\Ramp\\Entities\\WorkOrder",permisionComments:"ramp.work-orders-comments",class:"tw-py-4"},null,8,["commentableId"])):(0,r.g1)("",!0)])):(0,r.g1)("",!0)],2)]})),_:1},512)]})),_:1},8,["modelValue","title","loading","onHide","actions","maximized","width","customClass"])}var Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Uo.apply(this,arguments)};const Vo=(0,r._M)({components:{comments:ba.c,scheduleFields:fa},setup:function(e,t){var n=t.emit;return Uo({},ia(e,n))}}),_o=(0,Je.c)(Vo,[["render",Po]]),Bo=_o;tt()(Vo,"components",{QForm:Aa.c});var Ko=n(6012);function Ho(e,t,n,a,o,i){var l=(0,r.E1)("dynamic-field"),s=(0,r.E1)("q-form"),u=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(u,{modelValue:e.showModalStation,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.showModalStation=t}),title:"Filter schedule",persistent:!0,loading:e.loading,actions:e.actions,hideCloseAction:"",maximized:e.$q.screen.lt.md},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,{field:e.fields.banner},null,8,["field"]),(0,r.K2)(s,{ref:"refModalStation"},{default:(0,r.Ql)((function(){return[(0,r.K2)(l,{field:e.fields.stationId,modelValue:e.stationId,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.stationId=t})},null,8,["field","modelValue"])]})),_:1},512)]})),_:1},8,["modelValue","loading","actions","maximized"])}function Go(){var e=(0,r.S6)((function(){return{banner:{type:"banner",props:{color:"info",icon:"fas fa-exclamation-triangle",message:"You must first select a Station"}},stationId:{value:null,type:"select",props:{label:"Station",rules:[function(e){return!!e||re._s.tr("isite.cms.message.fieldRequired")}],clearable:!0,options:(0,ee["default"])().getStationList().map((function(e){return{label:e.fullName,value:e.id}}))}}}}));return{fields:e}}var Zo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Jo=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Xo(){var e=this,t=(0,we.IL)(null),n=(0,r.S6)((function(){return Go().fields.value})),a=(0,r.S6)((function(){return se.c.loading})),o=(0,r.S6)({get:function(){return se.c.showModalStation},set:function(e){return se.c.showModalStation=e}}),i=(0,r.S6)({get:function(){return se.c.stationId},set:function(e){return se.c.stationId=e}}),l=(0,r.S6)((function(){return[{props:{color:"primary",label:"filters"},action:function(){return Zo(e,void 0,void 0,(function(){return Jo(this,(function(e){return s(),[2]}))}))}}]}));function s(){return Zo(this,void 0,void 0,(function(){var e=this;return Jo(this,(function(n){try{t.value.validate().then((function(t){return Zo(e,void 0,void 0,(function(){return Jo(this,(function(e){switch(e.label){case 0:return t?se.c.stationId?[4,re.qu.set("stationId",se.c.stationId)]:[3,2]:[3,5];case 1:e.sent(),se.c.form.stationId=se.c.stationId,e.label=2;case 2:return J.c.scheduleType=se.c.scheduleType,Ya(),[4,fn()];case 3:return e.sent(),[4,(0,ct["default"])()];case 4:e.sent(),se.c.showModalStation=!1,e.label=5;case 5:return[2]}}))}))}))}catch(r){console.log(r)}return[2]}))}))}return{loading:a,showModalStation:o,stationId:i,actions:l,fields:n,refModalStation:t}}var ei=function(){return ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ei.apply(this,arguments)};const ti=(0,r._M)({setup:function(){return ei({},Xo())}}),ni=(0,Je.c)(ti,[["render",Ho]]),ri=ni;tt()(ti,"components",{QForm:Aa.c});var ai=(0,r.QD)("p",{class:"tw-pb-5 tw-pt-2 tw-text-gray-500 tw-text-base tw-text-center"}," Choose the flight number to track it ",-1),oi={class:"tw-flex tw-justify-center tw-space-x-6"},ii={class:"tw-uppercase tw-text-center tw-text-gray-500 tw-text-xs"},li=["onClick"];function si(e,t,n,a,o,i){var l=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(l,{modelValue:e.store.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.store.showModal=t}),title:e.store.title,persistent:!0,loading:e.store.loading,onHide:t[1]||(t[1]=function(t){return e.store.close()})},{default:(0,r.Ql)((function(){return[ai,(0,r.QD)("div",oi,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.store.flightNumbers,(function(t){return(0,r.Wz)(),(0,r.An)("div",{key:t.id},[(0,r.QD)("p",ii,(0,c.WA)(t.type),1),(0,r.QD)("div",{class:"tw-border tw-px-5 tw-py-3 tw-rounded-md tw-bg-blue-900 tw-text-white tw-cursor-pointer tw-font-semibold tw-shadow-lg",onClick:function(n){return e.getFlightMap(t)}},(0,c.WA)(t.flightNumber),9,li)])})),128))])]})),_:1},8,["modelValue","title","loading"])}var ui=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},ci=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function di(){function e(e){return ui(this,void 0,void 0,(function(){return ci(this,(function(t){try{(0,te.c)().setWorkOrder(e),(0,te.c)().showVisibleMapModal()}catch(n){(0,te.c)().setWorkOrder(null),console.log(n)}return[2]}))}))}return(0,r.GE)((function(){ke.close()})),{store:ke,getFlightMap:e}}var mi=function(){return mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},mi.apply(this,arguments)};const fi=(0,r._M)({setup:function(){return mi({},di())}}),pi=(0,Je.c)(fi,[["render",si]]),hi=pi;var gi=n(96332),yi=function(){return yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},yi.apply(this,arguments)};const bi=(0,r._M)({components:{kanbanColumn:za,actionBar:co,filters:Oo,filtersBar:qo,modalSchedule:Bo,formOrders:Ko.c,modalStation:ri,selectFlightNumberModal:hi,flightDetail:gi.c},setup:function(e){return yi({},Ka(e))}}),vi=(0,Je.c)(bi,[["render",u]]),wi=vi;tt()(bi,"components",{QBtnToggle:So.c,QDate:Co.c});var Ii=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Di=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ki=re.us.route.path;const Mi=(0,r._M)({components:{kanbanBoard:wi},props:{isBlank:{type:Boolean,default:function(){return!1}}},setup:function(e){function t(){var e=this;new Promise((function(t,n){return Ii(e,void 0,void 0,(function(){var e;return Di(this,(function(t){switch(t.label){case 0:return e=re.us.route.path.indexOf("passenger"),[4,(0,te.c)().setTypeWorkOrder(X.Qt)];case 1:return t.sent(),[4,(0,ee["default"])().setStationList([])];case 2:return t.sent(),[4,(0,te.c)().setIsPassenger(-1!==e)];case 3:return t.sent(),[4,(0,ee["default"])().getAllList()];case 4:return t.sent(),[4,(0,ee["default"])().getCustomerWithContract()];case 5:return t.sent(),[4,(0,Ot.c)().init()];case 6:return t.sent(),[2]}}))}))}))}return t(),(0,r.Kg)((function(e,t){return re.us.route.path}),(function(e,n){ki!==e&&(t(),ki=e,J.c.columns.forEach((function(e){e.cards=[]})))}),{deep:!0}),(0,r.u2)((function(){J.c.isBlank=e.isBlank,(0,te.c)().setIsblank(e.isBlank)})),{}}}),Ai=(0,Je.c)(Mi,[["render",a]]),xi=Ai},78792:(e,t,n)=>{"use strict";n.d(t,{c:()=>ye});var r=n(92444),a=n(74044),o={class:"service-list-ctn tw-mx-3 tw-p-4 tw-mb-12 tw-overflow-auto tw-rounded-lg"},i={class:"tw-w-full tw-flex tw-items-center"},l=(0,r.QD)("hr",{class:"tw-flex-grow tw-mx-2"},null,-1),s={class:"tw-flex-none"},u={key:0,class:"tw-py-2 tw-text-base tw-border tw-border-gray-100 tw-font-semibold tw-px-3 tw-rounded-lg tw-text-red-800 tw-mt-5 tw-bg-red-200"},c={class:"tw-py-5"},d={key:1,class:"tw-rounded-lg tw-border tw-px-4 border-color"},m=["onClick"],f={class:"tw-flex tw-w-full tw-items-center tw-font-semibold tw-text-gray-500 tw-py-2.5 tw-px-3.5 tw-my-2 tw-rounded-lg tw-cursor-pointer service-list-item"},p={class:"tw-w-11/12 tw-font-normal list-text-color"},h=(0,r.QD)("div",{class:"tw-w-1/6 tw-text-right"},[(0,r.QD)("i",{class:"fa-light fa-angle-right tw-font-black tw-text tw-text-lg color-icon"})],-1),g={key:4,class:"tw-text-center tw-text-gray-600 tw-text-xl tw-pb-12"},y=(0,r.QD)("i",{class:"fa-light fa-triangle-exclamation"},null,-1);function b(e,t,n,b,v,w){var I=(0,r.E1)("q-breadcrumbs-el"),D=(0,r.E1)("q-breadcrumbs"),k=(0,r.E1)("chipServices"),M=(0,r.E1)("inner-loading"),A=(0,r.E1)("q-icon"),x=(0,r.E1)("q-input"),T=(0,r.E1)("q-separator"),N=(0,r.E1)("expansionForm");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("section",i,[(0,r.K2)(D,{class:"tw-flex-none tw-text-base md:tw-text-xl max-width-breadcrumbs breadcrumbs-color-text"},{default:(0,r.Ql)((function(){return[(0,r.K2)(I,{label:"Services",onClick:t[0]||(t[0]=function(t){return e.setBreadcrumbs(null)}),class:"tw-cursor-pointer tw-text-base md:tw-text-xl tw-font-extrabold tw-text-blue-700 breadcrumbs-color-text-services"}),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.breadcrumbs,(function(t,n){return(0,r.Wz)(),(0,r.Az)(I,{key:t.id,label:t.title,onClick:function(r){return e.setBreadcrumbs(t,n)},class:(0,a.WN)([{"tw-cursor-pointer":n+1!==e.breadcrumbs.length},"tw-text-base md:tw-text-xl breadcrumbs-color-text"])},null,8,["label","onClick","class"])})),128))]})),_:1}),l,(0,r.QD)("div",s,[(0,r.K2)(k,{onSearch:t[1]||(t[1]=function(t){return e.search=t})})])]),e.errorList.length>0?((0,r.Wz)(),(0,r.An)("div",u," There are some services with mandatory fields, please check. ")):(0,r.g1)("",!0),(0,r.QD)("div",c,[(0,r.K2)(M,{visible:e.loading},null,8,["visible"]),e.selectService.component||0!==e.errorList.length?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(x,{key:0,borderless:"",standout:"",dense:"",color:"primary","input-class":"tw-p-0 tw-text-base color-input",placeholder:"What are you looking for?",class:"tw-mb-6 search search-service-list tw-text-blue-900 tw-max-w-full",modelValue:e.search,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.search=t}),clearable:""},{prepend:(0,r.Ql)((function(){return[(0,r.K2)(A,{color:"primary",class:"",name:"search"})]})),_:1},8,["modelValue"])),e.filterService.lists.length>0?((0,r.Wz)(),(0,r.An)("ul",d,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.filterService.lists,(function(t,n){return(0,r.Wz)(),(0,r.An)("li",{key:t.id,class:"tw-list-none tw-cursor-pointer,",onClick:function(n){return e.setBreadcrumbs(t)}},[(0,r.QD)("div",f,[(0,r.QD)("span",p,(0,a.WA)(t.title),1),h]),n<e.filterService.lists.length-1?((0,r.Wz)(),(0,r.Az)(T,{key:0,class:"hr-bg-color"})):(0,r.g1)("",!0)],8,m)})),128))])):(0,r.g1)("",!0),!e.loading&&e.filterService.dynamicField.length>0?((0,r.Wz)(),(0,r.Az)(N,{key:2,data:e.filterService.dynamicField},null,8,["data"])):(0,r.g1)("",!0),e.selectService.component?((0,r.Wz)(),(0,r.Az)((0,r.mk)(e.selectService.component),{key:3})):(0,r.g1)("",!0),0===e.filterService.lists.length&&0===e.filterService.dynamicField.length?((0,r.Wz)(),(0,r.An)("div",g,[y,(0,r.mY)(" No data available ")])):(0,r.g1)("",!0)])])}var v={id:"expansion-container",class:"tw-mb-12",style:{"max-width":"100%"}},w={key:0},I=["onClick"],D={class:"tw-text-base tw-font-bold",style:{color:"#1F294F"}},k=(0,r.QD)("br",null,null,-1),M={key:0,class:"tw-text-xs tw-text-gray-500"},A={class:"tw-text-sm",style:{color:"#8A98C3"}},x={class:"flex no-wrap items-center"},T={key:0,class:"tw-px-3 tw-font-semibold tw-mt-5 tw-text-center tw-hidden"},N={key:1},S={class:"tw-flex tw-w-2/5 tw-truncate tw-py-3 text-services tw-pl-2"},C={class:"q-px-sm"},z=["onClick"],O=(0,r.QD)("br",null,null,-1),$={key:0,class:"tw-text-xs tw-text-gray-500"},Q={class:"tw-w-3/5 tw-mx-2 tw-truncate tw-flex tw-flex-wrap tw-justify-end tw-gap-4"};function L(e,t,n,o,i,l){var s=(0,r.E1)("q-item-section"),u=(0,r.E1)("dynamic-field"),c=(0,r.E1)("q-card-section"),d=(0,r.E1)("q-card"),m=(0,r.E1)("q-expansion-item"),f=(0,r.E1)("q-list");return(0,r.Wz)(),(0,r.An)("div",v,[e.isDesktop?((0,r.Wz)(),(0,r.An)("div",N,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.data,(function(t,n){return(0,r.Wz)(),(0,r.An)("div",{key:n,class:"tw-flex color-bg-blue-gray-custom tw-py-2 tw-rounded-lg"},[(0,r.QD)("div",S,[(0,r.QD)("div",C,[(0,r.QD)("i",{class:(0,a.WN)(["fa-star color-icon-star tw-cursor-pointer",{"fa-solid":e.data[n].favourite,"fa-light":!e.data[n].favourite}]),onClick:function(t){return e.selectFavourite(e.data[n])}},null,10,z)]),(0,r.QD)("div",null,[(0,r.QD)("p",null,[(0,r.mY)((0,a.WA)(t.title)+" ",1),O,t.helpText?((0,r.Wz)(),(0,r.An)("span",$,(0,a.WA)(t.helpText),1)):(0,r.g1)("",!0)])])]),(0,r.QD)("div",Q,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(t.formField,(function(t,a){return(0,r.Wz)(),(0,r.An)("div",{key:a},[(0,r.QD)("div",null,[(0,r.K2)(u,{modelValue:e.data[n]["formField"][a]["value"],"onUpdate:modelValue":function(t){return e.data[n]["formField"][a]["value"]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])])])})),128))])])})),128))])):((0,r.Wz)(),(0,r.An)("div",w,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.data,(function(t,n){return(0,r.Wz)(),(0,r.Az)(f,{key:n},{default:(0,r.Ql)((function(){return[(0,r.K2)(m,{"header-class":"text-white"},{header:(0,r.Ql)((function(){return[(0,r.K2)(s,{avatar:"",class:"q-pr-none",style:{"min-width":"45px"}},{default:(0,r.Ql)((function(){return[(0,r.QD)("i",{class:(0,a.WN)(["fa-star color-icon-star tw-cursor-pointer tw-text-2xl",{"fa-solid":e.data[n].favourite,"fa-light":!e.data[n].favourite}]),onClick:function(t){return e.selectFavourite(e.data[n])}},null,10,I)]})),_:2},1024),(0,r.K2)(s,{class:"q-py-sm"},{default:(0,r.Ql)((function(){return[(0,r.QD)("span",D,[(0,r.mY)((0,a.WA)(t.title)+" ",1),k,t.helpText?((0,r.Wz)(),(0,r.An)("span",M,(0,a.WA)(t.helpText),1)):(0,r.g1)("",!0)]),(0,r.QD)("span",A,(0,a.WA)(e.showValue(t.formField.quantity)),1)]})),_:2},1024)]})),default:(0,r.Ql)((function(){return[(0,r.K2)(d,{class:"row card-color justify-center"},{default:(0,r.Ql)((function(){return[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(t.formField,(function(t,o){return(0,r.Wz)(),(0,r.Az)(c,{class:"q-py-md col-12 col-md",key:o},{default:(0,r.Ql)((function(){return[(0,r.QD)("label",x,[(0,r.K2)(u,{class:"marginzero tw-w-full",modelValue:e.newData[n]["formField"][o]["value"],"onUpdate:modelValue":function(t){return e.newData[n]["formField"][o]["value"]=t},field:t},null,8,["modelValue","onUpdate:modelValue","field"])]),"fullDate"===t.type&&1===t.props.typeIndexDate?((0,r.Wz)(),(0,r.An)("div",T," Difference (hours): "+(0,a.WA)(1))):(0,r.g1)("",!0)]})),_:2},1024)})),128))]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]))])}var E=n(75836),F=n(6472),W=n(20584),Y=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};const q=function(e){return Y(void 0,void 0,void 0,(function(){var t,n;return j(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,W.c.create("apiRoutes.qsite.favourites",{favouritableType:"Idata.Data.Entities.Ramp",favouritableId:e.id})];case 1:return t=r.sent(),[2,t.data];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))};var R=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};const U=function(e){return R(void 0,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,W.c.delete("apiRoutes.qsite.favourites",e.favouriteId)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))};var V=n(36852),_=n(8932),B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},B.apply(this,arguments)},K=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},H=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};const G=(0,r._M)({name:"expansionComponent",props:{data:{type:Array,default:function(){return[]}}},setup:function(e){var t=(0,r.S6)((function(){return e.data})),n=(0,r.S6)((function(){return window.innerWidth>="900"}));function a(e){return K(this,void 0,void 0,(function(){var t,n;return H(this,(function(r){switch(r.label){case 0:return e.favourite=!e.favourite,e.favourite?[3,2]:(n=(0,F.c)().getFavouriteList().find((function(t){return t.id===e.id})),[4,U(n)]);case 1:return r.sent(),(0,F.c)().removeFromFavouriteList(e),_.Qb.success({message:"Favorite deleted successfully Product:".concat(e.title)}),[3,4];case 2:return[4,q(e)];case 3:t=r.sent(),n=B(B({},e),{favouriteId:null===t||void 0===t?void 0:t.id}),(0,F.c)().pustFavouriteList(n),_.Qb.success("Favorite created successfully Product:".concat(e.title)),r.label=4;case 4:return[4,(0,V["default"])().getFavourites(!0)];case 5:return r.sent(),[2]}}))}))}var o=(0,E.IL)(!1),i=(0,E.IL)({});function l(e){if(e)return e.value}return{isDesktop:n,showValue:l,data:t,favourite:o,selectFavourite:a,refData:i}}});var Z=n(68716),J=n(99588),X=n(61656),ee=n(11032),te=n(70608),ne=n(71008),re=n(70880),ae=n(95252),oe=n.n(ae);const ie=(0,Z.c)(G,[["render",L]]),le=ie;function se(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var n=(0,r.S6)((function(){return _._s.tr})),a=(0,r.S6)((function(){return(0,F.c)().getShowFavourite()})),o=(0,r.S6)((function(){var e=g(s.value);return(0,F.c)().getFavouriteList().filter((function(t){return e.map((function(e){return e.id})).includes(t.id)}))})),i=(0,r.S6)((function(){return(0,F.c)().getLoading()})),l=(0,r.S6)((function(){return(0,F.c)().getErrorList()})),s=(0,r.S6)((function(){return(0,F.c)().getServiceList()})),u=(0,E.IL)(""),c=(0,E.IL)({}),d=(0,E.IL)([]),m=(0,r.S6)((function(){return!i.value&&!c.value.component&&!c.value.dynamicField&&y.value&&y.value.length>0})),f=(0,r.S6)((function(){return!i.value&&!c.value.component&&y.value&&0===y.value.length})),p=(0,r.S6)((function(){if(0===d.value.length){var e=s.value.find((function(e){return e.id===c.value.id}));return e?{dynamicField:[],lists:e.lists||[]}:{dynamicField:[],lists:s.value}}return c.value.lists&&c.value.lists.length>0&&c.value.dynamicField&&c.value.dynamicField.length>0?{dynamicField:c.value.dynamicField,lists:c.value.lists}:c.value.lists&&c.value.lists.length>0&&!c.value.dynamicField?{dynamicField:[],lists:c.value.lists}:c.value.lists&&0===c.value.lists.length&&c.value.dynamicField&&c.value.dynamicField.length>0?{dynamicField:c.value.dynamicField,lists:[]}:{dynamicField:[],lists:[]}})),h=function(e,t){if(void 0===t&&(t=null),u.value="",(0,F.c)().setShowFavourite(!1),(0,F.c)().setErrorList([]),!e)return c.value={},void(d.value=[]);c.value=e,null===t?d.value.push(e):d.value=d.value.filter((function(e,n){return n<=t}))};function g(e){if(0===e.length)return[];var t=[];return e.forEach((function(e){e.dynamicField&&e.dynamicField.length>0&&t.push.apply(t,e.dynamicField),e.lists&&e.lists.length>0&&t.push.apply(t,g(e.lists))})),t}var y=(0,r.S6)((function(){var e=p.value;u.value=null===u.value?"":u.value;var t=(0,F.c)().getErrorList().map((function(e){return e.product_id}));if(""!==u.value&&u.value.length>=3&&!a.value&&0===t.length){var n=g(s.value||[]).filter((function(e){return e.title.toLowerCase().includes(u.value.toLowerCase())}));return{dynamicField:n,lists:[]}}if(a.value&&0===t.length){var r=o.value.map((function(e){return e.id}));n=g(s.value||[]).filter((function(e){return r.includes(e.id)}));return{dynamicField:n,lists:[]}}if(t.length>0){n=g(s.value||[]).filter((function(e){return t.includes(e.id)}));return{dynamicField:n,lists:[]}}return e}));return(0,r.Kg)((function(){return o.value}),(function(e,t){0===e.length&&(0,F.c)().setShowFavourite(!1)}),{deep:!0}),(0,r.u2)((function(){document.addEventListener("wheel",(function(e){var t=document;"number"===t.activeElement.type&&t.activeElement.blur()}))})),{serviceListModel:s,breadcrumbs:d,selectService:c,setBreadcrumbs:h,services:p,filterService:y,search:u,loading:i,showServiceList:m,showNoData:f,trans:n,errorList:l}}oe()(G,"components",{QList:J.c,QExpansionItem:X.c,QItemSection:ee.c,QCard:te.c,QCardSection:ne.c,QSeparator:re.c});var ue=function(){return ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ue.apply(this,arguments)};const ce=(0,r._M)({components:{expansionForm:le,chipServices:(0,r.Mn)((function(){return Promise.all([n.e(1640),n.e(2280)]).then(n.bind(n,62280))}))},setup:function(){return ue({},se())}});var de=n(92852),me=n(15736),fe=n(20540),pe=n(58120),he=n(84884);const ge=(0,Z.c)(ce,[["render",b]]),ye=ge;oe()(ce,"components",{QBreadcrumbs:de.c,QBreadcrumbsEl:me.c,QInput:fe.c,QIcon:pe.c,QSeparator:re.c,QItem:he.c,QList:J.c})},97208:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var r=n(92444);function a(e,t,n,a,o,i){const l=(0,r.E1)("form-contract-form"),s=(0,r.E1)("master-modal");return(0,r.Wz)(),(0,r.Az)(s,{modelValue:o.form.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.show=e),loading:o.loading,"custom-position":"",title:o.form.title,persistent:!0},{default:(0,r.Ql)((()=>[(0,r.K2)(l,{onClose:i.closeModal,row:o.form.data,update:o.form.update},null,8,["onClose","row","update"])])),_:1},8,["modelValue","loading","title"])}const o={class:"box box-auto-height row justify-end"};function i(e,t,n,a,i,l){const s=(0,r.E1)("dynamic-field"),u=(0,r.E1)("q-form"),c=(0,r.E1)("q-btn"),d=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.K2)(u,{ref:"ruleForm",id:"ruleForm"},{default:(0,r.Ql)((()=>[(0,r.K2)(s,{key:"contractRuleType",id:"contractRuleType",field:i.type,class:"col-12",modelValue:i.form.type,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.type=e)},null,8,["field","modelValue"]),(0,r.K2)(s,{key:"contractRuleStatus",id:"contractRuleStatus",field:i.status,class:"col-12",modelValue:i.form.status,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.status=e)},null,8,["field","modelValue"]),i.GLOBAL_RULES.includes(this.form.type)?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(s,{key:"contract",id:"contract",field:l.contractField,class:"col-12",modelValue:i.form.contractId,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.contractId=e)},null,8,["field","modelValue"]))])),_:1},512),((0,r.Wz)(),(0,r.Az)((0,r.mk)(l.ruleComponent),{ref:"ruleComponent",contractId:i.form.contractId,form:i.form,modelValue:i.form,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form=e)},null,8,["contractId","form","modelValue"])),(0,r.QD)("div",o,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(l.formActions,((e,n)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:n},[void 0==e.vIf||e.vIf?((0,r.Wz)(),(0,r.Az)(c,(0,r.Gu)({key:0},e,{unelevated:"",rounded:"","no-caps":"",onClick:t[4]||(t[4]=e=>l.save()),type:"button"}),null,16)):(0,r.g1)("",!0)],64)))),128)),(0,r.K2)(d,{visible:i.loading},null,8,["visible"])])])}const l=[{value:1,label:"Included",component:"included"},{value:2,label:"Parking",component:"parking"},{value:3,label:"AircraftType",component:"aircraftType"},{value:4,label:"OperationType",component:"operationType"},{value:5,label:"CargoKilos",component:"cargoKilos"}],s=["4"],u={id:"includedRuleComponent"};function c(e,t,n,a,o,i){const l=(0,r.E1)("dynamic-field"),s=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",u,[(0,r.K2)(s,{ref:"includedRuleForm",id:"includedRuleForm",class:"row"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields,((e,t)=>((0,r.Wz)(),(0,r.Az)(l,{key:"includedContractRuleField"+t+e.name,id:"includedContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:n.form[e.name],"onUpdate:modelValue":t=>n.form[e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128))])),_:1},512)])}var d=n(8932);const m={beforeUnmount(){d.kN.off("page.data.refresh")},props:{form:{default:{type:null,status:!0,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:null}},contractId:{default:null}},emits:["update:modelValue"],components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,data:{type:null,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:null}}},computed:{formFields(){return[{name:"quantityRule",value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Quantity",clearable:!0,color:"primary",type:"number"}},{name:"productOriginId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Service Origin",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.products",select:{label:"fullName",id:"id"},requestParams:{filter:{status:!0}}}},{name:"contractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{contractId:this.contractId}}}}]}},methods:{init(){},validateForm(){return new Promise(((e,t)=>{this.$refs.includedRuleForm.validate().then((t=>{t?(this.data=this.$clone(this.form),this.$emit("update:modelValue",this.data),e(t)):(this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),e(t))}))}))}}};var f=n(68716),p=n(14288),h=n(95252),g=n.n(h);const y=(0,f.c)(m,[["render",c]]),b=y;g()(m,"components",{QForm:p.c});const v={id:"parkingRuleComponent"};function w(e,t,n,a,o,i){const l=(0,r.E1)("dynamic-field"),s=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",v,[(0,r.K2)(s,{ref:"parkingRuleForm",id:"parkingRuleForm",class:"row"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields,((e,t)=>((0,r.Wz)(),(0,r.Az)(l,{key:"parkingContractRuleField"+t+e.name,id:"parkingContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:n.form[e.name],"onUpdate:modelValue":t=>n.form[e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128))])),_:1},512)])}const I={beforeUnmount(){d.kN.off("page.data.refresh")},props:{form:{default:{type:null,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:null}},contractId:{default:null}},emits:["update:modelValue"],components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,data:{type:null,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:null}}},computed:{formFields(){return[{name:"quantityRule",value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Quantity",clearable:!0,color:"primary",type:"number"}},{name:"productOriginId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Service Origin",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.products",select:{label:"fullName",id:"id"},requestParams:{filter:{status:!0}}}},{name:"contractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{workdayContractLineStatus:{operator:"!=",value:"COMPLETE"},contractId:this.contractId}}}}]}},methods:{init(){},validateForm(){return new Promise(((e,t)=>{this.$refs.parkingRuleForm.validate().then((t=>{t?(this.data=this.$clone(this.form),this.$emit("update:modelValue",this.data),e(t)):(this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),e(t))}))}))}}},D=(0,f.c)(I,[["render",w]]),k=D;g()(I,"components",{QForm:p.c});const M={id:"aircraftTypeRuleComponent"},A={class:"full-width q-px-md"},x={flat:"",class:"row"};function T(e,t,n,a,o,i){const l=(0,r.E1)("dynamic-field"),s=(0,r.E1)("q-btn"),u=(0,r.E1)("q-item-label"),c=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",M,[(0,r.K2)(c,{ref:"aircraftTypeRuleForm",id:"aircraftTypeRuleForm"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields,((e,t)=>((0,r.Wz)(),(0,r.Az)(l,{key:"aircraftTypeContractRuleField"+t+e.name,id:"aircraftTypeContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:n.form[e.name],"onUpdate:modelValue":t=>n.form[e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128)),(0,r.QD)("div",A,[(0,r.K2)(u,null,{default:(0,r.Ql)((()=>[(0,r.mY)(" Aircraft Type Options "),(0,r.K2)(s,{class:"q-ml-sm",flat:"",round:"",icon:"fa-light fa-plus",color:"primary",onClick:t[0]||(t[0]=e=>i.addAcTypes())})])),_:1})]),(0,r.QD)("div",x,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.aircraftTypesFields,((e,t)=>((0,r.Wz)(),(0,r.An)(r.ae,{key:t},[(0,r.K2)(l,{class:"col-12 col-md-5 q-pr-sm",field:e,modelValue:o.acTypesList[t.includes("acTypes")?t.split("acTypes")[1]:t.split("contractLineId")[1]][t.includes("contractLineId")?"contractLineId":"acTypes"],"onUpdate:modelValue":e=>o.acTypesList[t.includes("acTypes")?t.split("acTypes")[1]:t.split("contractLineId")[1]][t.includes("contractLineId")?"contractLineId":"acTypes"]=e},null,8,["field","modelValue","onUpdate:modelValue"]),i.ifDelButton(e,t)?((0,r.Wz)(),(0,r.Az)(s,{key:0,style:{width:"40px",height:"38px"},class:"col-12 btn-stick col-md-1",round:"",icon:"fa-light fa-trash-can",flat:"",size:"12px",color:"primary",onClick:e=>i.delAcType(t)},null,8,["onClick"])):(0,r.g1)("",!0)],64)))),128))])])),_:1},512)])}n(23816);const N={beforeUnmount(){d.kN.off("page.data.refresh")},props:{form:{default:{type:null,status:!0,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:{acTypesRules:[]}}},contractId:{default:null}},emits:["update:modelValue"],components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,data:{quantityRule:null,serviceOriginId:null,contractLineId:null,options:null},acTypesList:[{acTypes:[],contractLineId:null}]}},computed:{formFields(){return[{name:"contractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Default Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{workdayContractLineStatus:{operator:"!=",value:"COMPLETE"},contractId:this.contractId}}}}]},aircraftTypesFields(){const e={};return this.acTypesList.forEach(((t,n)=>{e["acTypes"+n]={value:[],type:"select",props:{label:"Aircraft Types",rules:[e=>e.length||this.$tr("isite.cms.message.fieldRequired")],multiple:!0,useChips:!0,clearable:!0,color:"primary","hide-bottom-space":!1},loadOptions:{apiRoute:"apiRoutes.qfly.aircraftTypes",select:{label:"fullName",id:"id"},requestParams:{filter:{}}},label:"Aircraft Types"},e["contractLineId"+n]={name:"contractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{workdayContractLineStatus:{operator:"!=",value:"COMPLETE"},contractId:this.contractId}}}}})),e}},methods:{init(){this.form.options&&this.form.options.acTypesRules&&(this.acTypesList=this.form.options.acTypesRules)},ifDelButton(e,t){return!t.includes("0")&&!t.includes("acTypes")},addAcTypes(){this.acTypesList.push({acTypes:[],contractLineId:null})},delAcType(e){const t=parseInt(e.slice(-1));this.acTypesList.splice(t,1)},resetAcTypesList(){this.acTypesList=[],this.addAcTypes()},validateForm(){return new Promise(((e,t)=>{this.$refs.aircraftTypeRuleForm.validate().then((t=>{t?(this.data=this.$clone(this.form),this.data.options={acTypesRules:this.acTypesList},this.$emit("update:modelValue",this.data),e(t)):(this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),e(t))}))}))}}};var S=n(2992),C=n(99140);const z=(0,f.c)(N,[["render",T]]),O=z;g()(N,"components",{QForm:p.c,QItemLabel:S.c,QBtn:C.c});const $={id:"operationTypeRuleComponent"};function Q(e,t,n,a,o,i){const l=(0,r.E1)("dynamic-field"),s=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",$,[(0,r.K2)(s,{ref:"operationTypeRuleForm",id:"operationTypeRuleForm",class:"row"},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields,((e,t)=>((0,r.Wz)(),(0,r.Az)(l,{key:"operationTypeContractRuleField"+t+e.name,id:"operationTypeContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:n.form[e.name],"onUpdate:modelValue":t=>n.form[e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128)),(0,r.K2)(l,{key:"operationTypeContractRuleFieldOperationTypes",id:"operationTypeContractRuleFieldOperationTypes",field:i.operationTypesField,class:"col-12",modelValue:o.operationTypes,"onUpdate:modelValue":t[0]||(t[0]=e=>o.operationTypes=e)},null,8,["field","modelValue"])])),_:1},512)])}const L={beforeUnmount(){d.kN.off("page.data.refresh")},props:{form:{default:{type:null,status:!0,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:{operationTypes:[]}}},contractId:{default:null}},emits:["update:modelValue"],components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,data:{},operationTypes:[]}},computed:{formFields(){return[{name:"quantityRule",value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Quantity",clearable:!0,color:"primary",type:"number"}},{name:"productOriginId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Service Origin",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.products",select:{label:"fullName",id:"id"},requestParams:{filter:{status:!0}}}}]},operationTypesField(){return{name:"operationTypes",value:[],type:"select",props:{rules:[e=>e.length||this.$tr("isite.cms.message.fieldRequired")],label:"Operation Types",multiple:!0,useChips:!0,clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.operationTypes",select:{label:"operationName",id:"id"},requestParams:{filter:{status:!0}}}}}},methods:{init(){this.form.options&&this.form.options.operationTypes&&(this.operationTypes=this.form.options.operationTypes)},validateForm(){return new Promise(((e,t)=>{this.$refs.operationTypeRuleForm.validate().then((t=>{t?(this.data=this.$clone(this.form),this.data.options={operationTypes:this.operationTypes},this.$emit("update:modelValue",this.data),e(t)):(this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),e(t))}))}))}}},E=(0,f.c)(L,[["render",Q]]),F=E;g()(L,"components",{QForm:p.c});const W={id:"cargoKilosRuleComponent"},Y={class:"col-12"},j={class:"col-12"};function q(e,t,n,a,o,i){const l=(0,r.E1)("q-item-label"),s=(0,r.E1)("dynamic-field"),u=(0,r.E1)("q-form");return(0,r.Wz)(),(0,r.An)("div",W,[(0,r.K2)(u,{ref:"cargoKilosRuleForm",id:"cargoKilosRuleForm",class:"row"},{default:(0,r.Ql)((()=>[(0,r.QD)("div",Y,[(0,r.K2)(l,null,{default:(0,r.Ql)((()=>[(0,r.mY)("Loaded:")])),_:1})]),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.loaded,((e,t)=>((0,r.Wz)(),(0,r.Az)(s,{key:"cargoKilosLoadedContractRuleField"+t+e.name,id:"cargoKilosLoadedContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:o.kilosTypes[0][e.name],"onUpdate:modelValue":t=>o.kilosTypes[0][e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128)),(0,r.QD)("div",j,[(0,r.K2)(l,null,{default:(0,r.Ql)((()=>[(0,r.mY)("Unloaded:")])),_:1})]),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(i.formFields.unloaded,((e,t)=>((0,r.Wz)(),(0,r.Az)(s,{key:"cargoKilosUnloadedContractRuleField"+t+e.name,id:"cargoKilosUnloadedContractRuleField"+t+e.name,field:e,class:"col-12",modelValue:o.kilosTypes[1][e.name],"onUpdate:modelValue":t=>o.kilosTypes[1][e.name]=t},null,8,["id","field","modelValue","onUpdate:modelValue"])))),128))])),_:1},512)])}const R={beforeUnmount(){d.kN.off("page.data.refresh")},props:{form:{default:{type:null,status:!0,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:{kilosTypes:[{type:"loaded",quantityRule:null,operationTypes:[],noExceedContractLineId:null,exceedContractLineId:null},{type:"unloaded",quantityRule:null,operationTypes:[],noExceedContractLineId:null,exceedContractLineId:null}]}}},contractId:{default:null}},emits:["update:modelValue"],components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,kilosTypes:[{type:"loaded",quantityRule:null,operationTypes:[],noExceedContractLineId:null,exceedContractLineId:null},{type:"unloaded",quantityRule:null,operationTypes:[],noExceedContractLineId:null,exceedContractLineId:null}],data:{}}},computed:{formFields(){return{loaded:[{name:"quantityRule",value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Quantity(Kilos)",clearable:!0,color:"primary",type:"number"}},{name:"operationTypes",value:[],type:"select",props:{rules:[e=>e.length||this.$tr("isite.cms.message.fieldRequired")],label:"Operation Types",multiple:!0,useChips:!0,clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.operationTypes",select:{label:"operationName",id:"id"},requestParams:{filter:{status:!0}}}},{name:"noExceedContractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"No Exceed Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{contractId:this.contractId}}}},{name:"exceedContractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Exceed Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{contractId:this.contractId}}}}],unloaded:[{name:"quantityRule",value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Quantity(Kilos)",clearable:!0,color:"primary",type:"number"}},{name:"operationTypes",value:[],type:"select",props:{rules:[e=>e.length||this.$tr("isite.cms.message.fieldRequired")],label:"Operation Types",multiple:!0,useChips:!0,clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qramp.operationTypes",select:{label:"operationName",id:"id"},requestParams:{filter:{status:!0}}}},{name:"noExceedContractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"No Exceed Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{contractId:this.contractId}}}},{name:"exceedContractLineId",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Exceed Contract Line",clearable:!0,color:"primary"},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contractLines",select:{label:"fullName",id:"id"},requestParams:{filter:{contractId:this.contractId}}}}]}}},methods:{init(){this.form.options&&this.form.options.kilosTypes&&(this.kilosTypes=this.form.options.kilosTypes)},validateForm(){return new Promise(((e,t)=>{this.$refs.cargoKilosRuleForm.validate().then((t=>{t?(this.data=this.$clone(this.form),this.data.options={kilosTypes:this.kilosTypes},this.$emit("update:modelValue",this.data),e(t)):(this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")}),e(t))}))}))}}},P=(0,f.c)(R,[["render",q]]),U=P;g()(R,"components",{QForm:p.c,QItemLabel:S.c});var V=n(89632);const _={beforeUnmount(){d.kN.off("page.data.refresh")},props:{modelValue:{default:!0},update:{default:!1},row:{default:!1}},emits:["loading","close"],components:{included:b,parking:k,aircraftType:O,operationType:F,cargoKilos:U},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{GLOBAL_RULES:s,loading:!1,data:[],form:{id:null,status:!0,type:null,productOriginId:null,contractLineId:null,contractId:null,quantityRule:null,options:null},status:{name:"status",value:!0,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Status",options:[{label:"Active",value:!0},{label:"Inactive",value:!1}],color:"primary"}},type:{name:"type",value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:this.update,outlined:!this.update,borderless:this.update,label:"Rule Type",clearable:!0,color:"primary",options:l}}}},computed:{contractField(){return{name:"contractId",value:this.contractId,type:"select",props:{rules:[e=>!!e&&!s.includes(this.form.type)||this.$tr("isite.cms.message.fieldRequired")],label:"Contract",clearable:!0,color:"primary",readonly:0!==this.contractId},loadOptions:{apiRoute:"apiRoutes.qsetupagione.contracts",select:{label:"contractName",id:"id"},requestParams:{filter:{}}}}},ruleComponent(){let e=this.type.props.options.find((e=>e.value==this.form.type));return e?e.component:null},contractId(){return(0,V.c)().getContractId()},formActions(){let e={submit:{color:"green",icon:"fas fa-save",label:this.$tr("isite.cms.label.save"),action:()=>this.save()}};return[e.submit]}},methods:{init(){if(this.row){let e=this.$clone(this.row);this.form.id=e.id,this.form.status=e.status,this.form.type=e.type,this.form.productOriginId=e.productOriginId,this.form.contractLineId=e.contractLineId,this.form.contractId=e.contractId,this.form.quantityRule=e.quantityRule,this.form.options=e.options}this.contractId&&(this.form.contractId=this.$clone(this.contractId)),console.log(this.contractId)},save(){const e="apiRoutes.qramp.contractRules";this.loading=!0,this.$emit("loading",!0),this.$refs.ruleForm.validate().then((async t=>{if(t){let t=await this.$refs.ruleComponent.validateForm();if(t){const t=this.update?this.$crud.update(e,this.form.id,this.form):this.$crud.create(e,this.form);t.then((e=>{const t=this.update?`${this.$tr("isite.cms.message.recordUpdated")}`:`${this.$tr("isite.cms.message.recordCreated")}`;this.$alert.info({message:t}),d.kN.emit("crud.data.refresh"),this.$emit("close",!1),this.$emit("loading",!1),this.loading=!1})).catch((e=>{this.loading=!1,this.$emit("loading",!1),this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoUpdated")}`}),console.log("SEND INFO ERROR:",e)}))}else this.loading=!1,this.$emit("loading",!1)}else this.loading=!1,this.$emit("loading",!1),this.$alert.error({message:this.$tr("isite.cms.message.formInvalid")})}))},getData(e=!1){return new Promise(((t,n)=>{this.loading=!0;let r={refresh:e};this.$crud.index("apiRoutes",r).then((e=>{this.data=e.data,this.loading=!1})).catch((e=>{this.loading=!1}))}))}}},B=(0,f.c)(_,[["render",i]]),K=B;g()(_,"components",{QForm:p.c,QBtn:C.c});const H={components:{formContractForm:K},data(){return{crudId:this.$uid(),loading:!1,form:{title:"",update:!1,show:!1,data:null}}},methods:{closeModal(e){this.form.show=e}},computed:{crudData(){return{crudId:this.crudId,apiRoute:"apiRoutes.qramp.contractRules",permission:"setup.contract-rules",create:{method:()=>{this.form={title:this.$tr("setupagione.cms.newContractRule"),show:!0,update:!1,data:null}}},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",sortable:!0},{name:"type",label:this.$tr("isite.cms.form.type"),field:"typeName",align:"left"},{name:"contract",label:"Contract",field:"contract",format:e=>e?e.contractName:"-",align:"left"},{name:"service",label:"Service",field:"product",format:e=>e?e.name+" - "+e.externalId:"-",align:"left"},{name:"contractRuleStatus",label:"Status",field:"status",format:e=>e?"Active":"Inactive",align:"left"},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",format:e=>e?this.$trd(e):"-",align:"left",sortable:!0},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"center"}],requestParams:{include:"contract,product"},filters:{contractId:{value:null,type:"select",quickFilter:!0,loadOptions:{apiRoute:"apiRoutes.qsetupagione.contracts",select:{label:"contractName",id:"id"}},props:{label:"Contract",clearable:!0}},type:{name:"type",value:null,type:"select",quickFilter:!0,props:{options:l,label:"Rule Type",clearable:!0}}}},update:{method:e=>{this.form={title:this.$tr("setupagione.cms.updateContractRule"),update:!0,show:!0,data:e}}},delete:!0,formLeft:{},formRight:{}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}}},G=(0,f.c)(H,[["render",a]]),Z=G},66592:(e,t,n)=>{"use strict";n.d(t,{c:()=>B});var r=n(92444),a=n(74044);const o={id:"componentContent",class:"box relative-position",style:{padding:"0px"}},i={class:"row items-center"},l={class:"col-12"},s={key:0,class:"col-12"},u={class:"row items-center justify-center q-gutter-x-sm q-py-md"},c={id:"calendarContent"},d={class:"row q-py-md"},m=["onClick"],f={class:"event-icon row justify-center"},p={class:"event-description q-pb-sm q-px-sm"},h={class:"text-caption ellipsis"},g={class:"text-weight-bold"},y={class:"q-pa-sm row q-col-gutter-y-xs"},b=["onClick"],v={key:1,id:"eventListcontent"},w={class:"row"},I=["onClick"],D={class:"event-icon row justify-center"},k={class:"event-description q-pb-sm q-px-sm"},M={class:"text-caption ellipsis"},A={class:"text-weight-bold"},x={key:1,class:"box"},T={class:"text-left"};function N(e,t,n,N,S,C){const z=(0,r.E1)("q-btn-toggle"),O=(0,r.E1)("q-btn"),$=(0,r.E1)("q-date"),Q=(0,r.E1)("q-dialog"),L=(0,r.E1)("q-separator"),E=(0,r.E1)("q-avatar"),F=(0,r.E1)("q-icon"),W=(0,r.E1)("q-tooltip"),Y=(0,r.E1)("q-calendar"),j=(0,r.E1)("q-item-section"),q=(0,r.E1)("q-item"),R=(0,r.E1)("q-list"),P=(0,r.E1)("master-modal"),U=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",{id:"calendarComponent",key:S.componentId},[(0,r.QD)("div",o,[(0,r.QD)("div",i,[(0,r.QD)("div",l,[(0,r.K2)(z,{modelValue:S.calendarType,"onUpdate:modelValue":t[0]||(t[0]=e=>S.calendarType=e),"no-caps":"",unelevated:"","toggle-color":"blue-grey",color:"white","text-color":"blue-grey",options:S.calendarTypeOptions,id:"btnCalendarType",size:"14px",padding:"md sm",spread:""},null,8,["modelValue","options"])]),"all"!=S.calendarType?((0,r.Wz)(),(0,r.An)("div",s,[(0,r.QD)("div",u,["all"!=S.calendarType?((0,r.Wz)(),(0,r.Az)(O,{key:0,onClick:t[1]||(t[1]=t=>e.$refs.calendarComponent.prev()),icon:"fas fa-chevron-left",color:"blue-grey",round:"",unelevated:"",size:"sm",flat:""})):(0,r.g1)("",!0),(0,r.QD)("div",{class:"text-blue-grey text-weight-bold text-subtitle1 cursor-pointer",onClick:t[2]||(t[2]=e=>S.modalQDate=!0)},(0,a.WA)("day"==S.calendarType?e.$trd(S.calendarDate,{type:"small"}):e.$trd(S.calendarDate,{type:"month"}))+", "+(0,a.WA)(e.$trd(S.calendarDate,{type:"year"})),1),(0,r.K2)(Q,{modelValue:S.modalQDate,"onUpdate:modelValue":t[5]||(t[5]=e=>S.modalQDate=e)},{default:(0,r.Ql)((()=>[(0,r.K2)($,{modelValue:S.calendarDate,"onUpdate:modelValue":[t[3]||(t[3]=e=>S.calendarDate=e),t[4]||(t[4]=e=>S.modalQDate=!1)],mask:"YYYY-MM-DD"},null,8,["modelValue"])])),_:1},8,["modelValue"]),"all"!=S.calendarType?((0,r.Wz)(),(0,r.Az)(O,{key:1,onClick:t[6]||(t[6]=t=>e.$refs.calendarComponent.next()),icon:"fas fa-chevron-right",color:"blue-grey",round:"",unelevated:"",size:"sm",flat:""})):(0,r.g1)("",!0)]),(0,r.K2)(L)])):(0,r.g1)("",!0)]),(0,r.QD)("div",c,["all"!=S.calendarType?((0,r.Wz)(),(0,r.Az)(Y,(0,r.Gu)({key:0,id:"calendarComponent",modelValue:S.calendarDate,"onUpdate:modelValue":t[7]||(t[7]=e=>S.calendarDate=e)},C.propsCalendar[S.calendarType],{ref:"calendarComponent","no-scroll":""}),(0,r.QP)({day:(0,r.Ql)((({timestamp:e})=>[(0,r.QD)("div",y,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(C.getEventsList(e),((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:"event-content q-px-sm q-py-xs relative-position text-caption ellipsis",style:{margin:"0 !important"},onClick:t=>{S.modal.data=e,S.modal.show=!0}},[(0,r.K2)(E,{icon:e.icon,color:e.color,size:"sm","text-color":"white"},null,8,["icon","color"]),(0,r.mY)(" "+(0,a.WA)(e.time)+" - "+(0,a.WA)(e.title)+" ",1),(0,r.K2)(W,null,{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(e.title),1)])),_:2},1024)],8,b)))),128))])])),_:2},["card"==C.propsCalendar[S.calendarType].type?{name:"day-body",fn:(0,r.Ql)((({timestamp:e,timeStartPos:t,timeDurationHeight:n})=>[(0,r.QD)("div",d,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(C.getEventsList(e),((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:(0,a.WN)(C.propsCalendar[S.calendarType].eventClass)},[(0,r.QD)("div",{class:"event-content",onClick:t=>{S.modal.data=e,S.modal.show=!0}},[(0,r.QD)("div",f,[(0,r.K2)(E,{icon:e.icon,color:e.color},null,8,["icon","color"])]),(0,r.QD)("div",p,[(0,r.QD)("div",h,(0,a.WA)(e.title),1),(0,r.QD)("div",g,(0,a.WA)(e.time),1),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.mainDetails||[],((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:"text-caption ellipsis"},[e.icon?((0,r.Wz)(),(0,r.Az)(F,{key:0,name:e.icon},null,8,["name"])):(0,r.g1)("",!0),(0,r.mY)(" "+(0,a.WA)(e.value),1)])))),128))])],8,m)],2)))),128))])])),key:"0"}:void 0]),1040,["modelValue"])):((0,r.Wz)(),(0,r.An)("div",v,[(0,r.QD)("div",w,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(C.getEventsList(),((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:(0,a.WN)(C.propsCalendar[S.calendarType].eventClass)},[(0,r.QD)("div",{class:"event-content",onClick:t=>{S.modal.data=e,S.modal.show=!0}},[(0,r.QD)("div",D,[(0,r.K2)(E,{icon:e.icon,color:e.color},null,8,["icon","color"])]),(0,r.QD)("div",k,[(0,r.QD)("div",M,(0,a.WA)(e.title),1),(0,r.QD)("div",A,(0,a.WA)(e.time),1),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.mainDetails||[],((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:"text-caption ellipsis"},[e.icon?((0,r.Wz)(),(0,r.Az)(F,{key:0,name:e.icon},null,8,["name"])):(0,r.g1)("",!0),(0,r.mY)(" "+(0,a.WA)(e.value),1)])))),128))])],8,I)],2)))),128))])]))]),(0,r.K2)(P,{modelValue:S.modal.show,"onUpdate:modelValue":t[8]||(t[8]=e=>S.modal.show=e),"custom-position":"",actions:n.eventActions||[],loading:S.loading,title:e.$tr("isite.cms.label.event")+(S.modal.data.id?" ID: "+S.modal.data.id:"")},{default:(0,r.Ql)((()=>[S.modal.data.card?((0,r.Wz)(),(0,r.Az)((0,r.mk)(S.modal.data.card.component),{key:0,row:S.modal.data.card.row},null,8,["row"])):((0,r.Wz)(),(0,r.An)("div",x,[(0,r.K2)(R,{separator:"",dense:""},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(S.modal.data.extraDetails,((e,t)=>((0,r.Wz)(),(0,r.Az)(q,{key:t,class:"q-px-none"},{default:(0,r.Ql)((()=>[(0,r.K2)(j,null,{default:(0,r.Ql)((()=>[(0,r.QD)("div",T,[(0,r.K2)(F,{name:e.icon,color:"grey-7",class:"q-mr-sm",size:"sm"},null,8,["name"]),(0,r.mY)(" "+(0,a.WA)(e.title),1)])])),_:2},1024),(0,r.K2)(j,{side:"",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024)))),128))])),_:1})]))])),_:1},8,["modelValue","actions","loading","title"]),(0,r.K2)(U,{visible:S.loading},null,8,["visible"])])])}n(23816);var S=n(83636),C=n(8932);const z={components:{QCalendar:S.mA},props:{eventsData:{default:!1},eventActions:{default:!1}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{componentId:this.$uid(),loading:!1,calendarType:"day",calendarTypeOptions:[{label:this.$tr("isite.cms.label.month"),value:"month",icon:"fas fa-calendar-alt"},{label:this.$tr("isite.cms.label.week"),value:"week",icon:"fas fa-calendar-week"},{label:this.$tr("isite.cms.label.day"),value:"day",icon:"fas fa-calendar-day"},{label:this.$tr("isite.cms.label.all"),value:"all",icon:"fas fa-list-alt"}],calendarDate:this.$moment().format("YYYY-MM-DD"),modalQDate:!1,modal:{show:!1,data:!1}}},computed:{propsCalendar(){return{month:{view:"month",mode:"month",style:"min-width: 1200px;",type:"badge"},week:{view:"week",eventClass:"col-12",style:"min-width: 1200px;",type:"card"},day:{view:"day",mode:"day",eventClass:"col-6 col-md-4 col-lg-3",type:"card"},all:{view:"all",eventClass:"col-6 col-md-4 col-lg-3",type:"card"}}}},methods:{init(){C.kN.on("page.data.refresh",(()=>this.componentId=this.$uid()))},getEventsList(e=!1){let t=this.$clone(this.eventsData||[]),n=[];return t.forEach((t=>{let r=(0,S.$1)(new Date(t.date)),a=`${r.date} ${r.time}`;e&&r.date!=e.date||n.push({...t,time:this.$trd(a,{type:"time"}),extraDetails:[{value:t.title},{title:this.$tr("isite.cms.label.date"),icon:"fas fa-calendar-day",value:this.$trd(r.date)},{title:this.$tr("isite.cms.label.time"),icon:"fas fa-clock",value:this.$trd(a,{type:"time"})},...t.extraDetails||[]]})})),n}}};var O=n(68716),$=n(15344),Q=n(99140),L=n(30852),E=n(59576),F=n(70880),W=n(11252),Y=n(58120),j=n(90111),q=n(99588),R=n(84884),P=n(11032),U=n(95252),V=n.n(U);const _=(0,O.c)(z,[["render",N]]),B=_;V()(z,"components",{QBtnToggle:$.c,QBtn:Q.c,QDialog:L.c,QDate:E.c,QSeparator:F.c,QAvatar:W.c,QIcon:Y.c,QTooltip:j.c,QList:q.c,QItem:R.c,QItemSection:P.c})},97180:(e,t,n)=>{"use strict";n.d(t,{c:()=>X});var r=n(92444),a=n(74044),o={key:0},i=["src"],l={key:0},s={class:"flex justify-between"},u={class:"tw-mt-2 tw-space-x-2"},c={key:1,class:"tw-py-8"},d={class:"tw-p-4 tw-rounded-md tw-bg-white"},m={key:0,class:"tw-text-sm"},f={key:0},p={key:1},h={key:2},g={class:"tw-w-11/12"},y=["innerHTML","onClick"],b={class:"tw-text-right tw-text-xs tw-w-1/12"},v={key:3,class:"flex justify-between"},w={class:"tw-mt-2 tw-space-x-2"},I={key:1,class:"tw-my-10"};function D(e,t,n,D,k,M){var A=(0,r.E1)("q-avatar"),x=(0,r.E1)("q-item-section"),T=(0,r.E1)("q-card-section"),N=(0,r.E1)("q-card"),S=(0,r.E1)("CKEditor"),C=(0,r.E1)("dynamic-field"),z=(0,r.E1)("q-btn"),O=(0,r.E1)("q-spinner"),$=(0,r.E1)("q-item"),Q=(0,r.E1)("q-tooltip"),L=(0,r.E1)("q-timeline-entry"),E=(0,r.E1)("q-timeline"),F=(0,r.E1)("inner-loading"),W=(0,r.E1)("q-list");return e.permisionComments.index?((0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",null,[(0,r.K2)(W,{dense:"",class:"list-comments"},{default:(0,r.Ql)((function(){return[e.permisionComments.create?((0,r.Wz)(),(0,r.Az)($,{key:0,class:"tw-my-3",style:{padding:"0px !important"}},{default:(0,r.Ql)((function(){return[(0,r.K2)(x,{top:"",avatar:""},{default:(0,r.Ql)((function(){return[(0,r.K2)(A,{size:"md",color:"grey-4",class:"tw-ml-2"},{default:(0,r.Ql)((function(){return[(0,r.QD)("img",{src:e.dataBase.avatar},null,8,i)]})),_:1})]})),_:1}),e.dataBase.active?((0,r.Wz)(),(0,r.Az)(x,{key:1,class:"bg-grey-1 shadow-1 tw-p-2"},{default:(0,r.Ql)((function(){return[e.loadingComment?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",l,[(0,r.K2)(S,{modelValue:e.dataBase.text,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dataBase.text=t}),config:e.editorConfig},null,8,["modelValue","config"]),(0,r.QD)("div",null,[(0,r.K2)(C,{field:e.files,class:"tw-py-2 tw-hidden"},null,8,["field"])]),(0,r.QD)("div",s,[(0,r.QD)("div",u,[(0,r.K2)(z,{loading:e.dataBase.loading,disable:""==e.dataBase.text,onClick:t[2]||(t[2]=function(t){return e.addComment()}),rounded:"",size:"md",label:e.i18n.tr("isite.cms.label.save"),color:"primary","no-caps":""},null,8,["loading","disable","label"]),(0,r.K2)(z,{flat:"",size:"md",onClick:t[3]||(t[3]=function(t){return e.cancelText()}),padding:"4px 4px",icon:"fa fa-close",color:"primary"})])])])),e.loadingComment?((0,r.Wz)(),(0,r.An)("div",c,[(0,r.K2)(O,{color:"primary",size:"3em",thickness:2,class:"tw-mx-auto"})])):(0,r.g1)("",!0)]})),_:1})):((0,r.Wz)(),(0,r.Az)(x,{key:0,class:"tw-mr-4 tw-cursor-pointer"},{default:(0,r.Ql)((function(){return[(0,r.K2)(N,{flat:"",bordered:""},{default:(0,r.Ql)((function(){return[(0,r.K2)(T,{class:"tw-py-2 tw-cursor-pointer text-grey-6",innerHTML:e.textPlaceholder,onClick:t[0]||(t[0]=function(t){return e.activeText()}),title:e.i18n.tr("isite.cms.label.edit")},null,8,["innerHTML","title"])]})),_:1})]})),_:1}))]})),_:1})):(0,r.g1)("",!0),e.permisionComments.index?((0,r.Wz)(),(0,r.Az)($,{key:1},{default:(0,r.Ql)((function(){return[e.loading?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(x,{key:0},{default:(0,r.Ql)((function(){return[(0,r.K2)(E,{class:"grey-4 timeline-ctn"},{default:(0,r.Ql)((function(){return[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(e.comments,(function(t,n,o){return(0,r.Wz)(),(0,r.Az)(L,{key:o,icon:t.icon?t.icon:"fa-regular fa-comment",color:t.color},{default:(0,r.Ql)((function(){return[(0,r.QD)("div",d,[(0,r.QD)("div",null,[t.userProfile?((0,r.Wz)(),(0,r.An)("h4",m,[Boolean(t.internal)?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("strong",f,(0,a.WA)(t.userProfile.fullName),1)),t.updatedAt||t.createdAt?((0,r.Wz)(),(0,r.An)("small",p,(0,a.WA)(e.formatDate(t.updatedAt||t.createdAt)),1)):(0,r.g1)("",!0)])):(0,r.g1)("",!0),t.active?((0,r.Wz)(),(0,r.Az)(S,{key:1,modelValue:t.comment,"onUpdate:modelValue":function(e){return t.comment=e}},null,8,["modelValue","onUpdate:modelValue"])):((0,r.Wz)(),(0,r.An)("div",h,[(0,r.QD)("div",{class:(0,a.WN)(["tw-flex tw-border tw-p-2",{"tw-cursor-pointer":!Boolean(t.internal)}])},[(0,r.QD)("div",g,[e.permisionComments.index?((0,r.Wz)(),(0,r.An)("div",{key:0,innerHTML:t.comment,onClick:function(n){return Boolean(t.internal)?null:e.activeEdit(t.id)}},null,8,y)):(0,r.g1)("",!0)]),(0,r.QD)("div",b,[e.permisionComments.destroy&&!Boolean(t.internal)?((0,r.Wz)(),(0,r.Az)(z,{key:0,flat:"",class:"tw-text-gray-500",icon:"fa-light fa-trash",size:"xs",onClick:function(n){return e.deleteComment(t.id)}},{default:(0,r.Ql)((function(){return[(0,r.K2)(Q,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,a.WA)(e.i18n.tr("isite.cms.label.delete")),1)]})),_:1})]})),_:2},1032,["onClick"])):(0,r.g1)("",!0)])],2)])),t.active?((0,r.Wz)(),(0,r.An)("div",v,[(0,r.QD)("div",w,[(0,r.K2)(z,{disable:""==t.comment||t.comment==t.textEdit,loading:t.loading,onClick:function(n){return e.updateComment("edit",t.id)},rounded:"",size:"md",label:e.i18n.tr("isite.cms.label.update"),color:"primary","no-caps":""},null,8,["disable","loading","onClick","label"]),(0,r.K2)(z,{flat:"",size:"md",onClick:function(n){return e.updateComment("cancel",t.id)},padding:"4px 4px",icon:"fa fa-close",color:"primary"},{default:(0,r.Ql)((function(){return[(0,r.K2)(Q,null,{default:(0,r.Ql)((function(){return[(0,r.mY)((0,a.WA)(e.i18n.tr("isite.cms.label.cancel")),1)]})),_:1})]})),_:2},1032,["onClick"])])])):(0,r.g1)("",!0)])])]})),_:2},1032,["icon","color"])})),128))]})),_:1})]})),_:1})),e.loading?((0,r.Wz)(),(0,r.An)("div",I,[(0,r.K2)(F,{visible:e.loading},null,8,["visible"])])):(0,r.g1)("",!0)]})),_:1})):(0,r.g1)("",!0)]})),_:1})])])):(0,r.g1)("",!0)}var k=n(63528),M="apiRoutes.qrequestable.comments",A="Modules\\Requestable\\Entities\\Requestable",x="icomments.comments",T={text:"",textEdit:"",active:!1,user:"",loading:!1,avatar:"https://dev-gestionhc.ozonohosting.com/modules/iprofile/img/default.jpg"},N=n(75836),S=n(20584),C=n(8932),z=n(91416),O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},O.apply(this,arguments)},$=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,l)}s((r=r.apply(e,t||[])).next())}))},Q=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(i=0)),i)try{if(n=1,r&&(a=2&l[0]?r["return"]:l[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(s){l=[6,s],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function L(e){var t=this,n=C.is.hasAccess,a=(0,z.c)(),o=(0,N.IL)({edit:!1,id:null,close:!1}),i=(0,N.IL)({value:null,type:"uploader",props:{title:C._s.trp("isite.cms.label.file"),gridColClass:"col-3 col-md-3 col-lg-4",maxFiles:3}}),l=(0,N.IL)(!1),s=(0,r.S6)((function(){return e.commentableType})),u=(0,N.IL)(O({},T)),c=(0,r.S6)((function(){return e.apiRoute})),d=(0,r.S6)((function(){return function(e){var t,n;return e.userProfile&&(null===(t=e.userProfile)||void 0===t?void 0:t.mainImage)?null===(n=null===e||void 0===e?void 0:e.userProfile)||void 0===n?void 0:n.mainImage:T.avatar}})),m=(0,N.IL)([]),f=(0,N.IL)(!1),p=(0,r.S6)((function(){return{create:n("".concat(e.permisionComments,".create")),edit:n("".concat(e.permisionComments,".edit")),index:n("".concat(e.permisionComments,".index")),destroy:n("".concat(e.permisionComments,".destroy"))}})),h=(0,N.IL)(O({},u.value)),g=(0,N.IL)(C._s.tr("requestable.cms.message.writeComment")),y=(0,N.IL)({height:100});function b(e){return e?(0,C.Gw)(e).format("DD MMM YYYY, h:mm a"):null}function v(){l.value=!0,h.value.active=!0,h.value.text="",setTimeout((function(){l.value=!1}),1e3),o.value.close=!0}function w(){var e=this;h.value.text.length>0?a.dialog({ok:"Si",message:C._s.tr("requestable.cms.message.undoComment"),cancel:"No",persistent:!0}).onOk((function(){return $(e,void 0,void 0,(function(){return Q(this,(function(e){return h.value.active=!1,h.value.text="",o.value.close=!1,[2]}))}))})).onCancel((function(){})):(h.value.active=!1,o.value.close=!1)}function I(e,t){try{var n=m.value.find((function(e){return e.id===t}));n&&("cancel"==e&&D(n),"edit"==e&&(n.comment!==n.textEdit?k(t,n):D(n)))}catch(r){console.log(r)}}function D(e){var t=this;e.comment!==e.textEdit?a.dialog({ok:C._s.tr("isite.cms.label.yes"),message:C._s.tr("requestable.cms.message.undoComment"),cancel:C._s.tr("isite.cms.label.no"),persistent:!0}).onOk((function(){return $(t,void 0,void 0,(function(){return Q(this,(function(t){return e.comment=e.textEdit,e.active=!1,o.value.close=!1,[2]}))}))})).onCancel((function(){})):(e.active=!1,o.value.close=!1)}function k(t,n){try{n.loading=!0;var r={approved:n.approved,commentableType:e.commentableType,commentableId:e.commentableId,comment:n.comment,userId:n.userId,is_internal:n.is_internal,options:n.options};S.c.update(c.value,t,O({},r)).then((function(e){var t=e.data;n.updatedAt=t.updatedAt,n.loading=!1,n.active=!1,n.edit=!1,C.Qb.info({message:C._s.tr("requestable.cms.message.updateComment")})})).catch((function(e){n.loading=!1,console.log(e),C.Qb.error({message:C._s.tr("requestable.cms.message.updateNoComment")})})),o.value.close=!1}catch(a){console.log(a),o.value.close=!1}}function M(e){try{o.value.id=e;var t=m.value.find((function(t){return t.id===e}));t&&(t.textEdit=t.comment,t.active=!0,o.value.edit=!0,o.value.close=!0)}catch(n){console.log(n),o.value.edit=!1,o.value.close=!1}}function A(){return $(this,void 0,Promise,(function(){var t,n,r;return Q(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),0===h.value.text.length?[2]:(t=C.is.state.quserAuth.userId,h.value.loading=!0,n={approved:!0,commentableType:e.commentableType,commentableId:e.commentableId,comment:h.value.text,userId:t,is_internal:!1,options:null},[4,S.c.create(c.value,n)]);case 1:return a.sent(),[4,L(e.commentableId)];case 2:return a.sent(),h.value=O({},u.value),C.Qb.info({message:C._s.tr("requestable.cms.message.savedComment")}),[3,4];case 3:return r=a.sent(),console.log(r),h.value.loading=!1,C.Qb.error({message:C._s.tr("requestable.cms.message.savedNoComment")}),[3,4];case 4:return[2]}}))}))}function x(e){return $(this,void 0,Promise,(function(){var t=this;return Q(this,(function(n){return a.dialog({ok:C._s.tr("isite.cms.label.delete"),message:C._s.tr("isite.cms.message.deleteRecord"),cancel:!0,persistent:!0}).onOk((function(){return $(t,void 0,void 0,(function(){return Q(this,(function(t){return S.c.delete(c.value,e).then((function(t){m.value=m.value.filter((function(t){return t.id!==e})),C.Qb.info({message:C._s.tr("isite.cms.message.recordDeleted")})})).catch((function(e){console.log(e),C.Qb.error({message:C._s.tr("isite.cms.message.recordNoDeleted")})})),[2]}))}))})).onCancel((function(){})),[2]}))}))}function L(e){return $(this,void 0,Promise,(function(){var t,n,r;return Q(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,E()];case 1:return t=a.sent(),f.value=!0,n={filter:{commentableType:s.value,commentableId:e},include:"userProfile"},S.c.get(c.value,n).then((function(e){var n=e.data;m.value=n.map((function(e){return O(O({},e),{active:!1,loading:!1,textEdit:"",icon:e.type?t.data[e.type].icon:"fa-regular fa-comment",color:e.type?t.data[e.type].color:"primary"})})),f.value=!1})).catch((function(e){f.value=!1,C.Qb.error({message:e}),console.log(e)})),[3,3];case 2:return r=a.sent(),console.log(r),[3,3];case 3:return[2]}}))}))}function E(){return $(this,void 0,void 0,(function(){var e,t;return Q(this,(function(n){switch(n.label){case 0:return e=C.i4.getInfoFromPermission(C.us.route.meta.permission),e?(t={refresh:!0,params:{filter:{configName:"".concat(e.module,".config.commentableConfig.requestable")}}},[4,S.c.index("apiRoutes.qsite.configs",t)]):[2];case 1:return[2,n.sent()]}}))}))}return L(e.commentableId),(0,r.GE)((function(){return $(t,void 0,void 0,(function(){return Q(this,(function(e){switch(e.label){case 0:return o.value.close?o.value.edit?[4,I("edit",o.value.id)]:[3,2]:[3,4];case 1:return e.sent(),[3,4];case 2:return[4,A()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))})),{permisionComments:p,dataBase:h,activeText:v,cancelText:w,updateComment:I,cancelComment:D,editComment:k,activeEdit:M,addComment:A,deleteComment:x,getCommentsList:L,textPlaceholder:g,editorConfig:y,formatDate:b,comments:m,loading:f,mainImage:d,loadingComment:l,files:i,i18n:C._s}}var E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)};const F=(0,r._M)({components:{CKEditor:k.c},props:{commentableId:{type:Number,required:!0},commentableType:{type:String,default:function(){return A}},apiRoute:{type:String,default:function(){return M}},permisionComments:{type:String,default:function(){return x}}},setup:function(e){return E({},L(e))}});var W=n(68716),Y=n(99588),j=n(84884),q=n(11032),R=n(11252),P=n(70608),U=n(71008),V=n(99140),_=n(21028),B=n(84492),K=n(97112),H=n(90111),G=n(95252),Z=n.n(G);const J=(0,W.c)(F,[["render",D]]),X=J;Z()(F,"components",{QList:Y.c,QItem:j.c,QItemSection:q.c,QAvatar:R.c,QCard:P.c,QCardSection:U.c,QBtn:V.c,QSpinner:_.c,QTimeline:B.c,QTimelineEntry:K.c,QTooltip:H.c})},68260:(e,t,n)=>{"use strict";n.d(t,{c:()=>M});var r=n(92444),a=n(74044);const o={id:"cropperContent",class:"row items-center justify-center"},i={id:"topActions",class:"row q-gutter-x-xs"},l={key:1,id:"bottomActions",class:"row q-gutter-x-sm"},s=["onClick"];function u(e,t,n,u,c,d){const m=(0,r.E1)("vue-cropper"),f=(0,r.E1)("q-btn"),p=(0,r.E1)("q-icon"),h=(0,r.E1)("q-input"),g=(0,r.E1)("q-popup-edit"),y=(0,r.E1)("inner-loading"),b=(0,r.E1)("q-dialog"),v=(0,r.iS)("close-popup");return(0,r.Wz)(),(0,r.Az)(b,{id:"modalCropperComponent",modelValue:c.show,"onUpdate:modelValue":t[1]||(t[1]=e=>c.show=e),persistent:"",maximized:""},{default:(0,r.Ql)((()=>[(0,r.QD)("div",o,[c.imgSrc?((0,r.Wz)(),(0,r.Az)(m,(0,r.Gu)({key:0},d.cropperProps,{ref:"cropper",onCrop:t[0]||(t[0]=e=>d.getCropperData())}),null,16)):(0,r.g1)("",!0),(0,r.QD)("div",i,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(d.cropperActions.top,((e,t)=>((0,r.Wz)(),(0,r.Az)(f,{key:t,round:"",flat:"",icon:e.icon,onClick:t=>e.action(),color:"white",size:"11px"},null,8,["icon","onClick"])))),128))]),c.information?((0,r.Wz)(),(0,r.An)("div",l,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(d.cropperActions.bottom,((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:"btnActionCropper row items-center text-center",onClick:t=>!e.popupName&&e.action()},[(0,r.K2)(p,{name:e.icon,class:"q-mr-xs"},null,8,["name"]),(0,r.mY)(" "+(0,a.WA)(e.value)+" ",1),e.popupName?((0,r.Wz)(),(0,r.Az)(g,{key:0,modelValue:c.cropperSize[e.popupName],"onUpdate:modelValue":t=>c.cropperSize[e.popupName]=t,"auto-save":""},{default:(0,r.Ql)((()=>[(0,r.K2)(h,{modelValue:c.cropperSize[e.popupName],"onUpdate:modelValue":[t=>c.cropperSize[e.popupName]=t,t=>e.action()],dense:"",autofocus:"",outlined:"",type:"number",label:e.label},{append:(0,r.Ql)((()=>[(0,r.wt)((0,r.K2)(p,{name:e.icon,class:"cursor-pointer"},null,8,["name"]),[[v]])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,r.g1)("",!0)],8,s)))),128))])):(0,r.g1)("",!0),(0,r.K2)(y,{visible:c.loading},null,8,["visible"])])])),_:1},8,["modelValue"])}var c=n(95476),d=n(48848),m=n(8932);const f={beforeUnmount(){m.kN.off("master.cropper.image")},mixins:[c.c],props:{props:{type:Object}},emits:["cropped","canceled"],components:{VueCropper:d.c},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,show:!1,scale:{y:1,x:1},information:!1,cropperSize:{width:100,height:100},imgSrc:!1,imgType:!1,callBack:!1,aspectRatio:NaN}},computed:{cropperProps(){return{ref:"cropper",autoCropArea:1,background:!1,toggleDragModeOnDblclick:!1,cropBoxResizable:!0,src:this.imgSrc,viewMode:1,containerStyle:{height:"92%",width:"96%","max-height":"92%","max-width":"96%"},aspectRatio:this.aspectRatio,...this.props||{}}},cropperActions(){return{top:[{icon:"fas fa-search-plus",action:()=>this.$refs.cropper.relativeZoom(.2)},{icon:"fas fa-search-minus",action:()=>this.$refs.cropper.relativeZoom(-.2)},{icon:"fas fa-undo-alt",action:()=>this.$refs.cropper.rotate(-45)},{icon:"fas fa-redo-alt",action:()=>this.$refs.cropper.rotate(45)},{icon:"fas fa-vector-square",action:()=>{let e=this.$refs.cropper.getImageData(),t=this.$refs.cropper.getData(),n=[1,.9,.8,.7],r=parseFloat((100*t.width/e.naturalWidth/100).toFixed(2)),a=n.indexOf(r)+1;a>n.length-1&&(a=0);let o={width:e.naturalWidth*n[a],height:e.naturalHeight*n[a]};this.$refs.cropper.setData({...o,x:(e.naturalWidth-o.width)/2,y:(e.naturalHeight-o.height)/2})}},{icon:"fas fa-arrows-alt-h",action:()=>{this.$refs.cropper.scaleY(-this.scale.y),this.scale.y=-this.scale.y}},{icon:"fas fa-arrows-alt-v",action:()=>{this.$refs.cropper.scaleX(-this.scale.x),this.scale.x=-this.scale.x}},{icon:"fas fa-reply",action:()=>this.$refs.cropper.reset()}],bottom:[{icon:"fas fa-ban",value:this.$tr("isite.cms.label.cancel"),action:()=>{this.cropImage(!1)}},{popupName:"width",icon:"fas fa-arrows-alt-h",value:`${this.information?this.information.cropper.width:""}px`,label:this.$tr("isite.cms.form.width"),action:()=>{this.$refs.cropper.setData({width:parseInt(this.cropperSize.width),height:parseInt(this.cropperSize.height)})}},{popupName:"height",icon:"fas fa-arrows-alt-v",value:`${this.information?this.information.cropper.height:""}px`,label:this.$tr("isite.cms.form.height"),action:()=>{this.$refs.cropper.setData({width:parseInt(this.cropperSize.width),height:parseInt(this.cropperSize.height)})}},{icon:"fas fa-save",value:this.$tr("isite.cms.label.save"),action:this.cropImage}]}}},methods:{init(){m.kN.on("master.cropper.image",(e=>{e.src&&this.loadFile(e.src),e.type&&(this.imgType=this.$clone(e.type)),e.callBack&&(this.callBack=e.callBack),e.ratio&&(this.aspectRatio=this.parseRatio(e.ratio))}))},loadFile(e){this.show=!0,setTimeout((()=>this.imgSrc=this.$clone(e)),500)},getCropperData(){this.information={cropper:this.$refs.cropper.getData(!0),container:this.$refs.cropper.getContainerData(),image:this.$refs.cropper.getImageData()},this.cropperSize={width:parseInt(this.information.cropper.width),height:parseInt(this.information.cropper.height)}},cropImage(e=!0){if(e){this.loading=!0;let e=this.$refs.cropper.getCroppedCanvas().toDataURL(this.imgType),t={base64:e,size:parseInt(.75*e.replace(/=/g,"").length),height:this.information.cropper.height,width:this.information.cropper.width};this.$emit("cropped",t),this.callBack&&this.callBack(t)}else this.$emit("canceled"),this.callBack&&this.callBack(null);this.show=!1,this.imgSrc=!1,this.callBack=!1,this.imgType=!1,this.loading=!1}}};var p=n(68716),h=n(30852),g=n(99140),y=n(58120),b=n(86742),v=n(20540),w=n(81020),I=n(95252),D=n.n(I);const k=(0,p.c)(f,[["render",u]]),M=k;D()(f,"components",{QDialog:h.c,QBtn:g.c,QIcon:y.c,QPopupEdit:b.c,QInput:v.c}),D()(f,"directives",{ClosePopup:w.c})},90940:(e,t,n)=>{"use strict";n.d(t,{c:()=>H});var r=n(92444),a=n(74044);const o={id:"quickCardComponent"},i={class:"box"},l={class:"box-title"},s={id:"contentQuickCard",class:"relative-position"},u={key:0,id:"itemsContent",class:"q-mb-md"},c={key:0,id:"itemsListV"},d={key:1,id:"itemsListH"},m={class:"row q-col-gutter-md"},f=["onClick"],p={class:"itemSide"},h={class:"itemInformation"},g={key:2,id:"itemsListRankin"},y={key:1,class:"text-center"},b={key:2},v={key:1},w={class:"tw-flex tw-items-end tw-justify-center tw-gap-6"},I={key:3},D={key:0,class:"tw-flex"},k={class:"text-center"},M=["innerHTML"],A={key:4},x={class:"text-center"};function T(e,t,n,T,N,S){const C=(0,r.E1)("q-icon"),z=(0,r.E1)("q-separator"),O=(0,r.E1)("q-item-section"),$=(0,r.E1)("q-item-label"),Q=(0,r.E1)("q-item"),L=(0,r.E1)("q-list"),E=(0,r.E1)("q-scroll-area"),F=(0,r.E1)("q-tooltip"),W=(0,r.E1)("q-chip"),Y=(0,r.E1)("q-linear-progress"),j=(0,r.E1)("not-result"),q=(0,r.E1)("QCharts"),R=(0,r.E1)("q-skeleton"),P=(0,r.E1)("q-circular-progress"),U=(0,r.E1)("q-btn");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[(0,r.QD)("div",l,[S.cardParams.icon?((0,r.Wz)(),(0,r.Az)(C,{key:0,name:S.cardParams.icon,class:"q-mr-sm"},null,8,["name"])):(0,r.g1)("",!0),(0,r.mY)(" "+(0,a.WA)(S.cardParams.title),1)]),(0,r.K2)(z,{class:"q-my-md"}),(0,r.QD)("div",s,[N.loading?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",u,["list-v"==S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",c,[(0,r.K2)(E,{style:{height:"260px",width:"100%"}},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(N.items,((e,t)=>((0,r.Wz)(),(0,r.Az)(L,{key:t},{default:(0,r.Ql)((()=>[(0,r.K2)(Q,{class:"q-px-none",onClick:t=>!!S.cardParams.itemAction&&S.cardParams.itemAction(e),clickable:!!S.cardParams.itemAction,"v-ripple":!!S.cardParams.itemAction},{default:(0,r.Ql)((()=>[(0,r.K2)(O,{class:"sideItem",side:""},{default:(0,r.Ql)((()=>[S.getInformation(e,"image")?((0,r.Wz)(),(0,r.An)("div",{key:0,class:"itemImage img-as-bg",style:(0,a.MN)(`background-image: url('${S.getInformation(e,"image")}')`)},null,4)):(0,r.g1)("",!0),!S.getInformation(e,"image")&&S.cardParams.icon?((0,r.Wz)(),(0,r.Az)(C,{key:1,class:"itemIcon",name:S.cardParams.icon},null,8,["name"])):(0,r.g1)("",!0)])),_:2},1024),(0,r.K2)(O,null,{default:(0,r.Ql)((()=>[(0,r.K2)($,{caption:"",class:"ellipsis"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(S.getInformation(e,"text1")),1)])),_:2},1024),(0,r.K2)($,{class:"ellipsis text-grey-8 q-my-xs"},{default:(0,r.Ql)((()=>[(0,r.QD)("b",null,(0,a.WA)(S.getInformation(e,"text2")),1)])),_:2},1024),(0,r.K2)($,{caption:"",lines:"2"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(S.getInformation(e,"text3")),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","clickable","v-ripple"])])),_:2},1024)))),128))])),_:1})])):(0,r.g1)("",!0),"list-h"==S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",d,[(0,r.QD)("div",m,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(N.items,((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t,class:(0,a.WN)("col-6 col-md-4 "+(S.cardParams.itemAction?"cursor-pointer":"")),onClick:t=>!!S.cardParams.itemAction&&S.cardParams.itemAction(e)},[(0,r.QD)("div",p,[S.getInformation(e,"image")?((0,r.Wz)(),(0,r.An)("div",{key:0,class:"itemImage img-as-bg",style:(0,a.MN)(`background-image: url('${S.getInformation(e,"image")}')`)},null,4)):(0,r.g1)("",!0),!S.getInformation(e,"image")&&S.cardParams.icon?((0,r.Wz)(),(0,r.Az)(C,{key:1,class:"itemIcon",name:S.cardParams.icon},null,8,["name"])):(0,r.g1)("",!0)]),(0,r.QD)("div",h,[(0,r.K2)($,{caption:"",class:"ellipsis q-my-sm"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(S.getInformation(e,"text1")),1)])),_:2},1024),(0,r.K2)($,{class:"ellipsis-2-lines text-grey-8"},{default:(0,r.Ql)((()=>[(0,r.QD)("b",null,(0,a.WA)(S.getInformation(e,"text2")),1),(0,r.K2)(F,null,{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(S.getInformation(e,"text2")),1)])),_:2},1024)])),_:2},1024)])],10,f)))),128))])])):(0,r.g1)("",!0),"list-ranking"==S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",g,[!N.loading&&N.items&&N.items.length?((0,r.Wz)(),(0,r.Az)(E,{key:0,style:{height:"350px"}},{default:(0,r.Ql)((()=>[(0,r.K2)(L,{bordered:"",separator:""},{default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(N.items,((e,t)=>((0,r.Wz)(),(0,r.Az)(Q,{key:t,class:"bg-grey-2"},{default:(0,r.Ql)((()=>[(0,r.K2)(O,null,{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(S.getInformation(e,"text1")),1)])),_:2},1024),(0,r.K2)(O,{side:""},{default:(0,r.Ql)((()=>[(0,r.K2)(W,{label:S.getInformation(e,"text2"),color:"white","text-color":"blue-grey",class:"text-weight-bold"},null,8,["label"])])),_:2},1024),S.getInformation(e,"percentage")?((0,r.Wz)(),(0,r.Az)(Y,{key:0,color:"green",value:S.getInformation(e,"percentage")},null,8,["value"])):(0,r.g1)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})):(0,r.g1)("",!0)])):(0,r.g1)("",!0)])),S.showNotResult?((0,r.Wz)(),(0,r.An)("div",y,[(0,r.K2)(j)])):(0,r.g1)("",!0),"chart"===S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",b,[N.loading||"object"!==typeof N.items?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.Az)(q,{key:0,chartsData:N.items},null,8,["chartsData"])),N.loading?((0,r.Wz)(),(0,r.An)("section",v,[(0,r.K2)(R,{type:"QChip",class:"tw-mb-4 tw-mx-auto"}),(0,r.QD)("div",w,[(0,r.K2)(R,{animated:"",type:"rect",height:"220px",width:"75px"}),(0,r.K2)(R,{animated:"",type:"rect",height:"280px",width:"75px"}),(0,r.K2)(R,{animated:"",type:"rect",height:"250px",width:"75px"}),(0,r.K2)(R,{animated:"",type:"rect",height:"310px",width:"75px"}),(0,r.K2)(R,{animated:"",type:"rect",height:"350px",width:"75px"})])])):(0,r.g1)("",!0)])):(0,r.g1)("",!0),"percentage"===S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",I,[N.loading||"object"!==typeof N.items?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("div",D,[(0,r.QD)("div",k,[(0,r.K2)(P,{"show-value":"","font-size":"40px",value:N.items.value,size:"200px",thickness:.22,"track-color":"grey-3",class:"q-ma-md tw-text-center colorPercentage"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,a.WA)(N.items.value||0)+"% ",1)])),_:1},8,["value"])]),(0,r.QD)("div",null,[(0,r.QD)("p",{class:"tw-font-semibold tw-py-5 tw-text-base tw-text-justify tw-break-normal",innerHTML:N.items.description},null,8,M)])]))])):(0,r.g1)("",!0),"custom"===S.cardParams.type?((0,r.Wz)(),(0,r.An)("div",A,[((0,r.Wz)(),(0,r.Az)((0,r.mk)(S.cardParams.component),{cardParams:{...S.cardParams},items:{...N.items},loading:N.loading},null,8,["cardParams","items","loading"]))])):(0,r.g1)("",!0),(0,r.QD)("div",x,[N.items.length&&S.cardParams.actionTo?((0,r.Wz)(),(0,r.Az)(U,{key:0,unelevated:"",label:e.$tr("isite.cms.label.showMore"),color:"primary",rounded:"",to:{name:S.cardParams.actionTo}},null,8,["label","to"])):(0,r.g1)("",!0)]),N.loading&&"chart"!==S.cardParams.type?((0,r.Wz)(),(0,r.Az)(R,{key:5,type:"rect",height:"350px",width:"100%",class:"tw-mt-4"})):(0,r.g1)("",!0)])])])}var N=n(93724),S=n(8932);const C={beforeUnmount(){S.kN.off("page.data.refresh")},props:{params:{type:Object,default:!1}},components:{QCharts:N.c},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,items:[],filterValues:!1}},computed:{showNotResult(){return"custom"!==this.cardParams.type&&("percentage"!==this.cardParams.type&&"chart"!==this.cardParams.type||"object"!==typeof this.items?!this.items.length&&!this.loading:0===Object.keys(this.items).length&&!this.loading)},cardParams(){let e={type:"list-v",...this.params,requestParams:{take:"list-v"==this.params.type?10:6,page:1,...this.params.requestParams||{}}};return this.params.filters&&this.filterValues&&(e.requestParams.filter={...e.requestParams.filter||{},...this.filterValues}),e}},methods:{async init(){this.params.filters?this.setFilters():this.getData(),S.kN.on("page.data.refresh",(()=>this.getData()))},getData(){return new Promise(((e,t)=>{this.loading=!0;let n={refresh:!0,params:this.cardParams.requestParams||{}};this.$crud.index(this.cardParams.apiRoute,n).then((t=>{this.items=t.data,this.loading=!1,e(t.data)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{this.loading=!1,e(t)}))}))}))},setFilters(){return new Promise((async e=>{await this.$filter.setFilter({name:this.$route.name,fields:this.$clone(this.params.filters||{}),callBack:()=>{this.filterValues=this.$clone(this.$filter.values),this.getData()}}),e(!0)}))},getInformation(e,t){let n=this.cardParams.information||{};return n[t]?n[t].format?n[t].field?n[t].format(e[n[t].field]):n[t].format(e):e[n[t].field]:null}}};var z=n(68716),O=n(58120),$=n(70880),Q=n(94380),L=n(99588),E=n(84884),F=n(11032),W=n(2992),Y=n(90111),j=n(84256),q=n(48488),R=n(39692),P=n(1452),U=n(99140),V=n(85220),_=n(95252),B=n.n(_);const K=(0,z.c)(C,[["render",T]]),H=K;B()(C,"components",{QIcon:O.c,QSeparator:$.c,QScrollArea:Q.c,QList:L.c,QItem:E.c,QItemSection:F.c,QItemLabel:W.c,QTooltip:Y.c,QChip:j.c,QLinearProgress:q.c,QSkeleton:R.cp,QCircularProgress:P.c,QBtn:U.c}),B()(C,"directives",{Ripple:V.c})},33264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var r=n(92444),a=n(74044);const o={id:"organizationFormPage"},i={key:0,id:"pageContent"},l={class:"box box-auto-height q-mb-md"},s={id:"adminHomeActivities",class:"col-12 q-mb-md"},u={class:"relative-position"},c={key:1,class:"box box-auto-height text-center"},d={class:"q-py-md"};function m(e,t,n,m,f,p){const h=(0,r.E1)("page-actions"),g=(0,r.E1)("activities"),y=(0,r.E1)("dynamic-form"),b=(0,r.E1)("inner-loading"),v=(0,r.E1)("q-icon");return(0,r.Wz)(),(0,r.An)("div",o,[p.organizationIdLocal?((0,r.Wz)(),(0,r.An)("div",i,[(0,r.QD)("div",l,[(0,r.K2)(h,{title:p.pageTitle,onRefresh:t[0]||(t[0]=e=>p.getData(!0))},null,8,["title"])]),(0,r.QD)("div",s,[(0,r.K2)(g,{"system-name":"admin_home_actions",view:"cardImage"})]),(0,r.QD)("div",u,[(0,r.K2)(y,{modelValue:f.form,"onUpdate:modelValue":t[1]||(t[1]=e=>f.form=e),blocks:p.blocks.blocks,"form-type":"grid",onSubmit:p.syncOrganization,"item-id":f.organization.id,"form-col-number":2},null,8,["modelValue","blocks","onSubmit","item-id"]),(0,r.K2)(b,{visible:f.loading},null,8,["visible"])])])):((0,r.Wz)(),(0,r.An)("div",c,[(0,r.QD)("div",d,[(0,r.K2)(v,{name:"fal fa-crown",size:"40px",color:"primary",class:"q-mb-md"}),(0,r.QD)("div",null,(0,a.WA)(e.$tr("isite.cms.messages.noOrganization"))+"...",1)])]))])}var f=n(2328);const p={beforeUnmount(){(0,f.c)().setValueLayoutList([])},props:{organizationId:{default:null}},components:{},watch:{"$route.params.id"(e){this.init()}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,organization:!1,crudData:!1,form:{}}},computed:{blocks(){const e=(0,f.c)().getLayoutsList(),t={blocks:[{title:this.$tr("isite.cms.crudMySite.information.title"),help:{title:this.$tr("isite.cms.crudMySite.information.title"),description:this.$tr("isite.cms.crudMySite.information.description")},name:"information",fields:{title:{value:null,type:"input",isTranslatable:!0,required:!0,props:{label:`${this.$tr("isite.cms.form.name")}*`}},categoryId:{value:null,type:"treeSelect",required:!0,props:{label:`${this.$tr("isite.cms.label.category")}*`},loadOptions:{apiRoute:"apiRoutes.qsite.categories"}},description:{value:null,type:"html",isTranslatable:!0,colClass:"col-12",required:!0,props:{label:`${this.$tr("isite.cms.label.description")}*`}}}},{title:this.$tr("isite.cms.crudMySite.socialNetworks.title"),help:{title:this.$tr("isite.cms.crudMySite.socialNetworks.title"),description:this.$tr("isite.cms.crudMySite.socialNetworks.description")},name:"socialNetworks",fields:{email:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.email")}`}},facebook:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.facebook")}`}},instagram:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.instagram")}`}},youtube:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.youtube")}`}},phones:{value:null,type:"select",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.form.phone"),useInput:!0,useChips:!0,multiple:!0,hideDropdownIcon:!0,newValueMode:"add-unique"}},whatsapp1:{name:"whatsapp1",label:"Whatsapp #1",isTranslatable:!0,multiple:!0,children:{calling_code:{value:null,type:"select",colClass:"col-6",props:{label:this.$tr("isite.cms.label.codeCountry")},loadOptions:{apiRoute:"apiRoutes.qlocations.countries",select:{label:"name",id:"callingCode"}}},number:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.label.whatsappNumber"),type:"number"}},message:{value:null,type:"input",colClass:"col-12",props:{label:this.$tr("isite.cms.label.defaultMessage")}},label:{value:null,type:"input",colClass:"col-6",props:{label:"Etiqueta"}},iconLabel:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.form.icon")}}}},whatsapp2:{name:"whatsapp2",label:"Whatsapp #2",isTranslatable:!0,multiple:!0,children:{calling_code:{value:null,type:"select",colClass:"col-6",props:{label:this.$tr("isite.cms.label.codeCountry")},loadOptions:{apiRoute:"apiRoutes.qlocations.countries",select:{label:"name",id:"callingCode"}}},number:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.label.whatsappNumber"),type:"number"}},message:{value:null,type:"input",colClass:"col-12",props:{label:this.$tr("isite.cms.label.defaultMessage")}},label:{value:null,type:"input",colClass:"col-6",props:{label:"Etiqueta"}},iconLabel:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.form.icon")}}}}}},{title:this.$tr("isite.cms.crudMySite.media.title"),help:{title:this.$tr("isite.cms.crudMySite.media.title"),description:this.$tr("isite.cms.crudMySite.media.description")},name:"media",fields:{logo:{name:"mediasSingle",value:[],type:"media",colClass:"col-12",props:{label:"Logo",zone:"mainimage",entity:"Modules\\Isite\\Entities\\Organization",entityId:null,accept:"images"}}}},{title:this.$tr("isite.cms.crudMySite.colors.title"),help:{title:this.$tr("isite.cms.crudMySite.colors.title"),description:this.$tr("isite.cms.crudMySite.colors.description")},name:"colors",fields:{colorPrimary:{value:"#420b0b",type:"inputColor",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.primaryColor")}*`}},colorSecondary:{value:"#8b2d2d",type:"inputColor",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.secondaryColor")}*`}}}},{title:this.$tr("isite.cms.crudMySite.schedule.title"),help:{title:this.$tr("isite.cms.crudMySite.schedule.title"),description:this.$tr("isite.cms.crudMySite.schedule.description")},name:"schedule",fields:{schedule:{value:null,type:"schedulable",colClass:"col-12",props:{label:`${this.$tr("isite.cms.label.schedule")}*`}}}},{title:this.$tr("isite.cms.crudMySite.meta.title"),help:{title:this.$tr("isite.cms.crudMySite.meta.title"),description:this.$tr("isite.cms.crudMySite.meta.description")},name:"meta",fields:{tags:{value:[],type:"select",colClass:"col-12",props:{label:this.$trp("isite.cms.form.tag"),useInput:!0,useChips:!0,multiple:!0,hideDropdownIcon:!0,inputDebounce:"0",newValueMode:"add-unique"}}}},{...e,name:"layouts",title:this.$tr("isite.cms.crudMySite.layouts.title"),help:{title:this.$tr("isite.cms.crudMySite.layouts.title"),description:this.$tr("isite.cms.crudMySite.layouts.description")}},{title:this.$tr("isite.cms.crudMySite.location.title"),help:{title:this.$tr("isite.cms.crudMySite.location.title"),description:this.$tr("isite.cms.crudMySite.location.description")},name:"location",fields:{provinceId:{value:null,type:"select",isTranslatable:!0,colClass:"col-12",props:{label:this.$tr("isite.cms.form.province")},loadOptions:{apiRoute:"apiRoutes.qlocations.provinces",select:{label:"name",id:"id"},requestParams:{filter:{allTranslations:!0,country:48}},filterByQuery:!0}},cityId:{value:null,type:"select",isTranslatable:!0,colClass:"col-12",props:{label:this.$tr("isite.cms.form.city"),readonly:!1},loadOptions:{apiRoute:"apiRoutes.qlocations.cities",select:{label:"name",id:"id"},requestParams:{filter:{allTranslations:!0,country:48}},filterByQuery:!0}},address:{value:null,type:"input",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.form.address")}},map:{value:null,type:"positionMarkerMap",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.label.map")}}}}]};return t},pageTitle(){return this.$tr(this.$route.meta.title)},organizationIdLocal(){return this.$clone(this.organizationId||this.$route.params.id)}},methods:{init(){this.getData(!0)},getData(e=!1){return new Promise((async t=>{this.loading=!0;try{await Promise.all([this.getOrganizationData(e),(0,f.c)().getLayouts()]),await this.getSubscriptionData(!0,this.organization.userId)}catch(n){this.$alert.error({message:this.$tr("isite.cms.message.errorRequest")})}this.loading=!1}))},getOrganizationData(e=!1){return new Promise(((t,n)=>{if(!this.organizationIdLocal)return t(null);let r={refresh:e,params:{include:"fields,schedule.workTimes,tags",filter:{allTranslations:!0}}};this.$crud.show("apiRoutes.qsite.organizations",this.organizationIdLocal,r).then((e=>{this.organization=this.$clone(e.data),this.form=this.$clone(e.data),(0,f.c)().setSelectedLayout(e.data.layoutId),t(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{n(e)}))}))}))},syncOrganization(){return new Promise(((e,t)=>{const n=(0,f.c)().getSelectedLayout();n&&(this.form.layoutId=n,(0,f.c)().setSelectedLayout(n)),this.loading=!0,this.$crud.update("apiRoutes.qsite.organizations",this.organization.id,this.form).then((e=>{this.$alert.info({message:this.$tr("isite.cms.message.recordUpdated")}),this.loading=!1,(0,f.c)().setSelectedFile()})).catch((e=>{this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated")}),this.loading=!1}))}))},getSubscriptionData(e=!1,t){return new Promise(((n,r)=>{if(!t)return n(null);let a={refresh:e,params:{include:"plan",filter:{field:"entity_id",entity:"Modules\\User\\Entities\\Sentinel\\User"}}};this.$crud.show("apiRoutes.qplan.subscriptions",t,a).then((e=>{const t=e?.data?.plan?.options?.layouts??[];this.filteredLayouts(t),n(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{r(e)}))}))}))},filteredLayouts(e=[]){const t=(0,f.c)(),n=t.getAllLayouts(),r=n.filter((t=>e.includes(t.systemName))),a=t.mapLayoutsList(r);t.setValueLayoutList(a)}}};var h=n(68716),g=n(58120),y=n(95252),b=n.n(y);const v=(0,h.c)(p,[["render",m]]),w=v;b()(p,"components",{QIcon:g.c})},68514:(e,t,n)=>{"use strict";n.d(t,{c:()=>k});var r=n(92444),a=n(74044);const o={key:0,class:"row relative-position"},i={class:"col-12 q-mb-md"},l={key:0,class:"col-7 q-gutter-y-md"},s={key:1,class:"col-5 q-gutter-y-md"},u={class:"input-title"},c={class:"col-12 text-right"};function d(e,t,n,d,m,f){const p=(0,r.E1)("locales"),h=(0,r.E1)("q-input"),g=(0,r.E1)("q-editor"),y=(0,r.E1)("q-select"),b=(0,r.E1)("mediaForm"),v=(0,r.E1)("q-btn"),w=(0,r.E1)("q-form"),I=(0,r.E1)("inner-loading");return m.success?((0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[(0,r.K2)(p,{modelValue:m.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>m.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,r.K2)(w,{onSubmit:t[12]||(t[12]=e=>m.itemId?f.updateItem():f.createItem()),ref:"formContent",class:"row q-col-gutter-x-md full-width",autocomplete:"off",onValidationError:t[13]||(t[13]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,r.Ql)((()=>[m.locale.success?((0,r.Wz)(),(0,r.An)("div",l,[(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.title")} (${m.locale.language}) `,type:"text",modelValue:m.locale.formTemplate.title,"onUpdate:modelValue":t[1]||(t[1]=e=>m.locale.formTemplate.title=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.caption")} (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.caption,"onUpdate:modelValue":t[2]||(t[2]=e=>m.locale.formTemplate.caption=e)},null,8,["label","modelValue"]),(0,r.K2)(h,{label:"URI ("+m.locale.language+")",outlined:"",dense:"",type:"text",modelValue:m.locale.formTemplate.uri,"onUpdate:modelValue":t[3]||(t[3]=e=>m.locale.formTemplate.uri=e)},null,8,["label","modelValue"]),(0,r.K2)(h,{label:"URL ("+m.locale.language+")",type:"text",modelValue:m.locale.formTemplate.url,"onUpdate:modelValue":t[4]||(t[4]=e=>m.locale.formTemplate.url=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,r.K2)(h,{label:`${e.$tr("isite.cms.form.image")} URL (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.externalImageUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>m.locale.formTemplate.externalImageUrl=e)},null,8,["label","modelValue"]),(0,r.K2)(g,{label:`${e.$tr("isite.cms.form.description")} (${m.locale.language}) `,modelValue:m.locale.formTemplate.customHtml,"onUpdate:modelValue":t[6]||(t[6]=e=>m.locale.formTemplate.customHtml=e),style:{width:"100%"}},null,8,["label","modelValue"])])):(0,r.g1)("",!0),m.locale.success?((0,r.Wz)(),(0,r.An)("div",s,[f.canManageRecordMaster?((0,r.Wz)(),(0,r.Az)(y,{key:0,modelValue:m.locale.formTemplate.options.masterRecord,"onUpdate:modelValue":t[7]||(t[7]=e=>m.locale.formTemplate.options.masterRecord=e),label:e.$tr("isite.cms.form.masterRecord"),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:this.$tr("isite.cms.label.yes"),value:1},{label:this.$tr("isite.cms.label.no"),value:0}]},null,8,["modelValue","label","options"])):(0,r.g1)("",!0),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.status")} (${m.locale.language})`,modelValue:m.locale.formTemplate.active,"onUpdate:modelValue":t[8]||(t[8]=e=>m.locale.formTemplate.active=e),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:e.$tr("isite.cms.label.enabled"),value:!0},{label:e.$tr("isite.cms.label.disabled"),value:!1}]},null,8,["label","modelValue","options"]),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.option")}`,modelValue:m.locale.formTemplate.target,"onUpdate:modelValue":t[9]||(t[9]=e=>m.locale.formTemplate.target=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"_self",label:"Same tab"},{value:"_blank",label:"New tab"}]},null,8,["label","modelValue"]),(0,r.K2)(y,{label:`${e.$tr("isite.cms.form.type")}`,modelValue:m.locale.formTemplate.type,"onUpdate:modelValue":t[10]||(t[10]=e=>m.locale.formTemplate.type=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"auto",label:"Auto"},{value:"360",label:"360"},{value:"video",label:"Video"},{value:"image",label:"Image"}]},null,8,["label","modelValue"]),(0,r.QD)("div",u,(0,a.WA)(`${e.$tr("isite.cms.form.image")}`),1),((0,r.Wz)(),(0,r.Az)(b,{entity:"Modules\\Slider\\Entities\\Slide","entity-id":m.itemId?m.itemId:"",modelValue:m.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[11]||(t[11]=e=>m.locale.formTemplate.mediasSingle=e),zone:"slideimage",key:m.mediaKey},null,8,["entity-id","modelValue"]))])):(0,r.g1)("",!0),(0,r.QD)("div",c,[m.itemId?((0,r.Wz)(),(0,r.Az)(v,{key:0,color:"positive",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit",rounded:""},null,8,["loading","label"])):((0,r.Wz)(),(0,r.Az)(v,{key:1,color:"positive",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"]))])])),_:1},512),(0,r.K2)(I,{visible:m.loading},null,8,["visible"])])):(0,r.g1)("",!0)}n(23816);var m=n(4608);const f={components:{mediaForm:m.c},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((()=>{this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,mediaKey:this.$uid()}},computed:{dataLocale(){return{fields:{sliderId:this.$route.params.sliderId,target:null,type:"auto",mediasSingle:{},externalImageUrl:"",options:{masterRecord:0}},fieldsTranslatable:{title:"",caption:"",active:!0,url:"",uri:"",customHtml:""}}},canManageRecordMaster(){let e=!0;return this.$route.params.sliderId.id&&!this.$hasAccess("isite.master.records.edit")&&(e=!1),this.$route.params.sliderId.id||this.$hasAccess("isite.master.records.create")||(e=!1),e}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const n=this.$clone(this.itemId);if(n){let r="apiRoutes.qslider.slides",a={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(r,n,a).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qslider.slides";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$router.push({name:"qslider.admin.sliders.show",params:{id:this.$route.params.sliderId}}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated"),pos:"bottom"})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qslider.slides";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let n=e[t];null!=n&&void 0!=n||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var p=n(68716),h=n(14288),g=n(20540),y=n(85664),b=n(36008),v=n(99140),w=n(95252),I=n.n(w);const D=(0,p.c)(f,[["render",d]]),k=D;I()(f,"components",{QForm:h.c,QInput:g.c,QEditor:y.c,QSelect:b.c,QBtn:v.c})},6324:(e,t,n)=>{e.exports=n.p+"img/favicon.004b103b.ico"},71196:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMjkiIHZpZXdCb3g9IjAgMCAyMyAyOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iNS40NTIxNSIgeT0iNi4wNzYxNyIgd2lkdGg9IjEwLjkxNjMiIGhlaWdodD0iMTAuODY1MiIgdHJhbnNmb3JtPSJyb3RhdGUoMC4wNzM2NDQgNS40NTIxNSA2LjA3NjE3KSIgZmlsbD0iI0Q5RDlEOSIvPgo8cGF0aCBkPSJNMTEuNTQxOCAyNy44MjM5QzExLjIyNzcgMjguMDc4IDEwLjc3MTkgMjguMDc3NCAxMC40NTg0IDI3LjgyMjVDMy41MjExMSAyMi4xODEyIDAuMDE0NzEwMiAxNi40NzcxIDAuMDIyMTI4MSAxMC43MDU5QzAuMDI5NzI3OCA0Ljc5MzE4IDQuOTYwNzUgMC4wMDYzMzAwOCAxMS4wMzU5IDAuMDE0MTM4NkMxNy4xMTEgMC4wMjE5NDcyIDIyLjAyOTcgNC44MjE0NiAyMi4wMjIxIDEwLjczNDJDMjIuMDE0NyAxNi41MDU0IDE4LjQ5MzYgMjIuMjAwNCAxMS41NDE4IDI3LjgyMzlaTTExLjAyMyAxMC4wMDUyTDguOTA4OTggOC45NzMwMkw4LjkxMDk3IDcuNDIzMThDOC45MTE1NSA2Ljk2ODM2IDguNTMzMTkgNi41OTkxNiA4LjA2NTg4IDYuNTk4NTZDNy41OTg1NiA2LjU5Nzk2IDcuMjE5MjUgNi45NjYxOCA3LjIxODY2IDcuNDIxTDcuMjE2MDIgOS40Nzk4M0M3LjIxNTYyIDkuNzkxNzUgNy4zOTYzMiAxMC4wNzcyIDcuNjgyODEgMTAuMjE3TDE0LjQ0NzggMTMuNTE5OEMxNC44NjU1IDEzLjcyMzggMTUuMzc0IDEzLjU1OTUgMTUuNTgzNSAxMy4xNTNDMTUuNzkzIDEyLjc0NjUgMTUuNjI0MiAxMi4yNTE2IDE1LjIwNjUgMTIuMDQ3NkwxMi43MTQzIDEwLjgzMDlMMTIuNzE4NyA3LjQyODA3QzEyLjcyMDEgNi4zMzAwMyAxMS4wMjc4IDYuMzI3ODYgMTEuMDI2NCA3LjQyNTlMMTEuMDIzIDEwLjAwNTJaTTcuMjA3MDIgMTYuNDc5OEwxNC44MjI0IDE2LjQ4OTZDMTUuMjg5NyAxNi40OTAyIDE1LjY2OSAxNi4xMjIgMTUuNjY5NiAxNS42NjcyQzE1LjY3MDIgMTUuMjEyMyAxNS4yOTE4IDE0Ljg0MzIgMTQuODI0NSAxNC44NDI2TDcuMjA5MTQgMTQuODMyOEM2Ljc0MTgyIDE0LjgzMjIgNi4zNjI1MSAxNS4yMDA0IDYuMzYxOTMgMTUuNjU1MkM2LjM2MTM0IDE2LjExIDYuNzM5NyAxNi40NzkyIDcuMjA3MDIgMTYuNDc5OFoiIGZpbGw9IiNFNDNBM0EiLz4KPC9zdmc+"},43757:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMjkiIHZpZXdCb3g9IjAgMCAyMyAyOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iNi4wMTI5NCIgeT0iNyIgd2lkdGg9IjExIiBoZWlnaHQ9IjEwIiB0cmFuc2Zvcm09InJvdGF0ZSgwLjA3MzY0NDIgNi4wMTI5NCA3KSIgZmlsbD0iI0Q5RDlEOSIvPgo8cGF0aCBkPSJNMTEuNTQxOCAyNy44MjM5QzExLjIyNzcgMjguMDc4IDEwLjc3MTkgMjguMDc3NCAxMC40NTg0IDI3LjgyMjVDMy41MjExMSAyMi4xODEyIDAuMDE0NzEwMSAxNi40NzcxIDAuMDIyMTI4IDEwLjcwNTlDMC4wMjk3Mjc4IDQuNzkzMTggNC45NjA3NSAwLjAwNjMzMDEgMTEuMDM1OSAwLjAxNDEzODdDMTcuMTExIDAuMDIxOTQ3MiAyMi4wMjk3IDQuODIxNDYgMjIuMDIyMSAxMC43MzQyQzIyLjAxNDcgMTYuNTA1NCAxOC40OTM2IDIyLjIwMDQgMTEuNTQxOCAyNy44MjM5Wk05LjgxODEyIDEzLjQ0NzRMMTUuNzQ2NSA5LjMzNzM4QzE2LjEyNzEgOS4wNzM1MSAxNi4yMTU4IDguNTU5MyAxNS45NDQ3IDguMTg4ODVDMTUuNjczNSA3LjgxODM5IDE1LjE0NTIgNy43MzIgMTQuNzY0NiA3Ljk5NTg3TDEyLjIxNTMgOS43NjMyMUw5LjI4ODIxIDguMzM0MTNDOC44NzA0OSA4LjEzMDE4IDguMzYyMDIgOC4yOTQ0NCA4LjE1MjUxIDguNzAwOThDNy45NDI5OSA5LjEwNzUxIDguMTExNzggOS42MDI0MSA4LjUyOTUgOS44MDYzNUwxMC42NTU4IDEwLjg0NDRMOS4yMTMwNCAxMS44NDQ2TDcuNTI4MDggMTEuMTg2MkM3LjA5NDQgMTEuMDE2NyA2LjYwMTcgMTEuMjIxNSA2LjQyNzYgMTEuNjQzNUM2LjI1MzUgMTIuMDY1NiA2LjQ2MzkzIDEyLjU0NTIgNi44OTc2MSAxMi43MTQ2TDkuMDExOTMgMTMuNTQwOUM5LjI3OTQ4IDEzLjY0NTQgOS41ODMzMSAxMy42MTAyIDkuODE4MTIgMTMuNDQ3NFpNNy4yMDcwMiAxNi40Nzk4TDE0LjgyMjQgMTYuNDg5NkMxNS4yODk3IDE2LjQ5MDIgMTUuNjY5IDE2LjEyMiAxNS42Njk2IDE1LjY2NzJDMTUuNjcwMiAxNS4yMTIzIDE1LjI5MTggMTQuODQzMiAxNC44MjQ1IDE0Ljg0MjVMNy4yMDkxNCAxNC44MzI4QzYuNzQxODIgMTQuODMyMiA2LjM2MjUxIDE1LjIwMDQgNi4zNjE5MyAxNS42NTUyQzYuMzYxMzQgMTYuMTEgNi43Mzk3IDE2LjQ3OTIgNy4yMDcwMiAxNi40Nzk4WiIgZmlsbD0iI0U0M0EzQSIvPgo8L3N2Zz4="},88524:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iMTAiIGZpbGw9IiMxRjI5NEYiLz4KPHBhdGggZD0iTTkuOTkyNTggMTUuNjI1QzkuMzEyNTggMTUuNjI1IDguNjY1MDggMTUuNTA1IDguMDUwMDggMTUuMjY1QzcuNDM1MDggMTUuMDIgNi44OTAwOCAxNC42NiA2LjQxNTA4IDE0LjE4NUM1Ljk0NTA4IDEzLjcxIDUuNTcyNTggMTMuMTIyNSA1LjI5NzU4IDEyLjQyMjVDNS4wMjc1OCAxMS43MjI1IDQuODkyNTggMTAuOTE1IDQuODkyNTggMTBDNC44OTI1OCA4LjgwNSA1LjEyMDA4IDcuNzkgNS41NzUwOCA2Ljk1NUM2LjAzNTA4IDYuMTE1IDYuNjUwMDggNS40NzUgNy40MjAwOCA1LjAzNUM4LjE5NTA4IDQuNTk1IDkuMDUyNTggNC4zNzUgOS45OTI1OCA0LjM3NUMxMS4zODI2IDQuMzc1IDEyLjQ3NTEgNC42OTc1IDEzLjI3MDEgNS4zNDI1QzE0LjA2NTEgNS45ODc1IDE0LjU5NzYgNi45IDE0Ljg2NzYgOC4wOEwxMi43ODI2IDguMzhDMTIuNTg3NiA3Ljc1IDEyLjI2NzYgNy4yNDc1IDExLjgyMjYgNi44NzI1QzExLjM4MjYgNi40OTI1IDEwLjgxNzYgNi4zIDEwLjEyNzYgNi4yOTVDOS40NDI1OCA2LjI4NSA4Ljg3MjU4IDYuNDMyNSA4LjQxNzU4IDYuNzM3NUM3Ljk2MjU4IDcuMDQyNSA3LjYyMDA4IDcuNDc1IDcuMzkwMDggOC4wMzVDNy4xNjUwOCA4LjU5NSA3LjA1MjU4IDkuMjUgNy4wNTI1OCAxMEM3LjA1MjU4IDEwLjc1IDcuMTY1MDggMTEuNCA3LjM5MDA4IDExLjk1QzcuNjIwMDggMTIuNSA3Ljk2MjU4IDEyLjkyNzUgOC40MTc1OCAxMy4yMzI1QzguODcyNTggMTMuNTM3NSA5LjQ0MjU4IDEzLjY5NSAxMC4xMjc2IDEzLjcwNUMxMC41OTI2IDEzLjcxNSAxMS4wMTI2IDEzLjYzNSAxMS4zODc2IDEzLjQ2NUMxMS43Njc2IDEzLjI5NSAxMi4wODc2IDEzLjAyNzUgMTIuMzQ3NiAxMi42NjI1QzEyLjYwNzYgMTIuMjk3NSAxMi43OTI2IDExLjgzIDEyLjkwMjYgMTEuMjZIMTEuMTkyNlY5LjY4NUgxNS4wNzc2QzE1LjA4NzYgOS43NSAxNS4wOTUxIDkuODY1IDE1LjEwMDEgMTAuMDNDMTUuMTA1MSAxMC4xOTUgMTUuMTA3NiAxMC4yOSAxNS4xMDc2IDEwLjMxNUMxNS4xMDc2IDExLjM1IDE0Ljg5NzYgMTIuMjY3NSAxNC40Nzc2IDEzLjA2NzVDMTQuMDU3NiAxMy44Njc1IDEzLjQ2NTEgMTQuNDk1IDEyLjcwMDEgMTQuOTVDMTEuOTM1MSAxNS40IDExLjAzMjYgMTUuNjI1IDkuOTkyNTggMTUuNjI1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="},80092:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1IiByeD0iNy41IiBmaWxsPSIjMUYyOTRGIi8+CjxwYXRoIGQ9Ik03LjQ5NDM5IDExLjYyNUM2Ljk5NTczIDExLjYyNSA2LjUyMDg5IDExLjUzNyA2LjA2OTg5IDExLjM2MUM1LjYxODg5IDExLjE4MTMgNS4yMTkyMyAxMC45MTczIDQuODcwODkgMTAuNTY5QzQuNTI2MjMgMTAuMjIwNyA0LjI1MzA2IDkuNzg5ODMgNC4wNTEzOSA5LjI3NjVDMy44NTMzOSA4Ljc2MzE3IDMuNzU0MzkgOC4xNzEgMy43NTQzOSA3LjVDMy43NTQzOSA2LjYyMzY3IDMuOTIxMjMgNS44NzkzMyA0LjI1NDg5IDUuMjY3QzQuNTkyMjMgNC42NTEgNS4wNDMyMyA0LjE4MTY3IDUuNjA3ODkgMy44NTlDNi4xNzYyMyAzLjUzNjMzIDYuODA1MDYgMy4zNzUgNy40OTQzOSAzLjM3NUM4LjUxMzczIDMuMzc1IDkuMzE0ODkgMy42MTE1IDkuODk3ODkgNC4wODQ1QzEwLjQ4MDkgNC41NTc1IDEwLjg3MTQgNS4yMjY2NyAxMS4wNjk0IDYuMDkyTDkuNTQwMzkgNi4zMTJDOS4zOTczOSA1Ljg1IDkuMTYyNzMgNS40ODE1IDguODM2MzkgNS4yMDY1QzguNTEzNzMgNC45Mjc4MyA4LjA5OTM5IDQuNzg2NjcgNy41OTMzOSA0Ljc4M0M3LjA5MTA2IDQuNzc1NjcgNi42NzMwNiA0Ljg4MzgzIDYuMzM5MzkgNS4xMDc1QzYuMDA1NzMgNS4zMzExNyA1Ljc1NDU2IDUuNjQ4MzMgNS41ODU4OSA2LjA1OUM1LjQyMDg5IDYuNDY5NjcgNS4zMzgzOSA2Ljk1IDUuMzM4MzkgNy41QzUuMzM4MzkgOC4wNSA1LjQyMDg5IDguNTI2NjcgNS41ODU4OSA4LjkzQzUuNzU0NTYgOS4zMzMzMyA2LjAwNTczIDkuNjQ2ODMgNi4zMzkzOSA5Ljg3MDVDNi42NzMwNiAxMC4wOTQyIDcuMDkxMDYgMTAuMjA5NyA3LjU5MzM5IDEwLjIxN0M3LjkzNDM5IDEwLjIyNDMgOC4yNDIzOSAxMC4xNjU3IDguNTE3NCAxMC4wNDFDOC43OTYwNiA5LjkxNjMzIDkuMDMwNzMgOS43MjAxNyA5LjIyMTM5IDkuNDUyNUM5LjQxMjA2IDkuMTg0ODMgOS41NDc3MyA4Ljg0MiA5LjYyODQgOC40MjRIOC4zNzQzOVY3LjI2OUgxMS4yMjM0QzExLjIzMDcgNy4zMTY2NyAxMS4yMzYyIDcuNDAxIDExLjIzOTkgNy41MjJDMTEuMjQzNiA3LjY0MyAxMS4yNDU0IDcuNzEyNjcgMTEuMjQ1NCA3LjczMUMxMS4yNDU0IDguNDkgMTEuMDkxNCA5LjE2MjgzIDEwLjc4MzQgOS43NDk1QzEwLjQ3NTQgMTAuMzM2MiAxMC4wNDA5IDEwLjc5NjMgOS40Nzk5IDExLjEzQzguOTE4OSAxMS40NiA4LjI1NzA2IDExLjYyNSA3LjQ5NDM5IDExLjYyNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="},34504:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iMTAiIGZpbGw9IiMxRjI5NEYiLz4KPHBhdGggZD0iTTUuODc1IDE1LjM5OTZWNC41OTk2MUgxMC40MzVDMTAuNTQgNC41OTk2MSAxMC42OCA0LjYwNDYxIDEwLjg1NSA0LjYxNDYxQzExLjAzNSA0LjYxOTYxIDExLjE5NSA0LjYzNDYxIDExLjMzNSA0LjY1OTYxQzExLjk4IDQuNzU5NjEgMTIuNTA3NSA0Ljk3MjExIDEyLjkxNzUgNS4yOTcxMUMxMy4zMzI1IDUuNjIyMTEgMTMuNjM3NSA2LjAzMjExIDEzLjgzMjUgNi41MjcxMUMxNC4wMjc1IDcuMDE3MTEgMTQuMTI1IDcuNTY0NjEgMTQuMTI1IDguMTY5NjFDMTQuMTI1IDguNzc0NjEgMTQuMDI1IDkuMzI0NjEgMTMuODI1IDkuODE5NjFDMTMuNjMgMTAuMzA5NiAxMy4zMjUgMTAuNzE3MSAxMi45MSAxMS4wNDIxQzEyLjUgMTEuMzY3MSAxMS45NzUgMTEuNTc5NiAxMS4zMzUgMTEuNjc5NkMxMS4xOTUgMTEuNjk5NiAxMS4wMzUgMTEuNzE0NiAxMC44NTUgMTEuNzI0NkMxMC42NzUgMTEuNzM0NiAxMC41MzUgMTEuNzM5NiAxMC40MzUgMTEuNzM5Nkg3LjkxNVYxNS4zOTk2SDUuODc1Wk03LjkxNSA5LjgzNDYxSDEwLjM0NUMxMC40NSA5LjgzNDYxIDEwLjU2NSA5LjgyOTYxIDEwLjY5IDkuODE5NjFDMTAuODE1IDkuODA5NjEgMTAuOTMgOS43ODk2MSAxMS4wMzUgOS43NTk2MUMxMS4zMSA5LjY4NDYxIDExLjUyMjUgOS41NTk2MSAxMS42NzI1IDkuMzg0NjFDMTEuODIyNSA5LjIwNDYxIDExLjkyNSA5LjAwNzExIDExLjk4IDguNzkyMTFDMTIuMDQgOC41NzIxMSAxMi4wNyA4LjM2NDYxIDEyLjA3IDguMTY5NjFDMTIuMDcgNy45NzQ2MSAxMi4wNCA3Ljc2OTYxIDExLjk4IDcuNTU0NjFDMTEuOTI1IDcuMzM0NjEgMTEuODIyNSA3LjEzNzExIDExLjY3MjUgNi45NjIxMUMxMS41MjI1IDYuNzgyMTEgMTEuMzEgNi42NTQ2MSAxMS4wMzUgNi41Nzk2MUMxMC45MyA2LjU0OTYxIDEwLjgxNSA2LjUyOTYxIDEwLjY5IDYuNTE5NjFDMTAuNTY1IDYuNTA5NjEgMTAuNDUgNi41MDQ2MSAxMC4zNDUgNi41MDQ2MUg3LjkxNVY5LjgzNDYxWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="},63984:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1IiByeD0iNy41IiBmaWxsPSIjMUYyOTRGIi8+CjxwYXRoIGQ9Ik00LjQ3NTEgMTEuNDZWMy41NDAwNEg3LjgxOTFDNy44OTYxIDMuNTQwMDQgNy45OTg3NiAzLjU0MzcxIDguMTI3MSAzLjU1MTA0QzguMjU5MSAzLjU1NDcxIDguMzc2NDMgMy41NjU3MSA4LjQ3OTEgMy41ODQwNEM4Ljk1MjEgMy42NTczNyA5LjMzODkzIDMuODEzMjEgOS42Mzk2IDQuMDUxNTRDOS45NDM5MyA0LjI4OTg3IDEwLjE2NzYgNC41OTA1NCAxMC4zMTA2IDQuOTUzNTRDMTAuNDUzNiA1LjMxMjg3IDEwLjUyNTEgNS43MTQzNyAxMC41MjUxIDYuMTU4MDRDMTAuNTI1MSA2LjYwMTcxIDEwLjQ1MTggNy4wMDUwNCAxMC4zMDUxIDcuMzY4MDRDMTAuMTYyMSA3LjcyNzM3IDkuOTM4NDMgOC4wMjYyMSA5LjYzNDEgOC4yNjQ1NEM5LjMzMzQzIDguNTAyODcgOC45NDg0MyA4LjY1ODcxIDguNDc5MSA4LjczMjA0QzguMzc2NDMgOC43NDY3MSA4LjI1OTEgOC43NTc3MSA4LjEyNzEgOC43NjUwNEM3Ljk5NTEgOC43NzIzNyA3Ljg5MjQzIDguNzc2MDQgNy44MTkxIDguNzc2MDRINS45NzExVjExLjQ2SDQuNDc1MVpNNS45NzExIDcuMzc5MDRINy43NTMxQzcuODMwMSA3LjM3OTA0IDcuOTE0NDMgNy4zNzUzNyA4LjAwNjEgNy4zNjgwNEM4LjA5Nzc2IDcuMzYwNzEgOC4xODIxIDcuMzQ2MDQgOC4yNTkxIDcuMzI0MDRDOC40NjA3NiA3LjI2OTA0IDguNjE2NiA3LjE3NzM3IDguNzI2NiA3LjA0OTA0QzguODM2NiA2LjkxNzA0IDguOTExNzYgNi43NzIyMSA4Ljk1MjEgNi42MTQ1NEM4Ljk5NjEgNi40NTMyMSA5LjAxODEgNi4zMDEwNCA5LjAxODEgNi4xNTgwNEM5LjAxODEgNi4wMTUwNCA4Ljk5NjEgNS44NjQ3MSA4Ljk1MjEgNS43MDcwNEM4LjkxMTc2IDUuNTQ1NzEgOC44MzY2IDUuNDAwODcgOC43MjY2IDUuMjcyNTRDOC42MTY2IDUuMTQwNTQgOC40NjA3NiA1LjA0NzA0IDguMjU5MSA0Ljk5MjA0QzguMTgyMSA0Ljk3MDA0IDguMDk3NzYgNC45NTUzNyA4LjAwNjEgNC45NDgwNEM3LjkxNDQzIDQuOTQwNzEgNy44MzAxIDQuOTM3MDQgNy43NTMxIDQuOTM3MDRINS45NzExVjcuMzc5MDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"},96444:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMSIgaGVpZ2h0PSIzNSIgdmlld0JveD0iMCAwIDExIDM1IiBmaWxsPSJub25lIj4KICA8cGF0aCBkPSJNMTAgMEgxMUwxIDM1SDBMMTAgMFoiIGZpbGw9IiMxRjI5NEYiIGZpbGwtb3BhY2l0eT0iMC4yIi8+Cjwvc3ZnPg=="}}]);