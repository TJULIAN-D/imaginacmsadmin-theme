"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[6448],{16448:(e,t,l)=>{l.r(t),l.d(t,{default:()=>st});var r=l(92444),s=l(74044);const o={class:"stepper-report"},i={class:"tw-flex tw-flex-col sm:tw-flex-row sm:tw-items-end tw-justify-between"},a={class:"text-primary tw-text-2xl tw-font-semibold tw-mb-4"},n={class:"text-right tw-hidden"};function d(e,t,l,d,c,m){const u=(0,r.E1)("q-btn"),p=(0,r.E1)("q-form"),f=(0,r.E1)("q-step"),w=(0,r.E1)("q-stepper-navigation"),h=(0,r.E1)("q-stepper"),v=(0,r.E1)("inner-loading");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",i,[(0,r.QD)("h2",a,(0,s.WA)(m.titleReport),1),(0,r.QD)("div",n,[(0,r.K2)(u,{rounded:"",outline:"",color:"primary",label:"Discard",class:"q-mr-sm tw-mb-4","no-caps":""}),(0,r.K2)(u,{rounded:"",color:"primary",label:"Save",class:"tw-mb-4","no-caps":""})])]),(0,r.K2)(h,{modelValue:c.step,"onUpdate:modelValue":t[0]||(t[0]=e=>c.step=e),contracted:e.$q.screen.lt.sm,ref:"stepper",color:"primary","alternative-labels":"","active-color":"primary",animated:"",class:"tw-bg-white tw-overflow-auto","header-nav":!!this.reportId},{navigation:(0,r.Ql)((()=>[(0,r.K2)(w,{class:"text-right tw-border-t tw-z-0"},{default:(0,r.Ql)((()=>[c.step>1?((0,r.Wz)(),(0,r.Az)(u,{key:0,rounded:"","no-caps":"",outline:"",label:"Back",color:"primary",onClick:m.formPrevious,class:"tw-w-28 q-mr-sm tw-mt-6 text-sm btn-small rounded-sm"},null,8,["onClick"])):(0,r.g1)("",!0),(0,r.K2)(u,{rounded:"","no-caps":"",color:"primary",onClick:m.saveFormReports,label:c.step===m.sections.length?"Finish":"Next",class:"tw-w-28 tw-mt-6 text-sm btn-small"},null,8,["onClick","label"])])),_:1})])),default:(0,r.Ql)((()=>[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(m.sections,(e=>((0,r.Wz)(),(0,r.Az)(f,{key:e.id,name:e.id,prefix:e.prefix,title:e.title,done:e.done,error:e.error,"active-color":e.error?"red":"primary"},{default:(0,r.Ql)((()=>[(0,r.QD)("div",null,[(0,r.K2)(p,{ref_for:!0,ref:e.refs,class:"qformClass"},{default:(0,r.Ql)((()=>[((0,r.Wz)(),(0,r.Az)((0,r.mk)(e.component)))])),_:2},1536)])])),_:2},1032,["name","prefix","title","done","error","active-color"])))),128))])),_:1},8,["modelValue","contracted","header-nav"]),(0,r.K2)(v,{visible:m.loading},null,8,["visible"])])}l(23816);const c={class:"q-stepper-title"},m={class:"text-primary"},u=(0,r.QD)("div",null,null,-1),p={class:"tw-grid tw-gap-6 tw-grid-cols-1 md:tw-grid-cols-2 xl:tw-grid-cols-2 tw-my-4"};function f(e,t,l,o,i,a){const n=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.QD)("div",c,[(0,r.QD)("h3",m,(0,s.WA)(e.$tr("ireports.cms.identifyYourReport")),1),u]),(0,r.QD)("div",p,[(0,r.QD)("div",null,[(0,r.K2)(n,{modelValue:a.form.entity,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.entity=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.entity,onInput:a.changeEntity},null,8,["modelValue","field","onInput"]),(0,r.K2)(n,{modelValue:a.form.reportTypeId,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.reportTypeId=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.reportTypeId,onInput:a.getSelectedReportType},null,8,["modelValue","field","onInput"]),(0,r.K2)(n,{modelValue:a.form.folderId,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.folderId=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.folderId},null,8,["modelValue","field"]),(0,r.K2)(n,{modelValue:a.form.roles,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.roles=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.roles},null,8,["modelValue","field"])]),(0,r.QD)("div",null,[(0,r.K2)(n,{modelValue:a.form.title,"onUpdate:modelValue":t[4]||(t[4]=e=>a.form.title=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.title},null,8,["modelValue","field"]),(0,r.K2)(n,{modelValue:a.form.description,"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.description=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.description},null,8,["modelValue","field"])])])])}var w=l(61552),h=l(20267),v=l(91592);const b={created(){this.$nextTick((async function(){await(0,w.c)().getListOfReportTypes()}))},watch:{"form.reportTypeId":function(e,t){this.getSelectedReportType()}},data(){return{}},computed:{form(){return(0,w.c)().getDescriptionForm()},reportTypeList(){const e=(0,w.c)().getReportTypeList().filter((e=>e.entity.includes(this.form.entity)));return e},formFields(){return{reportsForms:{entity:{value:null,type:"select",isTranslatable:!1,props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],selectByDefault:!0,label:"Object*",icon:"fa-solid fa-list-ul"},loadOptions:{apiRoute:"apiRoutes.qreports.entities",select:{label:"label",id:"value"}}},reportTypeId:{value:null,type:"select",isTranslatable:!1,props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Report Type*",icon:"fa-thin fa-file-lines",options:this.reportTypeList}},folderId:{value:null,type:"treeSelect",isTranslatable:!1,props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Folder*",icon:"folder_open"},loadOptions:{apiRoute:"apiRoutes.qreports.folders"}},roles:{value:[],type:"crud",props:{crudType:"select",crudData:l.e(2428).then(l.bind(l,94808)),crudProps:{label:`${this.$trp("isite.cms.label.role",{capitalize:!0})}`,multiple:!0,useChips:!0},config:{options:{label:"name",value:"id"}}}},title:{value:null,type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],icon:"fa-regular fa-text-size",label:"Report Title*"}},description:{type:"input",props:{label:"Description",type:"textarea",counter:!0,maxlength:300,rows:"6"}}}}}},methods:{getSelectedReportType(){const e=this.reportTypeList.find((e=>e.id===Number(this.form.reportTypeId)));e&&((0,h.c)().setColumnList(e.columns||[]),(0,h.c)().setFilterList(e.filters||[]),(0,v.c)().setSortList(e.sort||[]))},changeEntity(){this.form.reportTypeId=null}}};var g=l(68716),y=l(41564),Q=l(95252),D=l.n(Q);const x=(0,g.c)(b,[["render",f]]),F=x;D()(b,"components",{QStepper:y.c});const k={class:"tw-overflow-x-hidden"},V={class:"q-stepper-title"},I={class:"text-primary"},$=(0,r.QD)("div",null,null,-1),A={class:"tw-flex"},C={class:"text-primary tw-text-base tw-font-extrabold"},W={class:"tw--mt-1.5"},q={class:"tw-mb-6 tw-font-bold"},T={class:"check-report-div"},z={class:"tw-flex tw-pt-5"},S={class:"text-primary tw-text-base tw-font-extrabold"},K={class:"tw--mt-1.5"},Y={class:"tw-mb-6 tw-font-bold"},O={class:"tw-flex tw-flex-wrap"};function R(e,t,l,o,i,a){const n=(0,r.E1)("dynamic-field"),d=(0,r.E1)("q-tooltip"),c=(0,r.E1)("q-btn"),m=(0,r.E1)("draggable");return(0,r.Wz)(),(0,r.An)("div",k,[(0,r.QD)("div",V,[(0,r.QD)("h3",I,(0,s.WA)(e.$tr("ireports.cms.selectColumnsFilters")),1),$]),(0,r.QD)("div",A,[(0,r.QD)("div",null,[(0,r.QD)("h4",C,(0,s.WA)(e.$tr("ireports.cms.selectColumns")),1)]),(0,r.QD)("div",W,[(0,r.K2)(n,{modelValue:a.columnCheck,"onUpdate:modelValue":t[0]||(t[0]=e=>a.columnCheck=e),field:i.check},null,8,["modelValue","field"])])]),(0,r.QD)("div",null,[(0,r.QD)("p",q,(0,s.WA)(e.$tr("ireports.cms.dragColumns")),1)]),(0,r.QD)("div",null,[(0,r.K2)(m,{list:a.columnList,animation:300,ghostClass:"ghost",handle:".check-report-icon",class:"tw-grid tw-gap-6 tw-grid-cols-1 md:tw-grid-cols-2 xl:tw-grid-cols-6 tw-my-4 tw-overflow-hidden","item-key":"id"},{item:(0,r.Ql)((({element:l})=>[(0,r.QD)("div",T,[(0,r.K2)(d,{anchor:"bottom middle",self:"center middle"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,s.WA)(l?.title),1)])),_:2},1024),(0,r.K2)(n,{class:"check-report-1",modelValue:l.check,"onUpdate:modelValue":e=>l.check=e,field:a.formFields.reportsColumns[l?.id],onInput:t[1]||(t[1]=e=>a.checkIfAllChecksSelected("columnList"))},null,8,["modelValue","onUpdate:modelValue","field"]),(0,r.K2)(c,{flat:"",round:"",size:"6px",class:"f-cursor-grab check-report-icon"},{default:(0,r.Ql)((()=>[(0,r.K2)(d,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,r.Ql)((()=>[(0,r.mY)((0,s.WA)(e.$tr("ireports.cms.moveColumn")),1)])),_:1})])),_:1})])])),_:1},8,["list"])]),(0,r.QD)("div",z,[(0,r.QD)("div",null,[(0,r.QD)("h4",S,(0,s.WA)(e.$tr("ireports.cms.selectFirst")),1)]),(0,r.QD)("div",K,[(0,r.K2)(n,{modelValue:a.filterCheck,"onUpdate:modelValue":t[2]||(t[2]=e=>a.filterCheck=e),field:i.check},null,8,["modelValue","field"])])]),(0,r.QD)("div",null,[(0,r.QD)("p",Y,(0,s.WA)(a.labelTotalFilter),1)]),(0,r.QD)("div",O,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(a.filterList,(e=>((0,r.Wz)(),(0,r.An)("div",{key:e?.id,class:"tw-mr-2 tw-mb-2"},[(0,r.K2)(n,{modelValue:e.check,"onUpdate:modelValue":t=>e.check=t,class:(0,s.WN)(["check-report-2",{"check-report-text-white check-report-btn":Boolean(e.check)}]),field:a.formFields.reportsFilters[e?.id],onInput:t[3]||(t[3]=e=>a.checkIfAllChecksSelected("filterList"))},null,8,["modelValue","onUpdate:modelValue","class","field"])])))),128))])])}var E=l(10328),L=l.n(E);const U={components:{draggable:L()},data(){return{check:{type:"checkbox",value:0,props:{label:this.$tr("ireports.cms.label.selectAll")}}}},mounted(){this.columnCheck=Number(this.columnList.some((e=>e.check))),this.filterCheck=Number(this.filterList.some((e=>e.check)))},computed:{labelTotalFilter(){return`${this.$tr("ireports.cms.selectFirstSummary",{total:this.totalSelectedFilters})}`},columnList(){return(0,h.c)().getColumnList()},filterList(){return(0,h.c)().getFilterList()},totalSelectedFilters(){return(0,h.c)().getSelectedFilters().length},formFields(){return{reportsColumns:(0,h.c)().factoryOfDynamicCheck("columnList"),reportsFilters:(0,h.c)().factoryOfDynamicCheck("filterList")}},columnCheck:{get(){return(0,h.c)().getColumnCheck()},async set(e){await(0,h.c)().setColumnCheck(e),await(0,h.c)().selecdAll("columnList")}},filterCheck:{get(){return(0,h.c)().getFilterListCheck()},async set(e){await(0,h.c)().setFilterListCheck(e),await(0,h.c)().selecdAll("filterList")}}},methods:{checkIfAllChecksSelected(e){(0,h.c)().checkIfAllChecksSelected(e)}}};var M=l(90111),_=l(99140),N=l(84884),j=l(69452),B=l(78488);const P=(0,g.c)(U,[["render",R]]),Z=P;D()(U,"components",{QStepper:y.c,QTooltip:M.c,QBtn:_.c,QItem:N.c,QField:j.c,QCheckbox:B.c});const X={class:"q-stepper-title"},G={class:"text-primary"},H=(0,r.QD)("div",null,null,-1),J={class:"text-primary tw-text-base tw-font-extrabold tw-mb-6"},ee={class:"tw-grid tw-gap-x-8 tw-gap-y-6 tw-grid-cols-1 md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-my-4 tw-overflow-hidden"},te=(0,r.QD)("div",null,null,-1);function le(e,t,l,o,i,a){const n=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.QD)("div",X,[(0,r.QD)("h3",G,(0,s.WA)(e.$tr("ireports.cms.detailFilterOptions")),1),H]),(0,r.QD)("h4",J,(0,s.WA)(e.$tr("ireports.cms.selectInfoYouWantToShowForEachFilter")),1),(0,r.QD)("div",ee,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(a.formFields.reportsForms,((e,t)=>((0,r.Wz)(),(0,r.An)("div",{key:t},[(0,r.K2)(n,{modelValue:a.form[t],"onUpdate:modelValue":e=>a.form[t]=e,class:"input-report",field:e},null,8,["modelValue","onUpdate:modelValue","field"])])))),128)),te])])}var re=l(43408);const se={data(){return{}},created(){(0,re.c)().removeObjectIdentifiers()},computed:{form(){return(0,re.c)().getForm()},formFields(){return{reportsForms:(0,re.c)().factoryOfDynamicSelect()}}}},oe=(0,g.c)(se,[["render",le]]),ie=oe;D()(se,"components",{QStepper:y.c});const ae={class:"q-stepper-title"},ne={class:"text-primary"},de=(0,r.QD)("div",null,null,-1),ce={class:"text-primary tw-text-base tw-font-extrabold tw-mb-6"},me={class:"md:tw-w-9/12 lg:tw-w-7/12"},ue={class:"sm:tw-flex tw-items-center tw-space-x-4 tw-mb-4 tw-hidden"},pe={class:"tw-w-1/2 text-primary tw-text-base tw-font-extrabold"},fe={class:"tw-w-1/2 text-primary tw-text-base tw-font-extrabold"},we={class:"tw-w-auto sm:tw-w-1/2 tw-text-center sm:tw-text-left tw-items-center tw-flex"},he={class:"tw-mr-2 sm:tw-mr-4"},ve={class:"text-primary tw-w-7 sm:tw-w-9 tw-h-7 sm:tw-h-9 tw-inline-flex tw-items-center tw-justify-center tw-font-extrabold tw-rounded-full tw-border-2 tw-border-slate-50"},be={class:"tw-text-sm md:tw-text-base tw-hidden sm:tw-block tw-font-extrabold"},ge={class:"tw-w-full sm:tw-w-1/2"};function ye(e,t,l,o,i,a){const n=(0,r.E1)("dynamic-field");return(0,r.Wz)(),(0,r.An)("div",null,[(0,r.QD)("div",ae,[(0,r.QD)("h3",ne,(0,s.WA)(e.$tr("ireports.cms.chooseColumnSorting")),1),de]),(0,r.QD)("h4",ce,(0,s.WA)(e.$tr("ireports.cms.adjustFollowingParameters"))+": ",1),(0,r.QD)("div",me,[(0,r.QD)("div",ue,[(0,r.QD)("div",pe,(0,s.WA)(e.$tr("isite.cms.label.attribute")),1),(0,r.QD)("div",fe,(0,s.WA)(e.$tr("ireports.cms.sort")),1)]),((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(a.formFields.reportsForms,((e,t,l)=>((0,r.Wz)(),(0,r.An)("div",{key:l,class:"tw-flex tw-items-center tw-space-x-2 tw-w-full tw-mb-4"},[(0,r.QD)("div",we,[(0,r.QD)("div",he,[(0,r.QD)("div",ve,(0,s.WA)(l+1),1)]),(0,r.QD)("div",be,(0,s.WA)(e.props.label),1)]),(0,r.QD)("div",ge,[(0,r.K2)(n,{modelValue:a.form[t],"onUpdate:modelValue":e=>a.form[t]=e,class:"select-report",field:e},null,8,["modelValue","onUpdate:modelValue","field"])])])))),128))])])}const Qe={data(){return{}},created(){this.$nextTick((function(){(0,v.c)().removeObjectIdentifiers()}))},computed:{form(){return(0,v.c)().getForm()},formFields(){return{reportsForms:(0,v.c)().factoryOfDynamicSelect()}}}},De=(0,g.c)(Qe,[["render",ye]]),xe=De;D()(Qe,"components",{QStepper:y.c,QField:j.c});const Fe=(0,r.QD)("div",{class:"q-stepper-title"},[(0,r.QD)("h3",{class:"text-primary"},"Schedule your new report"),(0,r.QD)("div")],-1),ke={class:"tw-flex tw-items-center tw-mb-6"},Ve=(0,r.QD)("div",{class:"tw-border-r-2 tw-pr-4"},[(0,r.QD)("h4",{class:"text-primary tw-text-base tw-font-extrabold"},"Do you want to schedule it? Adjust the following parameters:")],-1),Ie={class:"tw-pl-4"},$e={key:0},Ae={class:"tw-grid tw-gap-x-10 tw-gap-y-4 tw-grid-cols-1 md:tw-grid-cols-2 tw-mt-4 tw-overflow-hidden"},Ce={class:"tw-grid tw-gap-x-10 tw-gap-y-4 tw-grid-cols-1 md:tw-grid-cols-2 tw-my-4 tw-overflow-hidden"},We={class:"tw-grid tw-gap-x-10 tw-gap-y-4 tw-grid-cols-1 md:tw-grid-cols-2 tw-my-4 tw-overflow-hidden"},qe={class:"tw-w-full tw-flex tw-flex-col tw-items-start tw-space-x-4 tw-mb-6 sm:tw-flex-row lg:tw-mb-8"},Te={class:"tw-w-full tw-mb-4 lg:tw-mb-0"},ze={class:"tw-flex lg:tw-w-auto tw-overflow-hidden w-120"},Se={class:"tw-w-full tw-flex tw-flex-col sm:tw-flex-row tw-items-start sm:tw-space-x-4 tw-mb-4"};function Ke(e,t,l,o,i,a){const n=(0,r.E1)("dynamic-field"),d=(0,r.E1)("q-btn"),c=(0,r.E1)("q-icon"),m=(0,r.E1)("q-tooltip");return(0,r.Wz)(),(0,r.An)("div",null,[Fe,(0,r.QD)("div",ke,[Ve,(0,r.QD)("div",Ie,[(0,r.K2)(n,{modelValue:a.form.status,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.status=e),field:a.formFields.reportsForms.status},null,8,["modelValue","field"])])]),1==a.form.status?((0,r.Wz)(),(0,r.An)("div",$e,[(0,r.QD)("div",Ae,[(0,r.K2)(n,{modelValue:a.form.timeInterval,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.timeInterval=e),class:"input-report",field:a.formFields.reportsForms.timeInterval,onInput:a.changeTimeInterval},null,8,["modelValue","field","onInput"]),(0,r.K2)(n,{modelValue:a.form.timeZone,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.timeZone=e),class:"input-report",field:a.formFields.reportsForms.timeZone},null,8,["modelValue","field"])]),a.form.timeInterval?((0,r.Wz)(),(0,r.An)("div",{key:0,class:(0,s.WN)(["tw-grid tw-gap-x-10 tw-gap-y-4 tw-grid-cols-1 md:tw-grid-cols-2 tw-mt-4 tw-overflow-hidden",{"md:tw-grid-cols-1":1==a.form.timeInterval}])},[1!=this.form.timeInterval?((0,r.Wz)(),(0,r.Az)(n,{key:0,modelValue:a.form.on,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.on=e),class:"input-report-nolabel tw-w-full input-report-on",field:a.formFields.reportsForms.on},null,8,["modelValue","field"])):(0,r.g1)("",!0),(0,r.K2)(n,{modelValue:a.form.at,"onUpdate:modelValue":t[4]||(t[4]=e=>a.form.at=e),class:"input-report-nolabel tw-w-full",field:a.formFields.reportsForms.at},null,8,["modelValue","field"])],2)):(0,r.g1)("",!0),(0,r.QD)("div",Ce,[(0,r.K2)(n,{modelValue:a.form.startingOn,"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.startingOn=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.startingOn,onInput:a.changeValidateDate},null,8,["modelValue","field","onInput"]),(0,r.K2)(n,{modelValue:a.form.endingOn,"onUpdate:modelValue":t[6]||(t[6]=e=>a.form.endingOn=e),class:"input-report tw-mb-4",field:a.formFields.reportsForms.endingOn},null,8,["modelValue","field"])]),(0,r.QD)("div",null,[(0,r.QD)("div",We,[(0,r.QD)("div",null,[(0,r.QD)("div",null,[((0,r.Wz)(!0),(0,r.An)(r.ae,null,(0,r.mi)(a.form.emails,((e,t)=>((0,r.Wz)(),(0,r.An)("div",qe,[(0,r.QD)("div",Te,[(0,r.K2)(n,{modelValue:e.email,"onUpdate:modelValue":t=>e.email=t,class:"input-report",field:a.formFields.reportsForms.email},null,8,["modelValue","onUpdate:modelValue","field"])]),(0,r.QD)("div",ze,[(0,r.QD)("div",null,[(0,r.K2)(n,{modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,field:a.formFields.reportsForms.status},null,8,["modelValue","onUpdate:modelValue","field"])]),(0,r.QD)("div",null,[(0,r.K2)(d,{flat:"",round:"",color:"primary",icon:"fa-regular fa-trash-can",size:"12px",onClick:e=>a.deleteEmailNotification(t)},null,8,["onClick"])])])])))),256))]),(0,r.QD)("div",null,[a.form.emails.length<=4?((0,r.Wz)(),(0,r.Az)(d,{key:0,rounded:"",outline:"",color:"primary",class:"tw-mb-1",size:"sm","no-caps":"",onClick:a.addEmailNotification},{default:(0,r.Ql)((()=>[(0,r.K2)(c,{size:"1em",name:"fa fa-plus"}),(0,r.K2)(m,{anchor:"bottom middle",self:"center middle"},{default:(0,r.Ql)((()=>[(0,r.mY)((0,s.WA)(e.$tr("ireports.cms.addAnotherEmail")),1)])),_:1})])),_:1},8,["onClick"])):(0,r.g1)("",!0)])]),(0,r.QD)("div",Se,[(0,r.K2)(n,{modelValue:a.form.format,"onUpdate:modelValue":t[7]||(t[7]=e=>a.form.format=e),class:"q-mb-md radio-report",field:a.formFields.reportsForms.format},null,8,["modelValue","field"])])])])])):(0,r.g1)("",!0)])}var Ye=l(52736);const Oe=[{label:"Daily",value:"1"},{label:"Weekly",value:"2"},{label:"Monthly",value:"3"}],Re=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12},{label:"13",value:13},{label:"14",value:14},{label:"15",value:15},{label:"16",value:16},{label:"17",value:17},{label:"18",value:18},{label:"19",value:19},{label:"20",value:20},{label:"21",value:21},{label:"22",value:22},{label:"23",value:23},{label:"24",value:24},{label:"25",value:25},{label:"26",value:26},{label:"27",value:27},{label:"28",value:28},{label:"29",value:29},{label:"30",value:30},{label:"31",value:31}],Ee=[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],Le={data(){return{}},computed:{form(){return Ye.c.form},modelOn(){return 2==this.form.timeInterval?Ee:Re},formFields(){return{reportsForms:{status:{type:"toggle",value:"1",props:{size:"lg",options:[{label:"YES",value:"1"},{label:"NO",value:"0"}]}},timeInterval:{value:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Time Interval",icon:"fa-light fa-timer",options:Oe,sortOptions:!1}},timeZone:{value:"",type:"select",props:{label:this.$tr("ifly.cms.form.timezone"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qfly.timezones",select:{label:"name",id:"value"},requestParams:{refresh:!0}}},at:{value:null,type:"hour",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"At",icon:"fa-light fa-clock"}},on:{value:2==this.form.timeInterval?[]:null,type:"select",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],vIf:1!=this.form.timeInterval,label:"On",icon:"fa-regular fa-calendar-check",options:this.modelOn,multiple:2==this.form.timeInterval,sortOptions:!1}},startingOn:{type:"date",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Starting On",icon:"fa-light fa-calendar-days",hint:"Format: MM/DD/YYYY",mask:"MM/DD/YYYY"}},endingOn:{type:"date",isTranslatable:!1,props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Ending On",icon:"fa-light fa-calendar-days",hint:"Format: MM/DD/YYYY",mask:"MM/DD/YYYY",options:this.validateDate,readonly:!this.form.startingOn}},email:{type:"input",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>/.+@.+\..+/.test(e)||"Please enter a valid email address"],label:"Email Notification",icon:"fa-light fa-envelope",counter:!0,maxlength:40}},format:{value:"csv",type:"optionGroup",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:"Attach this report as:",inline:!0,stackLabel:!0,options:[{label:"CSV",value:"csv"}]}}}}}},methods:{addEmailNotification(){this.form.emails.length>=5||Ye.c.addEmailNotification()},deleteEmailNotification(e){Ye.c.deleteEmailNotification(e)},validateDate(e){return e>=this.$moment(this.form.startingOn).format("YYYY/MM/DD")},changeValidateDate(){const e=this.$moment(this.form.startingOn).format("YYYY/MM/DD"),t=this.$moment(this.form.endingOn).format("YYYY/MM/DD");t<e&&(this.form.endingOn=null)},changeTimeInterval(){this.form.on=2==this.form.timeInterval?[]:null}}};var Ue=l(58120);const Me=(0,g.c)(Le,[["render",Ke]]),_e=Me;D()(Le,"components",{QStepper:y.c,QBtn:_.c,QIcon:Ue.c,QTooltip:M.c,QField:j.c});var Ne=l(84424),je=l(75836),Be=l(8932);const Pe=(0,je.IL)([{id:Ne.kX,title:Be._s.tr("isite.cms.form.description"),prefix:1,component:(0,je.Md)(F),done:!1,refs:"descriptionForm",error:!1},{id:Ne.gh,title:Be._s.tr("isite.cms.form.feature"),prefix:2,component:(0,je.Md)(Z),done:!1,refs:"featureForm",error:!1},{id:Ne.is,title:Be._s.tr("isite.cms.form.fieldsDetails"),prefix:3,component:(0,je.Md)(ie),done:!1,refs:"fieldsDetailsForm",error:!1},{id:Ne.sH,title:Be._s.tr("isite.cms.form.sort"),prefix:4,component:(0,je.Md)(xe),done:!1,refs:"sortForm",error:!1},{id:Ne.Ax,title:Be._s.tr("isite.cms.form.schedule"),prefix:5,component:(0,je.Md)(_e),done:!1,refs:"scheduleForm",error:!1}]),Ze=Pe.value;var Xe=l(24248);const Ge={data(){return{step:Ne.kX}},watch:{"$route.name":{deep:!0,handler:function(e){(0,Xe.c)().reset(),this.reset();const t=this.sections.find((e=>e.id===this.step));this.$refs[t.refs]&&this.$refs[t.refs].length>0&&(this.step=Ne.kX,this.$refs[t.refs][0].reset())}}},onBeforeMount(){this.$nextTick((function(){(0,Xe.c)().reset(),this.reset()}))},created(){this.$nextTick((async function(){this.reportId&&await(0,Xe.c)().showReport(this.reportId)}))},computed:{loading(){return(0,Xe.c)().getLoading()},sortList(){return(0,v.c)().getSortList()},sections(){return Ze.filter((e=>0!==this.sortList.length||4!==e.id)).map((({id:e,...t},l)=>({...t,id:l+1,prefix:l+1})))},reportId(){return this.$route.params.id||null},titleReport(){return this.reportId?this.$tr("ireports.cms.sidebar.reportEdit"):this.$tr("ireports.cms.sidebar.reportCreate")}},methods:{async saveFormReports(){try{const e=this.sections.find((e=>e.id===this.step));this.$refs[e.refs]&&this.$refs[e.refs].length>0&&this.$refs[e.refs][0].validate().then((async t=>{if(t)return this.step!==Ne.gh||0!==(0,h.c)().getSelectedFilters().length&&0!==(0,h.c)().getSelectedColumns().length?this.step===this.sections.length?(await(0,Xe.c)().saveReport(this.reportId),await this.$alert.success({message:this.reportId?"The report was updated correctly":"the report was saved correctly"}),void this.$router.push({name:"qreports.admin.folders"})):(e.error=!1,e.done=!0,void this.$refs.stepper.next()):(e.error=!0,void this.$alert.error({message:this.$tr("ireports.cms.message.selectColumn")}));e.error=!0}))}catch(e){console.log(e)}},formPrevious(){this.$refs.stepper.previous()},reset(){this.sections.forEach((e=>{e.error=!1,e.done=!1}))}}};var He=l(41128),Je=l(14288),et=l(65972),tt=l(48736),lt=l(36008);const rt=(0,g.c)(Ge,[["render",d]]),st=rt;D()(Ge,"components",{QBtn:_.c,QStepper:y.c,QStep:He.c,QForm:Je.c,QStepperNavigation:et.c,QField:j.c,QRadio:tt.c,QIcon:Ue.c,QSelect:lt.c})}}]);